(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Swap"],{"0865":function(e,t,i){},"0af0":function(e,t,i){"use strict";i("a206")},"0e64":function(e,t,i){},"0e93":function(e,t,i){},1461:function(e,t,i){"use strict";i("441e")},1675:function(e,t,i){"use strict";i("e60c")},"26d9":function(e,t,i){"use strict";i("cffb")},2832:function(e,t,i){"use strict";i("bb6a")},"2b70":function(e,t,i){},"35e3":function(e,t,i){"use strict";i.r(t);var o=i("7a23"),n=i("e524"),s=i.n(n),a=i("965b"),l=i.n(a);const r=e=>(Object(o["pushScopeId"])("data-v-8a6ab47c"),e=e(),Object(o["popScopeId"])(),e),c={class:"swap-content"},d={class:"swap-content_left",ref:"swapLeft"},m=["onClick"],u={class:"select-c"},h={key:0,class:"notice-container"},p={class:"card-container"},b={class:"card-container_top flex justify-between items-center"},v=r(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),f={class:"s-text"},g={class:"flex justify-between items-center mt-20"},k=r(()=>Object(o["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)),w={class:"card-container"},O={class:"card-container_top flex justify-between items-center"},j=r(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),y={class:"s-text"},S={class:"flex justify-between items-center mt-20"},T={key:0},_={key:1},N={key:0,style:{"font-size":"0.24rem"}},$={key:0,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},V={key:1,style:{"font-size":"0.24rem",color:"#F81111",margin:"0.1rem 0"}},x={key:2,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},E={class:"card-container"},A={class:"card-container_top flex justify-between items-center"},I=r(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),B={class:"s-text"},C={class:"flex justify-between items-center mt-20"},P=r(()=>Object(o["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)),D={class:"card-container"},L={class:"card-container_top flex justify-between items-center"},F=r(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),M={class:"s-text"},U={class:"flex justify-between items-center mt-20"},R={key:0,class:"limit-price-label"},G={key:1,class:"card-container flex justify-between items-center"},Q=["disabled"],z=["disabled"],q={class:"limit-price-label mt-10"},W={class:"card-container flex justify-between items-center"},H=["disabled"],K=["disabled"],X={class:"limit-price-label mt-10"},J={class:"card-container flex justify-between items-center"},Y=["disabled"],Z=["disabled"],ee=r(()=>Object(o["createElementVNode"])("div",{class:"swap-content_center"},null,-1)),te={class:"right-section-1"},ie=Object(o["createTextVNode"])("+"),oe={class:"right-section-2"},ne=Object(o["createTextVNode"])("LP"),se={key:0,class:"swap-label"},ae={class:"swap-label_item-left"},le={key:1,style:{display:"flex","align-items":"center"}},re={key:0},ce={key:1,class:"mr-5 ml-5 color-999"},de={style:{"margin-right":"0.1rem"}},me={key:2,style:{display:"flex","align-items":"center"}},ue={style:{"margin-right":"0.1rem"}},he={class:"swap-label_item-left"},pe={style:{display:"flex","align-items":"center"}},be={class:"swap-label_item-left"},ve={style:{display:"flex","align-items":"center"}},fe={class:"swap-label_item-left"},ge={class:"swap-label_item-left"},ke={key:0},we={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},Oe={key:1},je={key:1,class:"path-list"},ye={key:0},Se={key:1,class:"path-amm"},Te=r(()=>Object(o["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},null,-1)),_e={key:0,class:"select-token iconfont icon-collapse-down"},Ne={key:2},$e={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},Ve={key:1},xe={key:0},Ee={key:1,class:"path-amm"},Ae=r(()=>Object(o["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},null,-1)),Ie={key:0,class:"select-token iconfont icon-collapse-down"},Be={key:0},Ce={class:"swap-label_item-left"},Pe={class:"flex items-center"},De={key:1,class:"swap-label"},Le={key:0},Fe={class:"swap-label_item-left"},Me={key:0,style:{display:"flex","align-items":"center"}},Ue={style:{"margin-right":"0.1rem"}},Re={key:1,style:{display:"flex","align-items":"center"}},Ge={style:{"margin-right":"0.1rem"}},Qe={key:1},ze={class:"swap-label_item-left"},qe={key:1,style:{display:"flex","align-items":"center"}},We={class:"section-bottom"},He={class:"title"},Ke=r(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Xe={key:0,style:{"background-color":"#fff"}},Je={key:1,style:{"background-color":"#fff"}},Ye={key:2,style:{"background-color":"#fff"}},Ze={class:"footer-container"},et=r(()=>Object(o["createElementVNode"])("img",{src:l.a,alt:"",srcset:""},null,-1)),tt={style:{background:"#fff","padding-bottom":"1rem"}},it={class:"token-item header"},ot={class:"flex-2"},nt={class:"flex-1"},st={class:"flex-1 right-label"},at=r(()=>Object(o["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)),lt=["onClick"],rt={class:"path-list flex-start flex-2"},ct={key:0},dt={key:1,class:"path-amm"},mt=r(()=>Object(o["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},null,-1)),ut={key:0,class:"tag"},ht={class:"flex-1"},pt=Object(o["createTextVNode"])(" <0.01% "),bt=Object(o["createTextVNode"])(" >40% ");function vt(e,t,n,s,a,l){var r,vt,ft,gt,kt,wt,Ot,jt,yt,St,Tt,_t,Nt,$t,Vt,xt,Et,At,It,Bt,Ct,Pt,Dt;const Lt=Object(o["resolveComponent"])("van-count-down"),Ft=Object(o["resolveComponent"])("v-select"),Mt=Object(o["resolveComponent"])("van-button"),Ut=Object(o["resolveComponent"])("SwapSelectToken"),Rt=Object(o["resolveComponent"])("van-field"),Gt=Object(o["resolveComponent"])("PercentStep"),Qt=Object(o["resolveComponent"])("van-form"),zt=Object(o["resolveComponent"])("van-icon"),qt=Object(o["resolveComponent"])("PriceChart"),Wt=Object(o["resolveComponent"])("SwapModeSet"),Ht=Object(o["resolveComponent"])("SlippageButton"),Kt=Object(o["resolveComponent"])("van-image"),Xt=Object(o["resolveComponent"])("SwapGasSet"),Jt=Object(o["resolveComponent"])("SolanaLimitExpired"),Yt=Object(o["resolveComponent"])("van-tab"),Zt=Object(o["resolveComponent"])("van-tabs"),ei=Object(o["resolveComponent"])("van-checkbox"),ti=Object(o["resolveComponent"])("van-loading"),ii=Object(o["resolveComponent"])("TxItem"),oi=Object(o["resolveComponent"])("DynamicScrollerItem"),ni=Object(o["resolveComponent"])("DynamicScroller"),si=Object(o["resolveComponent"])("van-empty"),ai=Object(o["resolveComponent"])("LimitTxItem"),li=Object(o["resolveComponent"])("NoGasTxItem"),ri=Object(o["resolveComponent"])("confirm-swap"),ci=Object(o["resolveComponent"])("confirm-limit"),di=Object(o["resolveComponent"])("van-action-sheet"),mi=Object(o["resolveDirective"])("animation-trigger");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("section",{class:"swap-container",style:Object(o["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(o["createVNode"])(Lt,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e4,format:"sss",onFinish:l.onCountDownFinish},{default:Object(o["withCtx"])(e=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.seconds)+"s ",1)]),_:1},8,["onFinish"]),Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",{class:"tabs-triangle",style:Object(o["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.typeTabs,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:t,class:Object(o["normalizeClass"])(["tab-item",{active:a.activeTab===e.type,up:0===a.activeTab,down:1===a.activeTab}]),onClick:Object(o["withModifiers"])(t=>l.switchTab(e.type),["stop"])},Object(o["toDisplayString"])(e.name),11,m))),128))],4),Object(o["createElementVNode"])("div",u,[Object(o["createVNode"])(Ft,{modelValue:a.selected,"onUpdate:modelValue":t[0]||(t[0]=e=>a.selected=e),options:l.types,reduce:e=>e.value,label:"name",clearable:!1,searchable:!1},null,8,["modelValue","options","reduce"])]),"solana"===l.chain&&Number(l.wSOLBalance)>0&&l.wSOLAccount.pubkey?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("youHave"))+" "+Object(o["toDisplayString"])(e.$f.formatNumber2(l.wSOLBalance))+" wSOL,",1),Object(o["createVNode"])(Mt,{loading:a.loadingUnwrap,loadingText:e.$t("unwrap"),type:"primary",style:{"--van-button-mini-padding":"0","--van-button-default-line-height":"1","--van-button-border-width":"0"},plain:"",size:"mini",onClick:t[1]||(t[1]=Object(o["withModifiers"])(e=>l.unwrapSol(l.wSOLAccount.pubkey),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("unwrap")),1)]),_:1},8,["loading","loadingText"])])):Object(o["createCommentVNode"])("",!0),2===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])(Qt,{class:"swap-form",onSubmit:l.onSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(o["withCtx"])(()=>{var i,n,s,r,c,d,m,u;return[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",b,[Object(o["createVNode"])(Ut,{tokens:l.swapTokens,token:a.token1,"onUpdate:token":[t[2]||(t[2]=e=>a.token1=e),l.handleSelectToken1],chain:e.$store.getters.netId||(null===(i=e.$f.getAddressAndChainFromId(null===(n=e.$route.params)||void 0===n?void 0:n.id))||void 0===i?void 0:i.chain)||a.token1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),v,Object(o["createElementVNode"])("div",f,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(s=a.token1)||void 0===s?void 0:s.balance)||0)),1),1===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[3]||(t[3]=Object(o["withModifiers"])(e=>l.handlePercentChange(100),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]),_:1})):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",g,[0===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Rt,{key:0,modelValue:a.toAmount,"onUpdate:modelValue":[t[4]||(t[4]=e=>a.toAmount=e),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",readonly:l.isOnlyGetAmountsOut,onFocus:t[5]||(t[5]=t=>e.$refs.percentStep.handleClick(0,!0))},null,8,["modelValue","onUpdate:modelValue","readonly"])):Object(o["createCommentVNode"])("",!0),1===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Rt,{key:1,modelValue:a.fromAmount,"onUpdate:modelValue":[t[6]||(t[6]=e=>a.fromAmount=e),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[7]||(t[7]=t=>e.$refs.percentStep.handleClick(0,!0))},null,8,["modelValue","onUpdate:modelValue"])):Object(o["createCommentVNode"])("",!0)])]),k,Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",O,[Object(o["createVNode"])(Ut,{tokens:l.swapTokens,token:a.token2,"onUpdate:token":[t[8]||(t[8]=e=>a.token2=e),l.handleSelectToken2],chain:e.$store.getters.netId||(null===(r=e.$f.getAddressAndChainFromId(null===(c=e.$route.params)||void 0===c?void 0:c.id))||void 0===r?void 0:r.chain)||a.token2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),j,Object(o["createElementVNode"])("div",y,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(d=a.token2)||void 0===d?void 0:d.balance)||0)),1),0===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[9]||(t[9]=Object(o["withModifiers"])(e=>l.handlePercentChange(100),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]),_:1})):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",S,[1===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Rt,{key:0,modelValue:a.toAmount,"onUpdate:modelValue":[t[10]||(t[10]=e=>a.toAmount=e),l.watchToAmount],readonly:a.isPump||l.isOnlyGetAmountsOut||a.isMoonshot,placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[11]||(t[11]=t=>e.$refs.percentStep.handleClick(0,!0))},null,8,["modelValue","onUpdate:modelValue","readonly"])):Object(o["createCommentVNode"])("",!0),0===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Rt,{key:1,modelValue:a.fromAmount,"onUpdate:modelValue":[t[12]||(t[12]=e=>a.fromAmount=e),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[13]||(t[13]=t=>e.$refs.percentStep.handleClick(0,!0))},null,8,["modelValue","onUpdate:modelValue"])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])(Gt,{ref:"percentStep",onChange:l.handlePercentChange,activeColor:0===a.activeTab?e.$store.getters.upColor[3]:e.$store.getters.downColor[3]},null,8,["onChange","activeColor"]),!l.isApprove||a.loadingAllowance?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:0,class:"submit-btn",block:"",color:l.swapButtonColor,"native-type":"submit","loading-text":a.loadingAllowance?e.$t("checkingAllowance"):a.quoteLoading?e.$t("quoting"):a.loadingApprove?e.$t("approve"):"",loading:a.loadingApprove||a.loadingSwap||a.loadingAllowance,disabled:Number(l.fromToken.balance)<Number(this.fromAmount)},{default:Object(o["withCtx"])(()=>{var t,i;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(0===Number(l.fromToken.balance)||Number(l.fromToken.balance)<Number(this.fromAmount)||""===e.$store.state.currentAccount?null!==(t=l.priceImpactV)&&void 0!==t&&null!==(i=t.gt)&&void 0!==i&&i.call(t,.4)?e.$t("priceImpactTooHigh"):l.checkAmountMessage()||e.$t("approve"):e.$t("approve")),1)]}),_:1},8,["color","loading-text","loading","disabled"])):(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:1,class:"submit-btn",block:"",loading:a.loadingSwap||a.quoteLoading||a.loadingAllowance,"loading-text":a.loadingSwap?0===a.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:l.swapButtonColor,disabled:(null===(m=l.priceImpactV)||void 0===m||null===(u=m.gt)||void 0===u?void 0:u.call(m,.4))||!l.checkAmount()||!a.fromAmount||!a.toAmount,"native-type":"submit"},{default:Object(o["withCtx"])(()=>{var t,i,n,s,r;return[0===Number(l.fromToken.balance)||Number(l.fromToken.balance)<Number(this.fromAmount)||""===e.$store.state.currentAccount||(a.isERC314||a.isFourMeme||a.isFlap||a.isSunPump>0||a.isDyorswapfun||a.isXflapswap)&&a.token2.address!==a.nativeToken||(a.isPump||a.isMoonshot)&&"So11111111111111111111111111111111111111112"!==a.token2.address||l.isInsufficientTon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",T,Object(o["toDisplayString"])(l.checkAmountMessage()),1)):null!==(t=l.priceImpactV)&&void 0!==t&&null!==(i=t.gt)&&void 0!==i&&i.call(t,.4)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",_,Object(o["toDisplayString"])(e.$t("priceImpactTooHigh")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(null!==(n=l.priceImpactV)&&void 0!==n&&null!==(s=n.gt)&&void 0!==s&&s.call(n,.1)?0===a.activeTab?e.$t("buyAnyway"):e.$t("sellAnyway"):0===a.activeTab?e.$t("buy"):e.$t("sell"))+" "+Object(o["toDisplayString"])((null===(r=a.token1)||void 0===r?void 0:r.symbol)||""),1),l.taxStr?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",N,Object(o["toDisplayString"])(l.taxStr),1)):Object(o["createCommentVNode"])("",!0)],64))]}),_:1},8,["loading","loading-text","color","disabled"]))]}),_:1},8,["onSubmit"]),a.isTaxHigh?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$,Object(o["toDisplayString"])(e.$t("taxTooHigh")),1)):Object(o["createCommentVNode"])("",!0),a.isCannotSellAll?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",V,Object(o["toDisplayString"])(e.$t("cannotSellAll")),1)):Object(o["createCommentVNode"])("",!0),a.isHotToken?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",x,Object(o["toDisplayString"])(e.$t("hotTokenTips")),1)):Object(o["createCommentVNode"])("",!0)],64)):Object(o["createCommentVNode"])("",!0),0===a.selected||1===this.selected||3===this.selected?(Object(o["openBlock"])(),Object(o["createBlock"])(Qt,{key:2,class:"swap-form",onSubmit:l.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(o["withCtx"])(()=>{var i,n,s,r,c,d;return[Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("div",A,[Object(o["createVNode"])(Ut,{tokens:l.swapTokens,token:a.limitToken1,"onUpdate:token":[t[14]||(t[14]=e=>a.limitToken1=e),l.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(i=e.$f.getAddressAndChainFromId(null===(n=e.$route.params)||void 0===n?void 0:n.id))||void 0===i?void 0:i.chain)||a.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),I,Object(o["createElementVNode"])("div",B,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(s=a.limitToken1)||void 0===s?void 0:s.balance)||0)),1),1===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[15]||(t[15]=Object(o["withModifiers"])(e=>l.handlePercentChange1(100),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]),_:1})):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",C,[Object(o["createVNode"])(Rt,{modelValue:a.limitAmount1,"onUpdate:modelValue":[t[16]||(t[16]=e=>a.limitAmount1=e),l.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[17]||(t[17]=t=>e.$refs.percentStep1.handleClick(0,!0))},null,8,["modelValue","onUpdate:modelValue"])])]),P,Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("div",L,[Object(o["createVNode"])(Ut,{tokens:l.swapTokens,token:a.limitToken2,"onUpdate:token":[t[18]||(t[18]=e=>a.limitToken2=e),l.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(r=e.$f.getAddressAndChainFromId(null===(c=e.$route.params)||void 0===c?void 0:c.id))||void 0===r?void 0:r.chain)||a.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),F,Object(o["createElementVNode"])("div",M,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(d=a.limitToken2)||void 0===d?void 0:d.balance)||0)),1),0===a.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[19]||(t[19]=Object(o["withModifiers"])(e=>l.handlePercentChange1(100),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]),_:1})):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",U,[Object(o["createVNode"])(Rt,{modelValue:a.limitAmount2,"onUpdate:modelValue":[t[20]||(t[20]=e=>a.limitAmount2=e),l.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[21]||(t[21]=t=>e.$refs.percentStep1.handleClick(0,!0))},null,8,["modelValue","onUpdate:modelValue"])])]),Object(o["createVNode"])(Gt,{ref:"percentStep1",onChange:l.handlePercentChange1,activeColor:l.limitButtonColor},null,8,["onChange","activeColor"]),1===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,Object(o["toDisplayString"])(e.$t("triggerPrice"))+"("+Object(o["toDisplayString"])(a.limitToken1.symbol||"")+")",1)):Object(o["createCommentVNode"])("",!0),1===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,[Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[22]||(t[22]=Object(o["withModifiers"])((...e)=>l.minusTriggerPrice&&l.minusTriggerPrice(...e),["stop"])),disabled:!a.triggerPrice},[Object(o["createVNode"])(zt,{name:"minus"})],8,Q),Object(o["createVNode"])(Rt,{modelValue:a.triggerPrice,"onUpdate:modelValue":t[23]||(t[23]=e=>a.triggerPrice=e),placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue"]),Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[24]||(t[24]=Object(o["withModifiers"])((...e)=>l.addTriggerPrice&&l.addTriggerPrice(...e),["stop"])),disabled:!a.triggerPrice},[Object(o["createVNode"])(zt,{name:"plus"})],8,z)])):Object(o["createCommentVNode"])("",!0),1===a.selected||0===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},["solana"===l.chain&&0===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("div",q,Object(o["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(o["toDisplayString"])(a.limitToken1.symbol||"")+")",1),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[25]||(t[25]=Object(o["withModifiers"])((...e)=>l.minusLimitSolanaPrice&&l.minusLimitSolanaPrice(...e),["stop"])),disabled:!a.limitSolanaPriceU},[Object(o["createVNode"])(zt,{name:"minus"})],8,H),Object(o["createVNode"])(Rt,{modelValue:a.limitSolanaPriceU,"onUpdate:modelValue":[t[26]||(t[26]=e=>a.limitSolanaPriceU=e),l.watchLimitSolanaPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[27]||(t[27]=Object(o["withModifiers"])((...e)=>l.addLimitSolanaPrice&&l.addLimitSolanaPrice(...e),["stop"])),disabled:!a.limitSolanaPriceU},[Object(o["createVNode"])(zt,{name:"plus"})],8,K)])],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("div",X,Object(o["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(o["toDisplayString"])(a.limitToken1.symbol||"")+")",1),Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[28]||(t[28]=Object(o["withModifiers"])((...e)=>l.minusLimitPrice&&l.minusLimitPrice(...e),["stop"])),disabled:!a.limitPrice},[Object(o["createVNode"])(zt,{name:"minus"})],8,Y),Object(o["createVNode"])(Rt,{modelValue:a.limitPrice,"onUpdate:modelValue":[t[29]||(t[29]=e=>a.limitPrice=e),l.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[30]||(t[30]=Object(o["withModifiers"])((...e)=>l.addLimitPrice&&l.addLimitPrice(...e),["stop"])),disabled:!a.limitPrice},[Object(o["createVNode"])(zt,{name:"plus"})],8,Z)])],64))],64)):Object(o["createCommentVNode"])("",!0),l.isLimitApprove&&!a.loadingLimitAllowance||3===a.selected?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:4,class:"submit-btn",block:"",loading:a.loadingLimit||a.limitQuoteLoading,"loading-text":a.limitQuoteLoading?e.$t("quoting"):a.loadingLimit?0===a.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:l.limitButtonColor,disabled:!l.checkLimitAmount()||!a.limitAmount1||!a.limitAmount2||a.loadingLimitAllowance,"native-type":"submit"},{default:Object(o["withCtx"])(()=>{var t;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.checkLimitAmountMessage()||(0===a.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=a.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]}),_:1},8,["loading","loading-text","color","disabled"])):(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:3,class:"submit-btn",block:"",color:l.limitButtonColor,"native-type":"submit","loading-text":a.loadingLimitAllowance?e.$t("checkingAllowance"):a.quoteLimitLoading?e.$t("quoting"):a.loadingLimitApprove?e.$t("approve"):"",disabled:!l.checkLimitAmount(),loading:a.loadingLimitApprove||a.loadingLimit||a.loadingLimitAllowance},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(l.checkLimitAmountMessage()||e.$t("approve")),1)]),_:1},8,["color","loading-text","disabled","loading"]))]}),_:1},8,["onSubmit"])):Object(o["createCommentVNode"])("",!0)],512),ee,Object(o["createElementVNode"])("div",{class:"swap-content_right",style:Object(o["normalizeStyle"])({"max-height":a.height/50+"rem"})},[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("div",te,[Object(o["createElementVNode"])("div",null," $"+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(r=a.baseToken)||void 0===r||null===(r=r.token)||void 0===r?void 0:r.current_price_usd)||0)),1),Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])({color:(null===(vt=a.baseToken)||void 0===vt||null===(vt=vt.token)||void 0===vt?void 0:vt.price_change)<0?"var(--downColor)":"var(--upColor)"})},[(null===(ft=a.baseToken)||void 0===ft||null===(ft=ft.token)||void 0===ft?void 0:ft.price_change)>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[ie],64)):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2((null===(gt=a.baseToken)||void 0===gt||null===(gt=gt.token)||void 0===gt?void 0:gt.price_change)||0,2))+"% ",1)],4)])),[[mi,null===(kt=a.baseToken)||void 0===kt||null===(kt=kt.token)||void 0===kt?void 0:kt.current_price_usd,"animation-bg"]]),Object(o["createVNode"])(qt,{dataX:a.dataX,dataY:a.dataY},null,8,["dataX","dataY"]),Object(o["createElementVNode"])("table",oe,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th",null,Object(o["toDisplayString"])(e.$t("pool1")),1),Object(o["createElementVNode"])("th",null,[l.tokenInfo.token&&l.tokenInfo.chain&&a.openLp&&l.isShow&&!a.isERC314?(Object(o["openBlock"])(),Object(o["createBlock"])(Mt,{key:0,icon:"plus",type:"primary",plain:"",size:"small",style:{"--van-padding-base":"0","min-width":"0.8rem",height:"0.4rem"},onClick:Object(o["withModifiers"])(l.goLiquidity,["stop"])},{default:Object(o["withCtx"])(()=>[ne]),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)])]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(null===(wt=a.baseToken)||void 0===wt||null===(wt=wt.pairs)||void 0===wt?void 0:wt.slice(0,2),(t,i)=>Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:i},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[mi,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])),128)),(null===(Ot=a.baseToken)||void 0===Ot||null===(Ot=Ot.pairs)||void 0===Ot?void 0:Ot.length)>2&&a.isPairShowMore?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(null===(jt=a.baseToken)||void 0===jt||null===(jt=jt.pairs)||void 0===jt?void 0:jt.slice(2),(t,i)=>Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:i},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[mi,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"btn-more",onClick:t[31]||(t[31]=Object(o["withModifiers"])(e=>a.isPairShowMore=!0,["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("viewMore")),1),Object(o["createVNode"])(zt,{name:"arrow-down"})],512),[[o["vShow"],!a.isPairShowMore&&(null===(yt=a.baseToken)||void 0===yt||null===(yt=yt.pairs)||void 0===yt?void 0:yt.length)>2]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",{class:"btn-more",onClick:t[32]||(t[32]=Object(o["withModifiers"])(e=>a.isPairShowMore=!1,["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("putAway")),1),Object(o["createVNode"])(zt,{name:"arrow-up"})],512),[[o["vShow"],a.isPairShowMore&&(null===(St=a.baseToken)||void 0===St||null===(St=St.pairs)||void 0===St?void 0:St.length)>2]])],4)]),2===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",se,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",ae,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[33]||(t[33]=Object(o["withModifiers"])(t=>l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips")),["stop"]))})]),"solana"!==l.chain&&"ton"!==l.chain&&"sui"!==l.chain?(Object(o["openBlock"])(),Object(o["createBlock"])(Wt,{key:0,swapMode:a.customSwapMode,"onUpdate:swapMode":t[34]||(t[34]=e=>a.customSwapMode=e),autoSwapMode:a.autoSwapMode,slippage:a.customSlippage,"onUpdate:slippage":t[35]||(t[35]=e=>a.customSlippage=e),autoSlippage:a.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])):"solana"===l.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",le,[a.solanaProtection?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",re,Object(o["toDisplayString"])(e.$t("protection")),1)):Object(o["createCommentVNode"])("",!0),a.solanaProtection?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ce,"|")):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",de,Object(o["toDisplayString"])(a.solanaSlippage)+"%",1),Object(o["createVNode"])(Ht,{slippage:a.solanaSlippage,"onUpdate:slippage":t[36]||(t[36]=e=>a.solanaSlippage=e),icon:1,isProtection:!0,initProtection:a.solanaProtection,onOnSubmit:l.onSubmitSolanaSlippage},null,8,["slippage","initProtection","onOnSubmit"])])):"ton"===l.chain||"sui"===l.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",me,[Object(o["createElementVNode"])("span",ue,Object(o["toDisplayString"])(a.tonSlippage)+"%",1),Object(o["createVNode"])(Ht,{slippage:a.tonSlippage,"onUpdate:slippage":t[37]||(t[37]=e=>a.tonSlippage=e),icon:1,onOnSubmit:l.onSubmitTonSlippage},null,8,["slippage","onOnSubmit"])])):Object(o["createCommentVNode"])("",!0)]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",he,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("energy"))+"/"+Object(o["toDisplayString"])(e.$t("bandwidth")),1)]),Object(o["createElementVNode"])("div",pe,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("available"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2(e.$store.getters.EnergyBalance))+"/"+Object(o["toDisplayString"])(e.$f.formatNumber2(e.$store.getters.totalB)),1),Object(o["createElementVNode"])("button",{class:"rent-btn",onClick:t[38]||(t[38]=Object(o["withModifiers"])((...e)=>l.goTronRent&&l.goTronRent(...e),["stop"]))},Object(o["toDisplayString"])(e.$t("buy1")),1)])],512),[[o["vShow"],"tron"===l.chain&&e.$store.state.currentAccount]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",be,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(l.getAvgPrice()),1)])],512),[[o["vShow"],a.fromAmount&&a.toAmount]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",fe,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("priceImpact")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[39]||(t[39]=Object(o["withModifiers"])(t=>l.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips")),["stop"]))})]),Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])({color:l.priceImpactColor})},Object(o["toDisplayString"])(l.priceImpact)+Object(o["toDisplayString"])(null!==(Tt=l.priceImpactV)&&void 0!==Tt&&null!==(_t=Tt.gt)&&void 0!==_t&&_t.call(Tt,.05)?`(${e.$t("excessivePriceImpact")})`:""),5)],512),[[o["vShow"],a.fromAmount&&a.toAmount&&!a.isERC314]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",ge,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("tokenRoute")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[40]||(t[40]=Object(o["withModifiers"])(t=>l.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips")),["stop"]))})]),"solana"===l.chain||"sui"===l.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ke,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])([l.fromToken,l.toToken],(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:t},[0!==t?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",we)):Object(o["createCommentVNode"])("",!0),e.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Oe,Object(o["toDisplayString"])(e.symbol),1)):Object(o["createCommentVNode"])("",!0)],64))),128))])):"ton"===l.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.swapRouterPath,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:n},[t.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ye,Object(o["toDisplayString"])(t.symbol),1)):Object(o["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Se,[Object(o["createVNode"])(Kt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":i("aeccf")},null,8,["src","error-icon"]),Te])):Object(o["createCommentVNode"])("",!0)],64))),128)),a.listRouter.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",_e)):Object(o["createCommentVNode"])("",!0)])):1===(null===(Nt=a.swapQuoteInfo)||void 0===Nt?void 0:Nt.toWrapper)||2===(null===($t=a.swapQuoteInfo)||void 0===$t?void 0:$t.toWrapper)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ne,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.swapRouterPath,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:t},[0!==t?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",$e)):Object(o["createCommentVNode"])("",!0),e.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ve,Object(o["toDisplayString"])(e.symbol),1)):Object(o["createCommentVNode"])("",!0)],64))),128))])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:3,class:"path-list clickable",onClick:t[41]||(t[41]=Object(o["withModifiers"])(e=>!a.isFourMeme&&!a.isSunPump&&(a.dialogListRouterVisible=!0),["stop","prevent"]))},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.swapRouterPath,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:n},[t.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",xe,Object(o["toDisplayString"])(t.symbol),1)):Object(o["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ee,[Object(o["createVNode"])(Kt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":i("aeccf")},null,8,["src","error-icon"]),Ae])):Object(o["createCommentVNode"])("",!0)],64))),128)),a.listRouter.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",Ie)):Object(o["createCommentVNode"])("",!0)]))],512),[[o["vShow"],a.fromAmount&&a.toAmount]]),null!==(Vt=["solana","tron","ton","sui"])&&void 0!==Vt&&null!==(xt=Vt.includes)&&void 0!==xt&&xt.call(Vt,l.chain)?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",Be,[Object(o["createElementVNode"])("div",Ce,Object(o["toDisplayString"])(e.$t("estimatedGas")),1),Object(o["createElementVNode"])("div",Pe,[Object(o["createElementVNode"])("span",null,"≈ "+Object(o["toDisplayString"])(l.estimatedFee),1),"bsc"===e.$store.getters.netId?(Object(o["openBlock"])(),Object(o["createBlock"])(Xt,{key:0,class:"ml-5",standardGasPrice:a.gasPrice,gas:this.swapInfo.gasValue,nativePrice:a.nativePrice,onUpdateGasPrice:l.updateGasPrice},null,8,["standardGasPrice","gas","nativePrice","onUpdateGasPrice"])):Object(o["createCommentVNode"])("",!0)])]))])):Object(o["createCommentVNode"])("",!0),0===a.selected||1===a.selected||3===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",De,["solana"!==l.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",Le,[Object(o["createElementVNode"])("div",Fe,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[42]||(t[42]=Object(o["withModifiers"])(t=>l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips")),["stop"]))})]),0===a.selected||1===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Me,[Object(o["createElementVNode"])("span",Ue,Object(o["toDisplayString"])(a.limitSlippage)+"%",1),Object(o["createVNode"])(Ht,{slippage:a.limitSlippage,"onUpdate:slippage":t[43]||(t[43]=e=>a.limitSlippage=e),icon:1,onOnSubmit:l.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])):3===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Re,[Object(o["createElementVNode"])("span",Ge,Object(o["toDisplayString"])(a.noGasSlippage)+"%",1),Object(o["createVNode"])(Ht,{slippage:a.noGasSlippage,"onUpdate:slippage":t[44]||(t[44]=e=>a.noGasSlippage=e),icon:1,min:5,slippageList:["5","6","7"],onOnSubmit:l.onSubmitNoGasSlippage},null,8,["slippage","onOnSubmit"])])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),0===a.selected||1===a.selected?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",Qe,[Object(o["createElementVNode"])("div",ze,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("limitExpiredTime")),1)]),0===a.selected&&"solana"===l.chain?(Object(o["openBlock"])(),Object(o["createBlock"])(Jt,{key:0,expiredTime:a.solanaLimitExpiredTime,"onUpdate:expiredTime":t[45]||(t[45]=e=>a.solanaLimitExpiredTime=e)},null,8,["expiredTime"])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",qe,Object(o["toDisplayString"])(a.LimitExpiredDays)+" "+Object(o["toDisplayString"])(e.$t("days")),1))])):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",We,[Object(o["createElementVNode"])("div",He,[Object(o["createVNode"])(Zt,{active:a.tabActive1,"onUpdate:active":t[46]||(t[46]=e=>a.tabActive1=e),shrink:"",color:"#558BED","title-active-color":"#333333","title-inactive-color":"#999999",style:{"--van-tabs-nav-background-color":"#fff"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(Yt,{name:"swap",title:e.$t("historyExchange")},null,8,["title"]),a.isSupportNoGas&&"solana"!==l.chain?(Object(o["openBlock"])(),Object(o["createBlock"])(Yt,{key:0,name:"noGas",title:e.$t("historyNoGas")},null,8,["title"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(Yt,{name:"limit",title:e.$t("historyLimitOrder")},null,8,["title"])]),_:1},8,["active"]),Ke,Object(o["createVNode"])(ei,{modelValue:a.isCurrentToken,"onUpdate:modelValue":t[47]||(t[47]=e=>a.isCurrentToken=e),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1","--van-checkbox-label-margin":"0.1rem"}},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("currentToken")),1)]),_:1},8,["modelValue"]),"limit"===a.tabActive1?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[a.loadingGetLimitOrder?(Object(o["openBlock"])(),Object(o["createBlock"])(ti,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[48]||(t[48]=Object(o["withModifiers"])(e=>l.getLimitOrder(),["stop"]))}))],64)):Object(o["createCommentVNode"])("",!0)]),"swap"===a.tabActive1?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",Xe,[(null===(Et=l.txs)||void 0===Et?void 0:Et.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(ni,{key:0,items:l.txs,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(o["withCtx"])(({item:e,index:t,active:i})=>[Object(o["createVNode"])(oi,{item:e,active:i,"data-index":t},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ii,{item:e},null,8,["item"])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(si,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],l.txs&&0===l.txs.length]])])):Object(o["createCommentVNode"])("",!0),"limit"===a.tabActive1?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",Je,[(null===(At=l.filterLimitOrders)||void 0===At?void 0:At.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(ni,{key:0,items:l.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(o["withCtx"])(({item:e,index:t,active:i})=>[Object(o["createVNode"])(oi,{item:e,active:i,"data-index":t},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ai,{item:e,onRefresh:l.refreshLimit},null,8,["item","onRefresh"])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(si,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],l.filterLimitOrders&&0===l.filterLimitOrders.length]])])):Object(o["createCommentVNode"])("",!0),"noGas"===a.tabActive1?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",Ye,[(null===(It=l.filterNoGasTxList)||void 0===It?void 0:It.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(ni,{key:0,items:l.filterNoGasTxList,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(o["withCtx"])(({item:e,index:t,active:i})=>[Object(o["createVNode"])(oi,{item:e,active:i,"data-index":t},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(li,{item:e,onRefresh:l.getNoGasList},null,8,["item","onRefresh"])]),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(si,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],l.filterNoGasTxList&&0===l.filterNoGasTxList.length&&!a.loadingGetNoGasList]])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",Ze,[Object(o["createElementVNode"])("div",{class:"section-audit",onClick:t[49]||(t[49]=Object(o["withModifiers"])((...e)=>l.goAudit&&l.goAudit(...e),["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("securityAudit"))+": ",1),et])])],4),Object(o["createVNode"])(ri,{visible:a.dialogVisibleSwap,"onUpdate:visible":t[50]||(t[50]=e=>a.dialogVisibleSwap=e),swapInfo:a.swapInfo,slippage:"solana"===l.chain?a.solanaSlippage:"ton"===l.chain||"sui"===l.chain?a.tonSlippage:l.slippage,onSubmit:l.submitSwap,loading:a.loadingConfirmSwap,chain:e.$store.getters.netId||(null===(Bt=e.$f.getAddressAndChainFromId(null===(Ct=e.$route.params)||void 0===Ct?void 0:Ct.id))||void 0===Bt?void 0:Bt.chain)||"",nativePrice:a.nativePrice,gasPrice:l.customGasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"]),Object(o["createVNode"])(ci,{visible:a.dialogVisibleLimit,"onUpdate:visible":t[51]||(t[51]=e=>a.dialogVisibleLimit=e),limitInfo:a.limitInfo,onSubmit:l.submitLimitOrder,loading:a.loadingConfirmLimit,chain:e.$store.getters.netId||(null===(Pt=e.$f.getAddressAndChainFromId(null===(Dt=e.$route.params)||void 0===Dt?void 0:Dt.id))||void 0===Pt?void 0:Pt.chain)||"",limitGasU:a.limitGasU},null,8,["visible","limitInfo","onSubmit","loading","chain","limitGasU"]),Object(o["createVNode"])(di,{show:a.dialogListRouterVisible,"onUpdate:show":t[52]||(t[52]=e=>a.dialogListRouterVisible=e),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("ul",tt,[Object(o["createElementVNode"])("li",it,[Object(o["createElementVNode"])("span",ot,Object(o["toDisplayString"])(e.$t("router")),1),Object(o["createElementVNode"])("span",nt,Object(o["toDisplayString"])(a.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(o["createElementVNode"])("span",st,Object(o["toDisplayString"])(e.$t("priceImpact")),1),at]),Object(o["withDirectives"])(Object(o["createVNode"])(si,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[o["vShow"],a.listRouter&&0===a.listRouter.length]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.listRouter,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:n,class:"token-item",onClick:Object(o["withModifiers"])(e=>l.getSelectedRouter(n),["stop"])},[Object(o["createElementVNode"])("div",rt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t.path,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:n},[t.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ct,Object(o["toDisplayString"])(t.symbol),1)):Object(o["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",dt,[Object(o["createVNode"])(Kt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":i("aeccf")},null,8,["src","error-icon"]),mt])):Object(o["createCommentVNode"])("",!0)],64))),128)),0===n?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ut,Object(o["toDisplayString"])(e.$t("best")),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",ht,Object(o["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(o["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[pt],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(o["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[bt],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),a.selectedRouterIndex===n?(Object(o["openBlock"])(),Object(o["createBlock"])(zt,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(zt,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,lt))),128))])]),_:1},8,["show","title"])],64)}i("14d9"),i("1e70"),i("79a4"),i("c1a1"),i("8b00"),i("a4e7"),i("1e5a"),i("72c3");const ft=e=>(Object(o["pushScopeId"])("data-v-b557f64c"),e=e(),Object(o["popScopeId"])(),e),gt={key:0,class:"gap"},kt=["onClick"],wt=ft(()=>Object(o["createElementVNode"])("div",{class:"bar"},null,-1)),Ot={class:"text"};function jt(e,t,i,n,s,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"percent-container",style:Object(o["normalizeStyle"])({"--percent-active-color":i.activeColor})},[Object(o["createElementVNode"])("div",{for:"percent-radio-0",class:Object(o["normalizeClass"])({active:0===s.activePercent})},null,2),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.percentList,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:t},[0!==t?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",gt)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])(["label",{active:e===s.activePercent}]),onClick:Object(o["withModifiers"])(t=>a.handleClick(e),["stop"])},[wt,Object(o["createElementVNode"])("div",Ot,Object(o["toDisplayString"])(e)+"%",1)],10,kt)],64))),128))],4)}var yt={name:"PercentStep",props:{activeColor:String},emits:["change"],data(){return{activePercent:0,percentList:[25,50,75,100]}},methods:{handleClick(e,t=!1){e===this.activePercent?(this.activePercent=0,this.$emit("change",0,t)):(this.activePercent=e,this.$emit("change",e,t))}}},St=(i("3731"),i("6b0d")),Tt=i.n(St);const _t=Tt()(yt,[["render",jt],["__scopeId","data-v-b557f64c"]]);var Nt=_t,$t=i("57c9"),Vt=i("9587");const xt=e=>(Object(o["pushScopeId"])("data-v-71d3100a"),e=e(),Object(o["popScopeId"])(),e),Et={class:"flex items-center"},At={class:"label mr-20"},It={key:0,class:"token-container"},Bt={class:"icon-token-container mr-5"},Ct=["src"],Pt={class:"mr-5"},Dt=xt(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),Lt={class:"flex items-center mt-10"},Ft={class:"label mr-20"},Mt={key:0,class:"token-container"},Ut={class:"icon-token-container mr-5"},Rt=["src"],Gt={class:"mr-5"},Qt={class:"flex items-center justify-between mt-10"},zt={class:"label mr-20"},qt=xt(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1));function Wt(e,t,i,n,s,a){var l,r,c,d,m;const u=Object(o["resolveComponent"])("van-image"),h=Object(o["resolveComponent"])("van-loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(o["withModifiers"])((...e)=>a.goLink&&a.goLink(...e),["stop"]))},[Object(o["createElementVNode"])("div",Et,[Object(o["createElementVNode"])("span",At,Object(o["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",It,[Object(o["createElementVNode"])("div",Bt,[Object(o["createVNode"])(u,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(l=i.item)&&void 0!==l&&l.from_token_logo_url?e.$f.formatIcon({logo_url:i.item.from_token_logo_url}):"/icon-default.png","error-icon":s.defaultIcon},null,8,["src","error-icon"]),Object(o["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${i.item.chain}.png`,alt:"",srcset:""},null,8,Ct)]),Object(o["createElementVNode"])("span",Pt,Object(o["toDisplayString"])(e.$f.formatNumber2(a.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(o["createCommentVNode"])("",!0),Dt]),Object(o["createElementVNode"])("div",Lt,[Object(o["createElementVNode"])("span",Ft,Object(o["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Mt,[Object(o["createElementVNode"])("div",Ut,[Object(o["createVNode"])(u,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(r=i.item)&&void 0!==r&&r.to_token_logo_url?e.$f.formatIcon({logo_url:i.item.to_token_logo_url}):"/icon-default.png","error-icon":s.defaultIcon},null,8,["src","error-icon"]),Object(o["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${i.item.chain}.png`,alt:"",srcset:""},null,8,Rt)]),Object(o["createElementVNode"])("span",Gt,Object(o["toDisplayString"])(e.$f.formatNumber2(a.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(c=i.item)||void 0===c?void 0:c.to_token_symbol)||""),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",Qt,[Object(o["createElementVNode"])("span",zt,Object(o["toDisplayString"])(e.$f.formatDate(i.item.created_at)),1),1===i.item.status||2===i.item.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(o["normalizeStyle"])({color:a.formatStatusColor(i.item.status)})},Object(o["toDisplayString"])(a.formatStatus(i.item.status)),5)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[qt,0===(null===(d=i.item)||void 0===d?void 0:d.status)||-1===(null===(m=i.item)||void 0===m?void 0:m.status)?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("pending")),1)]),_:1})):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:1,class:"status-txt",style:Object(o["normalizeStyle"])({color:a.formatStatusColor(i.item.status)})},Object(o["toDisplayString"])(a.formatStatus(i.item.status)),5))],64))])])}var Ht=i("fa7d"),Kt=i("aeccf"),Xt=i.n(Kt),Jt={name:"NoGasTxItem",props:{item:Object},emits:["refresh"],data(){return{defaultIcon:Xt.a,loading:!1}},methods:{formatUnits:Ht["d"].formatUnits,formatStatus(e){var t;let i={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),4:this.$t("notEnoughBalance"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),10:this.$t("fail1")+`(${this.$t("nonceError")})`,11:this.$t("fail1")+`(${this.$t("chainError")})`,12:this.$t("fail1")+`(${this.$t("signatureError")})`,13:this.$t("fail1")+`(${this.$t("approveGasPriceLow")})`,15:this.$t("fail1")+`(${this.$t("gasLimitHigh")})`,16:this.$t("fail1")+`(${this.$t("swapTokenRiskHigh")})`,"-1":""};return null!==(t=i[e])&&void 0!==t?t:e},formatStatusColor(e){return 1===e||10===e||11===e||12===e?"#999999":2===e?"#12B886":0===e?"#3F80F7":"#FF0000"},goLink(){let e=this.$f.formatExplorerUrl(this.item.chain,this.item.executed_tx_hash,"tx");e&&this.item.executed_tx_hash&&this.$f.openBrowser(e)}}};i("0af0");const Yt=Tt()(Jt,[["render",Wt],["__scopeId","data-v-71d3100a"]]);var Zt=Yt;const ei=e=>(Object(o["pushScopeId"])("data-v-575db0b8"),e=e(),Object(o["popScopeId"])(),e),ti={class:"select-box"},ii=["disabled"],oi={key:0,class:"token-container"},ni={key:1},si=ei(()=>Object(o["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)),ai={class:"rules-content"},li={class:"search-bar",action:"/"},ri={key:0,class:"pop-title"},ci={style:{background:"#fff"}},di=["onClick"],mi={class:"main"},ui={key:0,class:"risk-status high"},hi={key:0,class:"minor"},pi=ei(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),bi={class:"right-label"},vi=ei(()=>Object(o["createElementVNode"])("br",null,null,-1)),fi={key:0,class:"minor"};function gi(e,t,n,s,a,l){const r=Object(o["resolveComponent"])("van-image"),c=Object(o["resolveComponent"])("van-search"),d=Object(o["resolveComponent"])("van-empty"),m=Object(o["resolveComponent"])("van-icon"),u=Object(o["resolveComponent"])("DynamicScrollerItem"),h=Object(o["resolveComponent"])("DynamicScroller"),p=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ti,[Object(o["createElementVNode"])("button",{class:"select-container",disabled:n.disabled,type:"button",onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>a.show=!0,["stop"]))},[n.token.address||n.token.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",oi,[(Object(o["openBlock"])(),Object(o["createBlock"])(r,{key:n.token.logo_url||0,round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:n.token.logo_url?e.$f.formatIcon({logo_url:n.token.logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"])),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.replaceSymbol?n.replaceSymbol.replace("{s}",n.token.symbol||""):n.token.symbol||""),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ni,Object(o["toDisplayString"])(e.$t("pleaseSelectToken")),1)),si],8,ii),Object(o["createVNode"])(p,{show:a.show,"onUpdate:show":t[2]||(t[2]=e=>a.show=e),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",ai,[Object(o["createElementVNode"])("form",li,[Object(o["createVNode"])(c,{modelValue:a.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>a.keyword=e),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:l.onSearch,onCancel:l.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==a.keyword||n.isBalance?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ri,Object(o["toDisplayString"])(e.$t("popularTokens")),1)),Object(o["createElementVNode"])("ul",ci,[Object(o["withDirectives"])(Object(o["createVNode"])(d,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],a.searchTokens&&0===a.searchTokens.length&&!a.loading]]),Object(o["createVNode"])(h,{items:a.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(o["withCtx"])(({item:t,index:s,active:c})=>[Object(o["createVNode"])(u,{item:t,active:c,"data-index":s},{default:Object(o["withCtx"])(()=>{var s;return[Object(o["createElementVNode"])("li",{class:"token-item",onClick:Object(o["withModifiers"])(e=>l.handleSelectToken(t),["stop"])},[Object(o["createVNode"])(r,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:t.logo_url?e.$f.formatIcon({logo_url:t.logo_url}):a.errorIcon,"error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",mi,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(t.symbol),1),(t.risk_score>55||t.risk_level<0)&&1!==t.risk_level?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ui,Object(o["toDisplayString"])(e.$t("highRisk")),1)):Object(o["createCommentVNode"])("",!0)]),(null!==t&&void 0!==t&&null!==(s=t.tags)&&void 0!==s&&s.includes("tokens")||null===t||void 0===t||!t.tags)&&t.address!==a.nativeToken?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",hi,Object(o["toDisplayString"])(t.address.slice(0,6)+"..."+t.address.slice(-6)),1)):Object(o["createCommentVNode"])("",!0)]),pi,Object(o["createElementVNode"])("div",bi,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(t.value?e.$f.formatNumber2(t.value):""),1),vi,void 0!==t.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",fi,"$"+Object(o["toDisplayString"])(t.value?e.$f.formatNumber2(t.value*t.price):""),1)):Object(o["createCommentVNode"])("",!0)]),t.address===(n.token.address||n.token.token)?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,di)]}),_:2},1032,["item","active","data-index"])]),_:1},8,["items"])])])]),_:1},8,["show","title"])])}var ki=i("365c"),wi=i("c9d9");const Oi=i("aeccf");let ji=null;var yi={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:()=>({address:"",chain:"",symbol:"",isbaseToken:!1})},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},replaceSymbol:{type:String,default:""}},emits:["update:token"],data(){return{errorIcon:Oi,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:wi["k"]}},computed:{searchResultTokens(){var e;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter(e=>this.hasNative||e.address!==wi["k"])}},watch:{keyword(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show(e){var t,i;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(i=t.isRefreshEnable)||void 0===i||i.call(t,"bridge",!e)}},methods:{onSearch(e){console.log(e),ji&&(clearTimeout(ji),ji=null),this.search()},onCancel(){this.keyword="",this.show=!1},handleSelectToken(e){if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){let t={...e,address:e.address||e.token,isbaseToken:this.token.isbaseToken};this.$emit("update:token",t),Object.keys(t).forEach(e=>{this.token[e]=t[e]}),this.show=!1}},tokenSearch(){ji&&(clearTimeout(ji),ji=null),ji=setTimeout(()=>{this.search()},800)},search(){if(""!==this.keyword){let e=new RegExp(this.keyword,"i"),t=this.tokens.filter(t=>(e.test(t.address)||e.test(t.symbol)||e.test(t.name))&&(this.hasNative||t.address!==wi["k"]));this.loading=!0;let i=this.keyword;Object(ki["Db"])(this.keyword,this.chain).then(e=>{var o,n;if(i!==this.keyword)return;let s=null===(o=e.filter)||void 0===o||null===(o=o.call(e,e=>e.chain===this.chain&&!t.some(t=>t.token===e.token)))||void 0===o||null===(n=o.map)||void 0===n?void 0:n.call(o,e=>({...e,address:e.token,decimals:e.decimals||e.decimal}));this.searchTokens=[...t,...s]}).catch(e=>{console.log(e),this.searchTokens=[]}).finally(()=>{this.loading=!1})}else this.searchTokens=this.tokens.filter(e=>this.hasNative||e.address!==wi["k"])}}};i("1461");const Si=Tt()(yi,[["render",gi],["__scopeId","data-v-575db0b8"]]);var Ti=Si,_i=i("a2ef"),Ni=i("ce94");const $i={class:"chart-container"},Vi=["id"];function xi(e,t,i,n,s,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$i,[Object(o["createElementVNode"])("div",{id:s.chartId,style:Object(o["normalizeStyle"])({height:"1.45rem",width:"100%"})},null,12,Vi)])}var Ei=i("22b4"),Ai=i("1be7"),Ii=i("3620"),Bi=i("2da7"),Ci=i("4b2a"),Pi=i("5e81"),Di=i("e600"),Li=i("ee29"),Fi=i("c55a"),Mi=i("f95e"),Ui=i("ec26");Ei["a"]([Bi["a"],Ci["a"],Pi["a"],Di["a"],Ii["a"],Li["a"],Fi["a"],Mi["a"]]);var Ri={name:"PriceChart",props:{dataX:Array,dataY:Array},data(){return{chartId:"chart-"+Object(Ui["a"])(),myChart:null,loading:!1}},watch:{dataY(){this.init()}},mounted(){this.init()},methods:{init(e=this.dataX,t=this.dataY){let i=e.map(e=>this.$f.formatDate(e,"MM-DD HH:mm"));if(!document.getElementById(this.chartId))return;let o=Ai["b"](document.getElementById(this.chartId));o||(o=Ai["c"](document.getElementById(this.chartId)));var n={tooltip:{trigger:"axis",appendToBody:!0},grid:{left:"0",right:"0",top:"5%",bottom:"3%",containLabel:!0},xAxis:{data:i,axisLine:{show:!1,lineStyle:{color:"#23293C"}},axisLabel:{show:!1,color:"#777"},axisTick:{show:!1},nameTextStyle:{fontSize:12}},yAxis:{type:"value",name:"",nameTextStyle:{fontSize:14},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1,lineStyle:{type:"solid",color:["#FF646D"]}}},series:[{name:"",type:"line",data:t,smooth:!0,symbolSize:3,areaStyle:{color:"#558BED",opacity:.2},itemStyle:{color:"#558BED",lineStyle:{color:"#558BED"}},tooltip:{valueFormatter:e=>this.$f.formatNumberCurrencyUnit(e||0,3,4)}}]};o.setOption(n)}}};i("fcef");const Gi=Tt()(Ri,[["render",xi],["__scopeId","data-v-08c733db"]]);var Qi=Gi,zi=i("449c"),qi=i("fadf");const Wi=e=>(Object(o["pushScopeId"])("data-v-74cf5e58"),e=e(),Object(o["popScopeId"])(),e),Hi={class:"select-box"},Ki={class:"flex items-center"},Xi={style:{background:"#fff",padding:"0.2rem 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},Ji={class:"setting-title"},Yi={class:"card-container"},Zi={class:"font-500"},eo={class:"color-999 ml-5"},to=Wi(()=>Object(o["createElementVNode"])("div",{class:"setting-title"},"Gas Price(GWEI)",-1)),io={class:"slippage-setting"},oo=["onClick"],no={class:"color-999"},so={class:"mt-5 font-500"};function ao(e,t,i,n,s,a){const l=Object(o["resolveComponent"])("van-field"),r=Object(o["resolveComponent"])("van-button"),c=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Hi,[Object(o["createElementVNode"])("div",Ki,[Object(o["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>s.show=!0,["stop"]))})]),Object(o["createVNode"])(c,{show:s.show,"onUpdate:show":t[2]||(t[2]=e=>s.show=e),title:e.$t("gasSetting"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",Xi,[Object(o["createElementVNode"])("div",Ji,Object(o["toDisplayString"])(e.$t("gasFee"))+"(BNB)",1),Object(o["createElementVNode"])("div",Yi,[Object(o["createElementVNode"])("span",Zi,Object(o["toDisplayString"])(a.estimatedB),1),Object(o["createElementVNode"])("span",eo,"≈"+Object(o["toDisplayString"])(a.estimatedU),1)]),to,Object(o["createElementVNode"])("div",io,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(a.gasPriceList,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:t,type:"button",class:Object(o["normalizeClass"])({active:s.gasPriceValue===e.value}),onClick:t=>s.gasPriceValue=e.value},[Object(o["createElementVNode"])("span",no,Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("span",so,Object(o["toDisplayString"])(e.value),1)],10,oo))),128)),Object(o["createVNode"])(l,{class:"input",type:"number",min:a.standardGasPriceD,placeholder:e.$t("custom"),modelValue:s.gasPriceValue,"onUpdate:modelValue":t[1]||(t[1]=e=>s.gasPriceValue=e),onBlur:a.handleBlur,clearable:""},null,8,["min","placeholder","modelValue","onBlur"])]),Object(o["createVNode"])(r,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(o["normalizeStyle"])({marginTop:"1.5rem"}),onClick:Object(o["withModifiers"])(a.submitSwapGasSet,["stop"])},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["style","onClick"])])]),_:1},8,["show","title"])])}var lo=i("901e"),ro=i.n(lo),co=i("2c28"),mo={name:"SwapGasSet",props:{standardGasPrice:{type:[Number,String],default:"100000000"},gas:{type:[Number,String],default:wi["d"]},nativePrice:[Number,String]},emits:["updateGasPrice"],setup(){let e=Object(co["useStorage"])("gasSettingv1",{},localStorage);return{gasSetting:e}},data(){let e=this.$store.getters.netId,t=this.standardGasPrice;if(e){var i;let o=null===(i=this.gasSetting)||void 0===i?void 0:i[e];t=(null===o||void 0===o?void 0:o.customGasPrice)||("bsc"===e?wi["c"]:this.standardGasPrice)}return{show:!1,gasPriceValue:new ro.a(t||this.standardGasPrice).div(10**9).toFixed()}},computed:{standardGasPriceD(){return new ro.a(this.standardGasPrice).div(10**9).toFixed(0)},gasPriceList(){let e=new ro.a(this.standardGasPrice).div(10**9),t=new ro.a(1.25),i=new ro.a(6).div(3);return[{name:this.$t("standard"),value:this.$f.formatNumber2(e.toFixed(),3)},{name:this.$t("fast1"),value:this.$f.formatNumber2(t.times(e).toFixed(),3)},{name:this.$t("instant"),value:this.$f.formatNumber2(i.times(e).toFixed(),3)}]},estimatedB(){let e=this.gas;return e?this.$f.formatNumber2(new ro.a(e.toString()).times(this.gasPriceValue).div(String(10**9)).toFixed()||"0",2):"0"},estimatedU(){let e=this.gas;if(!e)return"0";let t=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new ro.a(e.toString()).times(t).times(this.gasPriceValue).div(String(10**9)).toFixed()||"0",2)}},watch:{show(e){if(e){let e=this.$store.getters.netId,i=this.standardGasPrice;if(e){var t;let o=null===(t=this.gasSetting)||void 0===t?void 0:t[e];i=(null===o||void 0===o?void 0:o.customGasPrice)||("bsc"===e?wi["c"]:this.standardGasPrice)}this.gasPriceValue=new ro.a(i).div(10**9).toFixed()||this.standardGasPrice}}},methods:{handleBlur(){let e=new ro.a(this.standardGasPrice).div(10**9);this.show&&e.gt(this.gasPriceValue)&&(this.gasPriceValue=e.toFixed(0))},submitSwapGasSet(){let e=new ro.a(this.gasPriceValue||"0").times(10**9).toFixed(0),t=this.$store.getters.netId;if(t){let i=this.gasSetting[t];this.gasSetting={...this.gasSetting,[t]:{...i,customGasPrice:e}},this.$emit("updateGasPrice",this.gasSetting)}this.show=!1}}};i("48c8");const uo=Tt()(mo,[["render",ao],["__scopeId","data-v-74cf5e58"]]);var ho=uo;const po=e=>(Object(o["pushScopeId"])("data-v-225cd86e"),e=e(),Object(o["popScopeId"])(),e),bo=po(()=>Object(o["createElementVNode"])("i",{class:"select-token iconfont icon-collapse-down"},null,-1));function vo(e,t,i,n,s,a){const l=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("button",{class:"select-container clickable",type:"button",onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>s.dialogVisible=!0,["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.expiredTimeName),1),bo]),Object(o["createVNode"])(l,{show:s.dialogVisible,"onUpdate:show":t[1]||(t[1]=e=>s.dialogVisible=e),title:e.$t("limitExpiredTime"),actions:a.actions,onSelect:a.onSelect,style:{"--van-popup-background-color":"#fff","--van-action-sheet-item-background":"#fff"},"cancel-text":e.$t("cancel")},null,8,["show","title","actions","onSelect","cancel-text"])])}var fo={name:"SolanaLimitExpired",props:{expiredTime:Number},emits:["update:visible","update:expiredTime"],data(){return{dialogVisible:!1}},computed:{actions(){let e=[{name:this.$t("never"),value:null},{name:this.$t("10min"),value:600},{name:this.$t("1h"),value:3600},{name:this.$t("1d"),value:86400},{name:this.$t("3d"),value:259200},{name:this.$t("7d"),value:604800}];return e.map(e=>e.value===this.expiredTime?{...e,color:"#3F80F7 "}:e)},expiredTimeName(){var e;return null===(e=this.actions.find(e=>e.value===this.expiredTime))||void 0===e?void 0:e.name}},methods:{onSelect(e){this.$emit("update:expiredTime",e.value),this.dialogVisible=!1}}};i("1675");const go=Tt()(fo,[["render",vo],["__scopeId","data-v-225cd86e"]]);var ko=go,wo=i("3edc"),Oo=i("940b"),jo=i("80a9"),yo=i("4360");function So(){var e;let t=Object(jo["a"])().get(),i=null===t||void 0===t||null===(e=t.every)||void 0===e?void 0:e.call(t,e=>{var t,i;return null===e||void 0===e||null===(t=e.chains)||void 0===t||null===(i=t.includes)||void 0===i?void 0:i.call(t,"sui:mainnet")});return!!((null===t||void 0===t?void 0:t.length)>0&&i)}async function To(){return Object(jo["a"])().get()[0].features["standard:connect"].connect().then(async e=>{var t;console.log("connectSui",e),yo["a"].state.suiWalletAccount=null===e||void 0===e?void 0:e.accounts[0];let i=null===e||void 0===e||null===(t=e.accounts[0])||void 0===t?void 0:t.address;return yo["a"].commit("setAccounts",[i]),yo["a"].commit("setProvider",Object(jo["a"])().get()[0]),yo["a"].commit("setChainId","sui"),yo["a"].commit("setWallet","suiWallet"),yo["a"].commit("setCurrentAccount",i),i})}async function _o(e){return Object(jo["a"])().get()[0].features["sui:signAndExecuteTransactionBlock"].signAndExecuteTransactionBlock({transactionBlock:e,chain:"sui:mainnet",account:yo["a"].state.suiWalletAccount}).then(async e=>({...e,wait:()=>Object(ki["Jb"])(e.digest)}))}var No=i("f465"),$o=i("335a"),Vo=i("847c"),xo=i("8e2e"),Eo=i("ddd2"),Ao=i("20c2");const Io=i("ddc3");let Bo=null,Co=null,Po=null,Do=null,Lo=null,Fo=null,Mo=null,Uo=null;wo["a"].props.components.default=()=>({OpenIndicator:{render:()=>Object(o["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}});const Ro="2",Go=["limit","limit","swap","noGas"];var Qo={name:"Swap",components:{PercentStep:Nt,TxItem:$t["a"],SwapSelectToken:Ti,ConfirmSwap:_i["a"],PriceChart:Qi,SlippageButton:zi["a"],ConfirmLimit:Ni["a"],LimitTxItem:Vt["a"],vSelect:wo["a"],SwapModeSet:qi["a"],NoGasTxItem:Zt,SwapGasSet:ho,SolanaLimitExpired:ko},setup(){var e,t,i,o,n,s;let a=Object(co["useStorage"])("solanaTxs",[]),l=Object(xo["a"])("solanaTxs1",a.value.slice()),r=Object(xo["a"])("ERC314SwapTxs",[]);l.value=null===(e=l.value)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5);let c=Object(xo["a"])("tonTxs",[]);c.value=null===(i=c.value)||void 0===i||null===(o=i.filter)||void 0===o?void 0:o.call(i,e=>1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5);let d=Object(xo["a"])("suiTxs",[]);return d.value=null===(n=d.value)||void 0===n||null===(s=n.filter)||void 0===s?void 0:s.call(n,e=>1===(null===e||void 0===e?void 0:e.is_merged)||1!==e.is_merged&&1e3*(null===e||void 0===e?void 0:e.time)<=Date.now()-864e5),{solanaTxs:l,ERC314SwapTxs:r,tonTxs:c,suiTxs:d}},data(){var e,t,i,o,n,s;let[a,l]=this.$f.getAddressAndChainFromId(null===(e=this.$route.params)||void 0===e?void 0:e.id,1),r=!localStorage.autoSlippage||JSON.parse(localStorage.autoSlippage),c=localStorage.swapSlippage||"auto",d=this.$route.params.type?Number(this.$route.params.type):2;return 3!==d||null!==(t=window)&&void 0!==t&&null!==(t=t._tw_)&&void 0!==t&&t.appExchangeNoGas&&"bsc"===l||(d=2),{LimitExpiredDays:wi["f"],nativeToken:wi["k"],height:100,swapTokenInfo:{},tokens:[],token1:{address:a||"",chain:l||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:d,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,loadingSwap:!1,dialogVisibleSwap:!1,swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},loadingConfirmSwap:!1,tokensPrice:{},swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(i=window)||void 0===i||null===(i=i._tw_)||void 0===i||!i.appGetPlatform),gasPrice:"0",spender:"",isTaxHigh:!1,isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(o=window)||void 0===o||null===(o=o._tw_)||void 0===o?void 0:o.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:a||"",chain:l||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:a||"",chain:l||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,tabActive1:null!==(n=Go[d])&&void 0!==n?n:"limit",limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:a||"",chain:l||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,autoSlippage:r,slippageInfo:{slippage:Ro,autoSlippage:!0},limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"5",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:"",limitGasU:"0",autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:Ro,customSlippage:c,hasMEVBot:!1,isHotToken:!1,noGasSlippage:localStorage.noGasSlippage||"5",noGasTxList:[],loadingGetNoGasList:!1,isHasUnTx:!1,isSupportNoGas:null===(s=window)||void 0===s||null===(s=s._tw_)||void 0===s?void 0:s.appExchangeNoGas,gasBalance:0,isNoGas:!1,gasPriceKey:0,gasSetting:$o["a"].get("gasSetting",{}),solanaQuoteResponse:{},swapTokenPrice:[0,0],quoteSolanaPreParams:{},solanaSwapBaseTokenPrice:0,solanaSlippage:localStorage.solanaSlippage||"2",loadingUnwrap:!1,solanaPriceChg:{solanaAutoSlippage:new ro.a(9),k0_price_chg:new ro.a(0),k1_price_chg:new ro.a(0)},getKlineTime:0,priceImpactSolana:0,limitSolanaPrice:0,solanaLimitExpiredTime:null,limitSolanaError:"",getSolanaLimitOrderTime:0,limitSolanaPriceU:0,isERC314:!1,isPump:!1,isDyorswapfun:!1,isXflapswap:!1,tonSlippage:localStorage.tonSlippage||"2",tonQuoteResponse:{},priceImpactTon:0,tonSwapTokenPrice:[0,0],tonSwapBaseTokenPrice:0,solanaProtection:!!localStorage.solanaProtection&&JSON.parse(localStorage.solanaProtection||"false"),isMoonshot:!1,isFourMeme:!1,isFlap:!1,amm:"",isSunPump:0,suiQuoteResponse:{},priceImpactSui:0}},computed:{swapMode(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},slippage(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},typeTabs(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},types(){var e,t,i;if(this.isERC314||this.isPump||this.isMoonshot||this.isFourMeme||this.isFlap||this.isSunPump>0||this.isDyorswapfun||this.isXflapswap)return[{name:this.$t("swapT"),value:2}];let o=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",n="solana"===o?[]:[{name:this.$t("stopLimit"),value:1}];return[...null!==(i=window)&&void 0!==i&&null!==(i=i._tw_)&&void 0!==i&&i.appExchangeNoGas&&"eth"!==this.$store.getters.netId&&this.isNoGas?[{name:this.$t("noGasSwapT"),value:3}]:[{name:this.$t("swapT"),value:2}],{name:this.$t("limitT"),value:0},...n]},typeName(){var e,t;return null===(e=this.types)||void 0===e||null===(t=e.find)||void 0===t||null===(t=t.call(e,e=>e.value===this.selected))||void 0===t?void 0:t.name},netId(){return this.$store.getters.netId||""},chain(){var e,t,i,o,n;let s=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";return"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(i=window)&&void 0!==i&&null!==(i=i.trustwallet)&&void 0!==i&&i.solana&&(null===(o=window.ethereum)||void 0===o||null===(o=o.address)||void 0===o||null===(n=o.startsWith)||void 0===n||!n.call(o,"0x"))&&window.ethereum.address)&&(s="solana"),s},tokenInfo(){var e,t;if("Swap"!==this.$route.name)return{id:"",token:"",chain:""};let[i,o]=this.$f.getAddressAndChainFromId(null===(e=this.$route.params)||void 0===e?void 0:e.id,1);return{id:null===(t=this.$route.params)||void 0===t?void 0:t.id,token:i,chain:o}},tabs(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isApprove(){var e;let t=["solana","ton","sui"];if(t.includes(this.chain))return!0;if(this.isERC314)return!0;if((null===(e=this.fromToken)||void 0===e?void 0:e.address)===wi["k"])return!0;if(!this.allowance)return!1;let i=this.fromToken.decimals||0;return console.log(this.fromAmount,this.allowance,Ht["d"].parseUnits(new ro.a(this.fromAmount||0).toFixed(i),i).lte(this.allowance)),Ht["d"].parseUnits(new ro.a(this.fromAmount||0).toFixed(i),i).lte(this.allowance)},isLimitApprove(){let e=["solana","ton","sui"];if(e.includes(this.chain))return!0;if(!this.limitAllowance)return!1;let t=0===this.activeTab?this.limitToken2:this.limitToken1,i=t.decimals||0,o=0===this.activeTab?this.limitAmount2:this.limitAmount1;return Ht["d"].parseUnits(new ro.a(o||0).toFixed(i),i).lte(this.limitAllowance)},minReceived(){var e;let t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},i=t[t.length-1];return new ro.a(null===i||void 0===i?void 0:i.amount).times(100-Number(this.slippage)).div(10**(((null===i||void 0===i?void 0:i.decimals)||0)+2)).toFixed((null===i||void 0===i?void 0:i.decimals)||0)},maxSold(){var e;let t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},i=t[0];return new ro.a(null===i||void 0===i?void 0:i.amount).times(1+Number(this.slippage)/100).div(10**((null===i||void 0===i?void 0:i.decimals)||0)).toFixed((null===i||void 0===i?void 0:i.decimals)||0)},txs(){var e,t;let i=this.ERC314SwapTxs.filter(e=>{var t;return!(null!==(t=this.initTxs)&&void 0!==t&&t.some(t=>t.id===e.id))&&e.chain===this.$store.getters.netId&&e.wallet_address===this.$store.state.currentAccount}),o=[...i,...this.initTxs].sort((e,t)=>Number(t.time)-Number(e.time)),n="solana"===this.chain?null===(e=this.solanaTxs)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>e.wallet_address===this.$store.state.currentAccount||!e.wallet_address):o;var s,a,l,r;"ton"===this.chain&&(n=null===(s=this.tonTxs)||void 0===s||null===(a=s.filter)||void 0===a?void 0:a.call(s,e=>e.wallet_address===this.$store.state.currentAccount||!e.wallet_address));"sui"===this.chain&&(n=null===(l=this.suiTxs)||void 0===l||null===(r=l.filter)||void 0===r?void 0:r.call(l,e=>e.wallet_address===this.$store.state.currentAccount||!e.wallet_address));if(this.isCurrentToken){var c,d;let[e,t]=this.$f.getAddressAndChainFromId(null===(c=this.$route.params)||void 0===c?void 0:c.id,1),i=$o["a"].get("chainConfig",wi["l"])||{},o=null===i||void 0===i?void 0:i[t],s=null===o||void 0===o?void 0:o.wmainWrapper;return e=e===wi["k"]?s:e,null===(d=n)||void 0===d?void 0:d.filter(t=>t.from_address===e||t.to_address===e||(e===wi["k"]||e===s)&&(t.from_address===wi["k"]||t.from_address===s||t.to_address===wi["k"]||t.to_address===s))}return n},filterLimitOrders(){if(this.isCurrentToken){var e;let i=this.limitToken1.address;if("solana"===this.chain){var t;let e=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"];return null===(t=this.limitOrders)||void 0===t?void 0:t.filter(t=>{let o=e.indexOf(t.from_token),n=e.indexOf(t.to_token);return o<=n?t.from_token===i:t.to_token===i})}return null===(e=this.limitOrders)||void 0===e?void 0:e.filter(e=>e.target_token===i)}return this.limitOrders},filterNoGasTxList(){if(this.isCurrentToken){var e;let t=this.limitToken1.address;return null===(e=this.noGasTxList)||void 0===e?void 0:e.filter(e=>e.from_token===t||e.to_token===t)}return this.noGasTxList},taxStr(){var e,t,i,o,n;let s=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_buy_tax)||0);return s>0?`(${this.$t("tax")}: ${this.$f.formatNumber2(s,1)}%)`:0===this.activeTab&&(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)>0?`(${this.$t("tax")}: ${this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1)}%)`:1===this.activeTab&&(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.sell_tax)>0?`(${this.$t("tax")}: ${this.$f.formatNumber2(null===(l=this.baseTokenExtra)||void 0===l?void 0:l.sell_tax,1)}%)`:"";var a,l},priceImpactV(){var e,t,i,o,n;if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";if(this.isERC314)return"";let s=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";if("evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(i=window)&&void 0!==i&&null!==(i=i.trustwallet)&&void 0!==i&&i.solana&&(null===(o=window.ethereum)||void 0===o||null===(o=o.address)||void 0===o||null===(n=o.startsWith)||void 0===n||!n.call(o,"0x"))&&window.ethereum.address)&&(s="solana"),"solana"===s)return new ro.a(this.priceImpactSolana||0);if("ton"===s)return new ro.a(this.priceImpactTon||0);if("sui"===s)return new ro.a(this.priceImpactSui||0);let a=this.swapQuoteInfo.routerPath,l=(null===a||void 0===a?void 0:a.length)>0?null===a||void 0===a?void 0:a[0]:this.swapQuoteInfo.fromToken||null,r=(null===a||void 0===a?void 0:a.length)>0?null===a||void 0===a?void 0:a[a.length-1]:this.swapQuoteInfo.toToken||null;if(l&&r){let e=this.swapQuoteInfo.from_price,t=this.swapQuoteInfo.to_price,i=Ht["d"].formatUnits(l.amount,l.decimals),o=Ht["d"].formatUnits(r.amount,r.decimals);return new ro.a(i).times(e).div(new ro.a(o).times(t)).minus(1).abs()}return""},priceImpact(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor(){var e,t,i,o;return this.$store.state.currentAccount?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(o=i.gt)&&void 0!==o&&o.call(i,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor(){return this.$store.state.currentAccount?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor(){var e,t,i,o,n,s;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(o=i.gt)&&void 0!==o&&o.call(i,.1)?"#F7933F":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(s=n.gt)&&void 0!==s&&s.call(n,.05)?"#f8be46":""},swapTokens(){var e;let t=[...null===(e=this.userBalanceTokens.slice())||void 0===e?void 0:e.filter(e=>!e.isWrapped)];return this.tokens.slice().forEach(e=>{let i=t.find(t=>t.id===e.id);i?i.logo_url=i.logo_url||e.logo_url:t.push(e)}),t.length>0?t:this.tokens.slice()},isShow(){var e,t;let i=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",o=$o["a"].get("chainConfig",wi["l"])||{};var n,s,a;return!(!o||!i)&&(null!==(n=null===(s=o[i])||void 0===s||null===(s=s.swaps)||void 0===s||null===(a=s.some)||void 0===a?void 0:a.call(s,e=>e.router_address))&&void 0!==n&&n)},fromToken(){return 1===this.activeTab?this.token1:this.token2},toToken(){return 1===this.activeTab?this.token2:this.token1},disabled1(){var e;if(!Number(this.limitPrice))return!0;let t=null===(e=this.baseToken)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd;return 1===this.activeTab&&this.limitPrice<t},disabled2(){var e;if(!Number(this.limitPrice))return!0;let t=null===(e=this.baseToken)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd;return 0===this.activeTab&&this.limitPrice>t},estimatedFee(){var e,t;let i=null!==(e=this.swapInfo.gasValue)&&void 0!==e?e:wi["d"];if(!i)return"0";let o=this.$store.getters.netId,n=o?{...(null===(t=this.gasSetting)||void 0===t?void 0:t[o])||{}}:{},s=(null===n||void 0===n?void 0:n.customGasPrice)||this.gasPrice||wi["c"],a="bsc"===o?s:this.gasPrice,l=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new ro.a(i.toString()).times(l).times(a).div(String(10**18)).toFixed()||"0",2)},customGasPrice(){var e;let t=this.$store.getters.netId,i=(null===(e=this.gasSetting)||void 0===e||null===(e=e[t])||void 0===e?void 0:e.customGasPrice)||this.gasPrice||wi["c"],o="bsc"===t?i:this.gasPrice;return o},wSOLAccount(){var e;if(!this.$store.state.currentAccount||"solana"!==this.chain)return null;let t=null===(e=this.userBalanceTokens)||void 0===e?void 0:e.find(e=>e.isWrapped);return t},wSOLBalance(){var e;if(!this.$store.state.currentAccount||"solana"!==this.chain)return"0";let t=null===(e=this.userBalanceTokens)||void 0===e||null===(e=e.find(e=>e.isWrapped))||void 0===e?void 0:e.balance;return t||"0"},isPumpCanSwap(){let e=(this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address&&"solana"===this.token2.chain,t=(this.isFourMeme||this.isFlap)&&this.token2.address!==wi["k"]&&"bsc"===this.token2.chain,i=this.isSunPump>0&&this.token2.address!==wi["k"];return!e&&!t&&!i},isOnlyGetAmountsOut(){var e,t,i,o,n;let s=["viridian","aerodrome","flapswap"],a=(null===(e=this.baseToken)||void 0===e||null===(e=e.pairs)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.amm)&&(null===(t=["fourmeme","fourmemev2"])||void 0===t?void 0:t.includes(null===(i=this.baseToken)||void 0===i||null===(i=i.pairs)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.amm)),l=(null===(o=this.baseToken)||void 0===o||null===(o=o.pairs)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.amm)&&s.includes(null===(n=this.baseToken)||void 0===n||null===(n=n.pairs)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.amm);return"ton"===this.chain||"sui"===this.chain||l||a||this.isDyorswapfun||this.isXflapswap},isInsufficientTon(){if("ton"===this.chain){var e,t,i;let o=(null===(e=this.tonQuoteResponse)||void 0===e?void 0:e.totalTransferAmount)||0,n=(null===(t=this.userBalanceTokens)||void 0===t||null===(i=t.find)||void 0===i||null===(i=i.call(t,e=>e.address===wi["k"]))||void 0===i?void 0:i.initBalance)||0;if(o&&new ro.a(o).gt(n))return!0}return!1}},watch:{"$route.params.id"(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=Ro,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount"(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=Ro,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore(){this.getLeftHeight()},"$store.state.ws.tx"(e){this.tx=e,Do||(Do=setTimeout(()=>{var e;let t=this.tx,i=this.baseToken.token.chain||"",o=$o["a"].get("chainConfig",wi["l"])||{},n=null===o||void 0===o?void 0:o[i],s=null===n||void 0===n?void 0:n.wmainWrapper,a=null===(e=this.baseToken)||void 0===e?void 0:e.token.token;a===wi["k"]&&i&&s&&(a=s);let l=this.baseToken.token.price_change,r=100*Number(this.baseToken.token.current_price_usd)/(100+Number(l));t.from_address===a?(this.baseToken.token.current_price_usd=t.from_price_usd,this.baseToken.token.price_change=100*(t.from_price_usd-r)/r):t.to_address===a&&(this.baseToken.token.current_price_usd=t.to_price_usd,this.baseToken.token.price_change=100*(t.to_price_usd-r)/r),this.baseToken.pairs.forEach(e=>{e.pair===t.pair&&(t.from_address===e.token0_address&&(e.token0_price_usd=t.from_price_usd),t.to_address===e.token0_address&&(e.token0_price_usd=t.to_price_usd),t.from_address===e.token1_address&&(e.token1_price_usd=t.from_price_usd),t.to_address===e.token1_address&&(e.token1_price_usd=t.to_price_usd))}),t.from_address===this.limitToken1.address?this.limitToken1.price=t.from_price_usd:t.to_address===this.limitToken1.address&&(this.limitToken1.price=t.to_price_usd),t.to_address===this.limitToken2.address?this.limitToken2.price=t.to_price_usd:t.from_address===this.limitToken2.address&&(this.limitToken2.price=t.from_price_usd),this.updateKline(t);let c=this.baseToken.pairs.findIndex(e=>e.pair===t.pair_address);if(c>-1){let e=this.baseToken.pairs[c];t.from_address===e.token0_address?(t.from_reserve&&(this.baseToken.pairs[c].reserve0=t.from_reserve,this.baseToken.pairs[c].token0_price_usd=t.from_price_usd),t.to_reserve&&(this.baseToken.pairs[c].reserve1=t.to_reserve,this.baseToken.pairs[c].token1_price_usd=t.to_price_usd)):(t.to_reserve&&(this.baseToken.pairs[c].reserve0=t.to_reserve,this.baseToken.pairs[c].token0_price_usd=t.to_price_usd),t.from_reserve&&(this.baseToken.pairs[c].reserve1=t.from_reserve,this.baseToken.pairs[c].token1_price_usd=t.from_price_usd))}Do=null},1e3))},types(e){let t=(e||[]).some(e=>e.value===this.selected);var i;t||(this.selected=(null===e||void 0===e||null===(i=e[0])||void 0===i?void 0:i.value)||2)},selected(e){var t,i;(this.$router.replace({name:"Swap",params:{...this.$route.params,type:e}}),2===this.selected)?(null===(t=this.$refs)||void 0===t||null===(t=t.percentStep)||void 0===t||null===(i=t.handleClick)||void 0===i||i.call(t,0),this.fromAmount="",this.toAmount="",this.getAllowance(),this.tabActive1="swap"):0===this.selected||1===this.selected?(this.supportChainLimit(),this.getLimitAllowance(),"solana"!==this.chain?(this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.triggerPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):""):this.limitSolanaPriceU=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.tabActive1="limit",this.quoteLimitSolana()):3===this.selected&&(this.supportChainLimit(),this.getLimitAllowance(),this.tabActive1="noGas")},tabActive1(e){"swap"===e?this.getUserAllTxs():"limit"===e?this.getLimitOrder():"noGas"===e&&this.getNoGasList()}},mounted(){var e,t,i,o,n;if(this.getFeeInfo(),So())To().then(e=>{console.log("connectSui",e),this.initActivated()});else if(window.ton)Object(Ao["a"])().then(e=>{console.log(e),this.initActivated()});else if("evm"!==localStorage.okxwallet_chain&&(null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window)&&void 0!==t&&null!==(t=t.trustwallet)&&void 0!==t&&t.solana&&(null===(i=window.ethereum)||void 0===i||null===(i=i.address)||void 0===i||null===(o=i.startsWith)||void 0===o||!o.call(i,"0x"))&&window.ethereum.address))Object(Vo["d"])().then(()=>{this.initActivated()});else if(!window.ethereum&&null!==(n=window)&&void 0!==n&&n.tronLink)Object(Oo["a"])().then(e=>{console.log("connectTron",e),this.initActivated()});else try{window.ethereum?Object(Eo["a"])().then(()=>{this.initActivated()}):this.initActivated()}catch(s){console.log(s)}},activated(){},methods:{init(){this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance(),this.getLimitOrder(),this.getNoGasList()},initActivated(){var e,t,i,o,n,s;this.$f.setSwapSendType(""),this.handleWalletAddress(!1),this.selected=this.$route.params.type?Number(this.$route.params.type):2,3!==this.selected||null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appExchangeNoGas&&"eth"!==this.$store.getters.netId||(this.selected=2),this.tabActive1=null!==(t=Go[this.selected])&&void 0!==t?t:"swap";let a=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",l=null===(i=this.$f.getAddressAndChainFromId(null===(o=this.$route.params)||void 0===o?void 0:o.id))||void 0===i?void 0:i.address,r=this.$store.getters.netId||(null===(n=this.$f.getAddressAndChainFromId(null===(s=this.$route.params)||void 0===s?void 0:s.id))||void 0===n?void 0:n.chain)||"";l&&(l!==this.token1.address||a&&a.address!==l)?(this.token1={address:l||"",chain:r||"",balance:0,symbol:""},this.limitToken1={...this.token1}):l||!a||r!==a.chain||this.token1.address||(this.limitToken1={...this.swap_token1});let c=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";c&&r===c.chain&&!this.token2.address&&(this.token2={...c},this.limitToken2={...c}),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),"swap"===this.tabActive1?this.getUserAllTxs():"limit"===this.tabActive1?this.getLimitOrder():"noGas"===this.tabActive1&&this.getNoGasList(),this.getLimitAllowance(),this.getNativeTokenPrice(),this.getGasPrice(),this.$store.dispatch("getTronAccountResource")},formatUnits:Ht["d"].formatUnits,formatPrice(e){return this.$f.formatNumber(e&&""!==e&&this.$store.state.tokensPrice[e]||0)},getPrice(e,t,i=0){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new ro.a(t).times(100-i).div(100*e).toFixed(7))||"0"},getFeeInfo(){Object(ki["F"])().then(e=>{let t=this.$store.getters.netId;this.$store.state.feeInfo=this.$f.formatFee(e,t)})},watchFromAmount(){if(this.quoteLoading&&!this.isAmount)return;let e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())},watchToAmount(){if(this.quoteLoading&&this.isAmount)return;let e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))},handleFromAmountMax(e=1){let t=this.fromToken.balance||0;if(e){var i;let o=this.fromToken.decimals||0;if((null===(i=this.fromToken)||void 0===i?void 0:i.address)===wi["k"]){let i=this.fromToken.chain,n=wi["j"][i]||.01;t=new ro.a(t).minus(n).times(e).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`))[0]}else t=new ro.a(t).times(e).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`))[0];0===Number(t)&&(t="")}this.fromAmount=t<0?0:t,this.watchFromAmount()},handlePercentChange(e,t){if(t)return;let i=e/100,o=this.fromToken.balance||0;if(i){var n,s;let e=this.fromToken.decimals||0;if((null===(n=this.fromToken)||void 0===n?void 0:n.address)===wi["k"]||"So11111111111111111111111111111111111111112"===(null===(s=this.fromToken)||void 0===s?void 0:s.address)){let t=this.fromToken.chain,n=wi["j"][t]||.01;if(new ro.a(o).lt(n))return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("balanceNotEnough",{n:n,s:this.fromToken.symbol}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});o=new ro.a(o).minus(n).times(i).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))[0]}else o=new ro.a(o).times(i).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))[0];0===Number(o)&&(o="")}else o="";this.fromAmount!==o&&(this.fromAmount=o<0?0:o,this.watchFromAmount())},handleToAmountMax(){this.toAmount=this.toToken.balance||0,this.watchToAmount()},switchTab(e){this.activeTab=e,2===this.selected?(this.$refs.percentStep.handleClick(0),this.fromAmount="",this.toAmount="",this.getAllowance()):0!==this.selected&&1!==this.selected&&3!==this.selected||(this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance())},handlePercentChange1(e,t){if(t)return;let i=e/100,o=0===this.activeTab?this.limitToken2:this.limitToken1,n=o.balance||0;if(i){let e=o.decimals||18;if((null===o||void 0===o?void 0:o.address)===wi["k"]||"So11111111111111111111111111111111111111112"===(null===o||void 0===o?void 0:o.address)){let t=o.chain,s=wi["j"][t]||.01;n=new ro.a(n).minus(s).times(i).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))[0]}else n=new ro.a(n).times(i).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${e}})?`))[0];0===Number(n)&&(n="")}else n="";0===this.activeTab?this.limitAmount2!==n&&(this.limitAmount2=n<0?0:n,this.watchLimitAmount2()):this.limitAmount1!==n&&(this.limitAmount1=n<0?0:n,this.watchLimitAmount1())},watchLimitAmount1(){this.limitQuoteLoading||(Lo&&(clearTimeout(Lo),Lo=null),Lo=setTimeout(()=>{let e=this.limitAmount1,t=Number(e);""===e||"."===e?(this.limitAmount1="",this.limitAmount2=""):0===t&&0!==Number(this.limitAmount2)?this.limitAmount2=0:t&&(this.limitAmount2="",this.watchLimitPrice())},500))},watchLimitAmount2(){this.limitQuoteLoading||(Fo&&(clearTimeout(Fo),Fo=null),Fo=setTimeout(()=>{let e=this.limitAmount2,t=Number(e);""===e||"."===e?(this.limitAmount1="",this.limitAmount2=""):0===t&&0!==Number(this.limitAmount1)?this.limitAmount1=0:t&&(this.limitAmount1="",this.watchLimitPrice())},500))},watchLimitPrice(){"solana"!==this.chain?this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(Mo&&(clearTimeout(Mo),Mo=null),Mo=setTimeout(()=>{let e=0===this.activeTab?this.limitToken2:this.limitToken1,t=1===this.activeTab?this.limitToken2:this.limitToken1,i=Ht["d"].parseUnits((0===this.activeTab?this.limitAmount2:this.limitAmount1)||"0",e.decimals).toString(),o=Ht["d"].parseUnits((1===this.activeTab?this.limitAmount2:this.limitAmount1)||"0",t.decimals).toString(),n=e.address,s=t.address,a={from_token:n,to_token:s,amountIn:i,amountOut:o};3===this.selected&&(a.extraGas="250000"),this.limitQuoteLoading=!0,Object(ki["yb"])(a).then(e=>{var i,o,n,s;if(1===e.toWrapper||2===e.toWrapper)return void(this.limitQuoteLoading=!1);this.limitGasU=e.gasU;let a=null===e||void 0===e||null===(i=e.routerPath)||void 0===i||null===(o=i.find)||void 0===o?void 0:o.call(i,e=>e.address===this.limitToken1.address),l=null===e||void 0===e||null===(n=e.routerPath)||void 0===n||null===(s=n.find)||void 0===s?void 0:s.call(n,e=>e.address===this.limitToken2.address);if(this.limitToken1.price=null===a||void 0===a?void 0:a.price,this.limitToken2.price=null===l||void 0===l?void 0:l.price,new ro.a((null===a||void 0===a?void 0:a.amount)||0).lte(0)||new ro.a((null===l||void 0===l?void 0:l.amount)||0).lte(0)||!e.isCanUseGas)return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderAmount"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});3===this.selected?this.limitAmount1&&this.limitAmount2?0===this.activeTab?this.limitAmount1=Ht["d"].formatUnits(a.amount,a.decimals):this.limitAmount2=Ht["d"].formatUnits(l.amount,l.decimals):this.limitAmount1?this.limitAmount2=Ht["d"].formatUnits(l.amount,l.decimals):this.limitAmount2&&(this.limitAmount1=Ht["d"].formatUnits(a.amount,a.decimals)):this.limitPrice&&this.limitAmount1&&this.limitAmount2?0===this.activeTab?this.limitAmount1=new ro.a(Ht["d"].formatUnits(a.amount,a.decimals)).times(a.price||0).div(this.limitPrice||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken1.decimals}})?`))[0]:this.limitAmount2=new ro.a(Ht["d"].formatUnits(l.amount,l.decimals)).times(this.limitPrice||0).div(a.price||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken2.decimals}})?`))[0]:this.limitPrice&&this.limitAmount1?this.limitAmount2=new ro.a(Ht["d"].formatUnits(l.amount,l.decimals)).times(this.limitPrice||0).div(a.price||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken2.decimals}})?`))[0]:this.limitPrice&&this.limitAmount2&&(this.limitAmount1=new ro.a(Ht["d"].formatUnits(a.amount,a.decimals)).times(a.price||0).div(this.limitPrice||1).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${this.limitToken1.decimals}})?`))[0]);let r=new ro.a(this.limitSlippage||0);3===this.selected&&(r=new ro.a(this.noGasSlippage||0)),r=new ro.a(1).minus(r.div(100));let c=0===this.activeTab?this.limitAmount1:this.limitAmount2;this.limitMinReturn=new ro.a(c||0).times(r).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t.decimals}})?`))[0]}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.limitQuoteLoading=!1})},500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")})):this.watchLimitSolanaPrice()},minusLimitPrice(){this.limitPrice&&new ro.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new ro.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice(){this.limitPrice&&new ro.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new ro.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},quoteLimitTokenPrice(){let e=this.limitToken1.chain,t=this.limitToken1.address+"-"+e,i=this.limitToken2.address+"-"+e;return Object(ki["mb"])([t,i]).then(async e=>{var t,i;return this.limitToken1.price=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.current_price_usd)||0,this.limitToken2.price=(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.current_price_usd)||0,[this.limitToken1.price,this.limitToken2.price]})},getLeftHeight(){this.$nextTick(()=>{let{height:e}=Object(No["o"])(this.$refs.swapLeft);this.height=e})},handleWalletAddress(e=!0){var t;""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?window.ethereum?(this.$store.state.importAddressVisible=!1,null!==(t=window)&&void 0!==t&&t.tronLink||this.$store.commit("changeConnectVisible",!0)):this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):e&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage(){if(1===this.activeTab){var e,t;if(Number(this.autoSlippageValue)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;let i=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(i.toFixed(2)))}else{var i,o;if(Number(this.autoSlippageValue)>Number(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)+1)return;let e=Math.max(Math.min(Number(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(e.toFixed(2)))}},onSubmit(){try{if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChain())return;2===this.selected&&(this.isApprove?this.getSwapTx():this.approve())}catch(e){console.log(e)}},getSwapTokenList(){var e,t;let i=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"bsc";Object(ki["ib"])(i).then(e=>{var t,o;(this.tokens=(null===e||void 0===e?void 0:e.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token,decimals:e.token===wi["k"]?9:e.decimals})))||[],"solana"===i)&&(this.tokens=null===(t=this.tokens)||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.call(t,e=>e.token!==wi["k"]).sort(e=>"So11111111111111111111111111111111111111112"===e.token?-1:1));const n=this.token1.address===this.token2.address,s=(this.isERC314||this.isFourMeme||this.isFlap||this.isSunPump>0||this.isDyorswapfun||this.isXflapswap)&&this.token2.address!==wi["k"],a=(this.isPump||this.isMoonshot)&&"solana"===i&&"So11111111111111111111111111111111111111112"===this.token2.address,l="sui"===i&&"0x2::sui::SUI"!==this.token2.address&&this.token2.address!==wi["k"];if((!this.token2.address||n||s||a||l)&&this.tokens.length>0){let e=this.tokens.findIndex(e=>/USDT/.test(e.symbol));e=e<0?this.tokens.findIndex(e=>/USD/.test(e.symbol)):e,e=e<0?0:e;let t=this.tokens[e];var r;if(this.token1.address===t.address)t=0===e&&null!==(r=this.tokens[1])&&void 0!==r?r:this.tokens[0];if(this.isERC314||this.isPump||this.isMoonshot||this.isFourMeme||this.isFlap||this.isSunPump>0||l||this.isDyorswapfun||this.isXflapswap){var c,d;let e=null===(c=this.tokens)||void 0===c||null===(d=c.slice)||void 0===d?void 0:d.call(c).find(e=>e.address===wi["k"]||"So11111111111111111111111111111111111111112"===e.address||"0x2::sui::SUI"===e.address);this.token2={...e}}else this.token2={...t}}if((!this.limitToken2.address||this.limitToken1.address===this.limitToken2.address)&&this.tokens.length>0){let e=this.tokens.findIndex(e=>/USDT/.test(e.symbol));e=e<0?this.tokens.findIndex(e=>/USD/.test(e.symbol)):e,e=e<0?0:e;let t=this.tokens[e];var m;if(this.limitToken1.address===t.address)t=0===e&&null!==(m=this.tokens[1])&&void 0!==m?m:this.tokens[0];this.limitToken2={...t}}this.getTokenDetails()})},getUserTokenList(){var e,t;let i=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"bsc";Object(ki["rb"])(i).then(e=>{var t,o;"solana"===i||"ton"===i||"sui"===i?this.userBalanceTokens=null===e||void 0===e?void 0:e.map(e=>({...e,value:e.balance})):this.userBalanceTokens=(null===e||void 0===e||null===(t=e.map(e=>({...e,id:e.token+"-"+e.chain,address:e.token})))||void 0===t||null===(o=t.filter)||void 0===o?void 0:o.call(t,e=>(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag))||[];this.userBalanceTokens.length>0&&"tron"!==i&&"brc20"!==i&&"solana"!==i&&"ton"!==i&&"sui"!==i&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(ki["u"])(this.userBalanceTokens.map(e=>e.token||""),i).then(e=>{var t,i;this.userBalanceTokens=null===(t=this.userBalanceTokens)||void 0===t||null===(i=t.map)||void 0===i||null===(i=i.call(t,(t,i)=>({...t,value:Ht["d"].formatUnits(e[i],t.decimals||0)})))||void 0===i?void 0:i.filter(e=>!!Number(e.value))})})},getTokenDetails(){Promise.all([this.getToken2Info(),this.getToken1Info()]).then(()=>{0===this.activeTab?this.allowance=this.token2.allowance||"0":this.allowance=this.token1.allowance||"0"})},getToken2Info(){var e,t;return Object(ki["jb"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(async e=>{console.log("token2---",e);let t={...e};return t.address===this.token2.address&&(this.token2={...this.token2,...t},sessionStorage.swap_token2=JSON.stringify(this.token2)),this.limitToken2={...this.limitToken2,...t},e})},getToken1Info(){var e,t;return Object(ki["jb"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(async e=>{console.log("token1",e);let t={...e};return this.token1={...this.token1,...t},sessionStorage.swap_token1=JSON.stringify(this.token1),this.limitToken1={...this.limitToken1,...t},e})},getBaseToken(){var e;let t=(null===(e=this.$route.params)||void 0===e?void 0:e.id)||"",[i,o]=this.$f.getAddressAndChainFromId(t,1);if(this.token1.address&&(i=this.token1.address),this.token1.chain&&(o=this.token1.chain),i&&o){let e=i+"-"+o,n=$o["a"].get("chainConfig",wi["l"])||{},s=null===n||void 0===n?void 0:n[o],a=null===s||void 0===s?void 0:s.wmainWrapper,l=null===s||void 0===s?void 0:s.mainName;i===wi["k"]&&o&&a&&(e=a+"-"+o);let r=Object(ki["P"])(e).then(async t=>{var o,n,s,a,r,c,d,m,u,h,p,b;console.log("baseToken",t),this.baseToken={...t,...i===wi["k"]?{token:{...t.token,token:i,symbol:l,logoURI:this.$f.formatIcon(e)}}:{}},null!==t&&void 0!==t&&null!==(o=t.pairs)&&void 0!==o&&o.some(e=>"moonshot"===e.amm)?sessionStorage.isMoonshot=!0:sessionStorage.removeItem("isMoonshot");let v=(null===t||void 0===t||null===(n=t.pairs)||void 0===n||null===(n=n.slice(0,2))||void 0===n||null===(s=n.every)||void 0===s?void 0:s.call(n,e=>{var t,i;return null===(t=e.amm)||void 0===t||null===(i=t.includes)||void 0===i?void 0:i.call(t,"meteora")}))||"6p6xgHyF7AeE6TZkSmFsko444wqoP15icUSqi2jfGiPN"===i;v?sessionStorage.isMeteora=!0:sessionStorage.removeItem("meteora");let f=null===t||void 0===t||null===(a=t.pairs)||void 0===a?void 0:a[0],g=null===f||void 0===f?void 0:f.pair;var k;if(!g||"moonshot"===(null===f||void 0===f?void 0:f.amm)||"dyorswapfun"===(null===f||void 0===f?void 0:f.amm)||"xflapswap"===(null===f||void 0===f?void 0:f.amm)||null!==f&&void 0!==f&&null!==(r=f.amm)&&void 0!==r&&r.includes("fourmeme")||"flapswap"===(null===f||void 0===f?void 0:f.amm)||"sunpump"===(null===f||void 0===f?void 0:f.amm)||(null===f||void 0===f?void 0:f.target_token)!==g&&!new RegExp(null===f||void 0===f?void 0:f.target_token,"i").test(g))this.isERC314=!1;else if(this.isERC314=!0,this.token2.address!==wi["k"]&&(null===(k=this.tokens)||void 0===k?void 0:k.length)>0){var w;let e={...null===(w=this.tokens)||void 0===w||null===(w=w.slice())||void 0===w?void 0:w.find(e=>e.address===wi["k"])};this.token2={...e},setTimeout(()=>{this.handleSelectToken2(e)},1e3)}"moonshot"===(null===f||void 0===f?void 0:f.amm)?this.isMoonshot=!0:this.isMoonshot=!1,null!==f&&void 0!==f&&null!==(c=f.amm)&&void 0!==c&&c.includes("fourmeme")?this.isFourMeme=!0:this.isFourMeme=!1,"dyorswapfun"===(null===f||void 0===f?void 0:f.amm)&&"xlayer"===(null===f||void 0===f?void 0:f.chain)?this.isDyorswapfun=!0:this.isDyorswapfun=!1,"xflapswap"===(null===f||void 0===f?void 0:f.amm)&&"xlayer"===(null===f||void 0===f?void 0:f.chain)?this.isXflapswap=!0:this.isXflapswap=!1,"flapswap"===(null===f||void 0===f?void 0:f.amm)?this.isFlap=!0:this.isFlap=!1;let O=["TPeoxx1VhUMnAUyjwWfximDYFDQaxNQQ45","TXL6rJbvmjD46zeN1JssfgxvSo99qC8MRT","TAwAg9wtQzTMFsijnSFotJrpxhMm3AqW1d"];"sunpump"===(null===f||void 0===f?void 0:f.amm)?this.isSunPump=1:null!==t&&void 0!==t&&null!==(d=t.pairs)&&void 0!==d&&d.some(e=>"sunpump"===e.amm)||null!==O&&void 0!==O&&null!==(m=O.includes)&&void 0!==m&&m.call(O,i)?this.isSunPump=2:this.isSunPump=0,this.amm=null===f||void 0===f?void 0:f.amm,this.getSolanaPumpInfo().catch(async()=>!1);let j=null===f||void 0===f?void 0:f.chain;return g&&this.getKlineHistory(g+"-"+j),this.token1={...this.token1,address:this.baseToken.token.token,...this.baseToken.token,decimals:(null===(u=this.baseToken.token)||void 0===u?void 0:u.decimal)||(null===(h=this.baseToken.token)||void 0===h?void 0:h.decimals)},sessionStorage.swap_token1=JSON.stringify(this.token1),this.limitToken1={...this.limitToken1,address:this.baseToken.token.token,...this.baseToken.token,decimals:(null===(p=this.baseToken.token)||void 0===p?void 0:p.decimal)||(null===(b=this.baseToken.token)||void 0===b?void 0:b.decimals)},this.getLeftHeight(),"solana"===j?this.limitSolanaPriceU=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"":(this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.triggerPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):""),this.quoteLimitSolana(),t}),c=Object(ki["kb"])(t).then(async e=>(this.baseTokenExtra={...e,buy_tax:Number(Number(e.buy_tax).toFixed(2)),sell_tax:Number(Number(e.sell_tax).toFixed(2))},this.handleTaxSlippage(),e));Promise.all([r,c]).finally(()=>{console.log("initWs",e),this.$store.dispatch("initWs",e)});let d=["0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-eth","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2-eth","0xdac17f958d2ee523a2206206994597c13d831ec7-eth","0x4fabb145d64652a948d72533023f6e7a623c7c53-eth","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48-eth"];i===wi["k"]||d.includes(t)?(this.hasMEVBot=!1,this.isHotToken=!1):Object(ki["K"])(t).then(e=>{this.hasMEVBot=(null===e||void 0===e?void 0:e.has_MEVBot)||!1,this.isHotToken=(null===e||void 0===e?void 0:e.is_hot_token)||!1}).catch(()=>{this.hasMEVBot=!1,this.isHotToken=!1})}},getSelectedRouter(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo(e=!0){var t,i;if("Swap"!==this.$route.name)return;if(!this.supportChain())return;if(!Number(this.fromAmount)&&!Number(this.toAmount))return void(this.quoteLoading=!1);if(this.token1.address===this.token2.address)return void this.$toast({position:"top",message:this.$t("twoIdenticalTokens")});Bo&&(clearTimeout(Bo),Bo=null);let o=this.$store.getters.netId||(null===(t=this.$f.getAddressAndChainFromId(null===(i=this.$route.params)||void 0===i?void 0:i.id))||void 0===t?void 0:t.chain)||"";Bo=setTimeout(()=>{this.dealGetQuoteInfo(e,o)},500)},async dealGetQuoteInfo(e,t){if((this.fromAmount||this.toAmount)&&this.fromToken.address&&this.toToken.address){var i,o,n,s;let ae=this.fromToken.decimals,le=this.toToken.decimals;if("sui"===t)return void this.quoteSui(e,t);if("solana"===t)return void this.quoteSolana(e,t);if("ton"===t)return void this.quoteTon(e,t);if("bsc"===t){let e=!((this.isFourMeme||this.isFlap)&&this.token2.address!==wi["k"]&&"bsc"===this.token2.chain);if(!e)return}if("tron"===t){let e=!(this.isSunPump>0&&this.token2.address!==wi["k"]&&"tron"===this.token2.chain);if(!e)return}this.quoteLoading=!0;let re={from_token:this.fromToken.address,to_token:this.toToken.address,amountIn:e?Ht["d"].parseUnits(new ro.a(this.fromAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${ae}})?`))[0],ae).toString():0,amountOut:e?0:Ht["d"].parseUnits(new ro.a(this.toAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${le}})?`))[0],le).toString()};if(this.isFourMeme){try{var a,l,r,c,d,m,u,h;let i=await Object(ki["xb"])(re,t);var p,b;if(e)this.toAmount=Ht["d"].formatUnits((null===i||void 0===i?void 0:i.amountOut)||"0",null===(p=this.toToken)||void 0===p?void 0:p.decimals);else this.fromAmount=Ht["d"].formatUnits((null===i||void 0===i?void 0:i.amountIn)||"0",null===(b=this.fromToken)||void 0===b?void 0:b.decimals);this.swapRouterPath=[{symbol:null===(a=this.fromToken)||void 0===a?void 0:a.symbol,nextAmm:"fourmeme"},{symbol:null===(l=this.toToken)||void 0===l?void 0:l.symbol,nextAmm:""}],this.swapQuoteInfo.fromAmount=Ht["d"].parseUnits(this.fromAmount,null===(r=this.fromToken)||void 0===r?void 0:r.decimals).toString(),this.swapQuoteInfo.toAmount=Ht["d"].parseUnits(this.toAmount,null===(c=this.toToken)||void 0===c?void 0:c.decimals).toString(),this.swapQuoteInfo.fromToken={...this.fromToken,amount:this.swapQuoteInfo.fromAmount},this.swapQuoteInfo.toToken={...this.toToken,amount:this.swapQuoteInfo.toAmount},this.swapQuoteInfo.quoteResult={...i},this.swapQuoteInfo.isAmountOut=!e,this.swapQuoteInfo.isFourMeme=!0,this.getAllowance();let[o,n]=[(null===(d=this.fromToken)||void 0===d?void 0:d.address)+"-"+(null===(m=this.fromToken)||void 0===m?void 0:m.chain),(null===(u=this.toToken)||void 0===u?void 0:u.address)+"-"+(null===(h=this.toToken)||void 0===h?void 0:h.chain)];Object(ki["mb"])([o,n]).then(async e=>{var t,i;this.swapQuoteInfo.from_price=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.current_price_usd)||0,this.swapQuoteInfo.to_price=(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.current_price_usd)||0,this.swapQuoteInfo.isFourMeme=!0}),this.quoteLoading=!1}catch(se){this.quoteLoading=!1,this.$f.handleError(se)}return}if(this.isDyorswapfun){try{var v,f,g,k,w,O,j,y,S,T,_;let[i,o]=[(null===(v=this.fromToken)||void 0===v?void 0:v.address)+"-"+(null===(f=this.fromToken)||void 0===f?void 0:f.chain),(null===(g=this.toToken)||void 0===g?void 0:g.address)+"-"+(null===(k=this.toToken)||void 0===k?void 0:k.chain)],n=await Object(ki["mb"])([i,o]),s=(null===n||void 0===n||null===(w=n[0])||void 0===w?void 0:w.current_price_usd)||0,a=(null===n||void 0===n||null===(O=n[1])||void 0===O?void 0:O.current_price_usd)||0,l=Object(ki["vb"])({...re,from_price:s,to_price:a,pairs:this.baseToken.pairs},t);this.toAmount=Ht["d"].formatUnits(l||"0",null===(j=this.toToken)||void 0===j?void 0:j.decimals),this.swapRouterPath=[{symbol:null===(y=this.fromToken)||void 0===y?void 0:y.symbol,nextAmm:"dyorswapfun"},{symbol:null===(S=this.toToken)||void 0===S?void 0:S.symbol,nextAmm:""}],this.swapQuoteInfo.fromAmount=Ht["d"].parseUnits(this.fromAmount,null===(T=this.fromToken)||void 0===T?void 0:T.decimals).toString(),this.swapQuoteInfo.toAmount=Ht["d"].parseUnits(this.toAmount,null===(_=this.toToken)||void 0===_?void 0:_.decimals).toString(),this.swapQuoteInfo.fromToken={...this.fromToken,amount:this.swapQuoteInfo.fromAmount},this.swapQuoteInfo.toToken={...this.toToken,amount:this.swapQuoteInfo.toAmount},this.swapQuoteInfo.quoteResult={...l},this.swapQuoteInfo.isAmountOut=!e,this.swapQuoteInfo.isDyorswapfun=!0,this.getAllowance(),this.swapQuoteInfo.from_price=s,this.swapQuoteInfo.to_price=a,this.quoteLoading=!1}catch(se){this.quoteLoading=!1,this.$f.handleError(se)}return}if(this.isXflapswap){try{var N,$,V,x,E,A,I,B;let i=await Object(ki["Bb"])(re,t);var C,P;if(e)this.toAmount=Ht["d"].formatUnits((null===i||void 0===i?void 0:i.toString())||"0",null===(C=this.toToken)||void 0===C?void 0:C.decimals);else this.fromAmount=Ht["d"].formatUnits((null===i||void 0===i?void 0:i.toString())||"0",null===(P=this.fromToken)||void 0===P?void 0:P.decimals);this.swapRouterPath=[{symbol:null===(N=this.fromToken)||void 0===N?void 0:N.symbol,nextAmm:"xflapswap"},{symbol:null===($=this.toToken)||void 0===$?void 0:$.symbol,nextAmm:""}],this.swapQuoteInfo.fromAmount=Ht["d"].parseUnits(this.fromAmount,null===(V=this.fromToken)||void 0===V?void 0:V.decimals).toString(),this.swapQuoteInfo.toAmount=Ht["d"].parseUnits(this.toAmount,null===(x=this.toToken)||void 0===x?void 0:x.decimals).toString(),this.swapQuoteInfo.fromToken={...this.fromToken,amount:this.swapQuoteInfo.fromAmount},this.swapQuoteInfo.toToken={...this.toToken,amount:this.swapQuoteInfo.toAmount},this.swapQuoteInfo.quoteResult={...i},this.swapQuoteInfo.isAmountOut=!e,this.swapQuoteInfo.isXflapswap=!0,this.getAllowance();let[o,n]=[(null===(E=this.fromToken)||void 0===E?void 0:E.address)+"-"+(null===(A=this.fromToken)||void 0===A?void 0:A.chain),(null===(I=this.toToken)||void 0===I?void 0:I.address)+"-"+(null===(B=this.toToken)||void 0===B?void 0:B.chain)];Object(ki["mb"])([o,n]).then(async e=>{var t,i;this.swapQuoteInfo.from_price=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.current_price_usd)||0,this.swapQuoteInfo.to_price=(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.current_price_usd)||0,this.swapQuoteInfo.isXflapswap=!0}),this.quoteLoading=!1}catch(se){this.quoteLoading=!1,this.$f.handleError(se)}return}if("tron"===t&&this.isSunPump>0){try{var D,L,F,M,U,R,G,Q;let i=await Object(ki["Ab"])({...re,isSunPump:this.isSunPump},t);var z,q;if(e)this.toAmount=Ht["d"].formatUnits((null===i||void 0===i?void 0:i.amountOut)||"0",null===(z=this.toToken)||void 0===z?void 0:z.decimals);else this.fromAmount=Ht["d"].formatUnits((null===i||void 0===i?void 0:i.amountIn)||"0",null===(q=this.fromToken)||void 0===q?void 0:q.decimals);this.swapRouterPath=[{symbol:null===(D=this.fromToken)||void 0===D?void 0:D.symbol,nextAmm:"sunpump"},{symbol:null===(L=this.toToken)||void 0===L?void 0:L.symbol,nextAmm:""}],this.swapQuoteInfo.fromAmount=Ht["d"].parseUnits(this.fromAmount,null===(F=this.fromToken)||void 0===F?void 0:F.decimals).toString(),this.swapQuoteInfo.toAmount=Ht["d"].parseUnits(this.toAmount,null===(M=this.toToken)||void 0===M?void 0:M.decimals).toString(),this.swapQuoteInfo.fromToken={...this.fromToken,amount:this.swapQuoteInfo.fromAmount},this.swapQuoteInfo.toToken={...this.toToken,amount:this.swapQuoteInfo.toAmount},this.swapQuoteInfo.quoteResult={...i},this.swapQuoteInfo.isAmountOut=!e,this.swapQuoteInfo.isSunPump=this.isSunPump,this.getAllowance();let[o,n]=[(null===(U=this.fromToken)||void 0===U?void 0:U.address)+"-"+(null===(R=this.fromToken)||void 0===R?void 0:R.chain),(null===(G=this.toToken)||void 0===G?void 0:G.address)+"-"+(null===(Q=this.toToken)||void 0===Q?void 0:Q.chain)];Object(ki["mb"])([o,n]).then(async e=>{var t,i;this.swapQuoteInfo.from_price=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.current_price_usd)||0,this.swapQuoteInfo.to_price=(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.current_price_usd)||0,this.swapQuoteInfo.isSunPump=this.isSunPump}),this.quoteLoading=!1}catch(se){this.quoteLoading=!1,this.$f.handleError(se)}return}let ce=null===(i=this.baseToken)||void 0===i?void 0:i.pairs;if((null===ce||void 0===ce||null===(o=ce[0])||void 0===o?void 0:o.target_token)===(null===ce||void 0===ce||null===(n=ce[0])||void 0===n?void 0:n.pair)&&null!==ce&&void 0!==ce&&null!==(s=ce[0])&&void 0!==s&&s.pair&&"xlayer"!==t){let i=await Object(ki["wb"])(re,t);if(console.log("res",i),i){var W,H,K,X,J,Y,Z,ee,te,ie,oe;if(e)this.toAmount=Ht["d"].formatUnits(i||"0",null===(ie=this.toToken)||void 0===ie?void 0:ie.decimals);else this.fromAmount=Ht["d"].formatUnits(i||"0",null===(oe=this.fromToken)||void 0===oe?void 0:oe.decimals);this.isERC314=!0,this.swapRouterPath=[{symbol:null===(W=this.fromToken)||void 0===W?void 0:W.symbol,nextAmm:null===ce||void 0===ce||null===(H=ce[0])||void 0===H?void 0:H.amm},{symbol:null===(K=this.toToken)||void 0===K?void 0:K.symbol,nextAmm:""}],this.swapQuoteInfo.fromAmount=Ht["d"].parseUnits(this.fromAmount,null===(X=this.fromToken)||void 0===X?void 0:X.decimals).toString(),this.swapQuoteInfo.toAmount=Ht["d"].parseUnits(this.toAmount,null===(J=this.toToken)||void 0===J?void 0:J.decimals).toString(),this.swapQuoteInfo.fromToken={...this.fromToken,amount:this.swapQuoteInfo.fromAmount},this.swapQuoteInfo.toToken={...this.toToken,amount:this.swapQuoteInfo.toAmount};let[t,o]=[(null===(Y=this.fromToken)||void 0===Y?void 0:Y.address)+"-"+(null===(Z=this.fromToken)||void 0===Z?void 0:Z.chain),(null===(ee=this.toToken)||void 0===ee?void 0:ee.address)+"-"+(null===(te=this.toToken)||void 0===te?void 0:te.chain)];return Object(ki["mb"])([t,o]).then(async e=>{var t,i;this.swapQuoteInfo.from_price=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.current_price_usd)||0,this.swapQuoteInfo.to_price=(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.current_price_usd)||0,this.swapQuoteInfo.isERC314=!0}),void(this.quoteLoading=!1)}}let de="";if("core"===t&&(null===ce||void 0===ce?void 0:ce.length)>0){var ne;console.log("pairs",ce);let e=(null===ce||void 0===ce||null===(ne=ce.find)||void 0===ne?void 0:ne.call(ce,e=>{let t=[e.token0_address,e.token1_address];return t.includes(re.token0_address)||t.includes(re.token1_address)}))||(null===ce||void 0===ce?void 0:ce[0]),t=null===e||void 0===e?void 0:e.amm,i={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};de=(null===i||void 0===i?void 0:i[t])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f",console.log("wrapper",de)}this.isERC314=!1,Object(ki["ub"])({...re,amm:this.amm},de,t).then(e=>{this.swapPathList=e,this.selectedRouter(e),this.getSwapGas()}).catch(t=>{this.$f.handleError(t),e?this.toAmount="":this.fromAmount="",this.$nextTick(()=>{setTimeout(()=>{this.quoteLoading=!1,this.countDownFinishReset()},800)})})}},async quoteSolana(e,t){if("solana"===t){let t=!((this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address&&"solana"===this.token2.chain);if(!t)return;let o=this.fromToken.decimals,n=this.toToken.decimals;if(!localStorage.solanaSlippage&&Date.now()>this.getKlineTime+15e3){var i;let e=null===(i=this.baseToken)||void 0===i||null===(i=i.pairs)||void 0===i?void 0:i[0],t=null===e||void 0===e?void 0:e.pair,o=null===e||void 0===e?void 0:e.chain;t&&await this.getKlineHistory(t+"-"+o)}let s={inputMint:this.fromToken.address,inputDecimals:o,inputMintSymbol:this.fromToken.symbol,inputMintName:this.fromToken.symbol,inputAmount:this.fromAmount||0,outputMint:this.toToken.address,outputDecimals:n,outputMintSymbol:this.toToken.symbol,outputMintName:this.toToken.symbol,amount:e?Ht["d"].parseUnits(new ro.a(this.fromAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o}})?`))[0],o).toString():Ht["d"].parseUnits(new ro.a(this.toAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))[0],n).toString(),slippageBps:new ro.a(this.solanaSlippage).times(100).toFixed(0),swapMode:e?"ExactIn":"ExactOut",slippage:this.solanaSlippage||19,isPump:this.isPump,isMoonshot:this.isMoonshot},a=this.quoteSolanaPreParams.amount&&Object.keys(this.quoteSolanaPreParams).every(e=>s[e]===this.quoteSolanaPreParams[e]);if(a)return;return this.quoteSolanaPreParams={...s},setTimeout(()=>{this.quoteSolanaPreParams={}},15e3),this.quoteLoading=!0,Object(Vo["h"])(s).then(t=>{var i;if(console.log("solanaQuoteResponse",t),t.routeInfo&&t.transaction){var s,a,l,r;if(this.solanaQuoteResponse=t,console.log("amountIn",t.routeInfo),null!==(s=t.routeInfo)&&void 0!==s&&s.isExactOut)this.fromAmount=(null===(l=t.routeInfo)||void 0===l||null===(l=l.amountOut)||void 0===l||null===(l=l.amount)||void 0===l?void 0:l.toFixed())||"0";else this.toAmount=(null===(r=t.routeInfo)||void 0===r||null===(r=r.amountOut)||void 0===r||null===(r=r.amount)||void 0===r?void 0:r.toFixed())||"0";console.log("amountOut",(null===(a=t.routeInfo)||void 0===a||null===(a=a.amountOut)||void 0===a||null===(a=a.amount)||void 0===a?void 0:a.toFixed())||"0"),this.quoteSwapTokenPrice()}else{var c,d;if(e)if(t.outAmount)this.solanaQuoteResponse=t,this.toAmount=Ht["d"].formatUnits(t.outAmount||"0",n||(null===(c=this.toToken)||void 0===c?void 0:c.decimals)),this.quoteSwapTokenPrice();else this.$f.handleError("can not get quote");else if(t.inAmount)this.solanaQuoteResponse=t,this.fromAmount=Ht["d"].formatUnits(t.inAmount||"0",o||(null===(d=this.fromToken)||void 0===d?void 0:d.decimals)),this.quoteSwapTokenPrice();else this.$f.handleError("can not get quote")}return this.solanaSwapBaseTokenPrice=null===(i=this.baseToken)||void 0===i||null===(i=i.token)||void 0===i?void 0:i.current_price_usd,this.getSwapTx(!1),this.quoteLoading=!1,this.quoteSolanaPreParams={},t}).catch(e=>(console.log(e),this.$f.handleError((null===e||void 0===e?void 0:e.error)||e),this.$nextTick(()=>{setTimeout(()=>{this.quoteLoading=!1,this.quoteSolanaPreParams={},this.countDownFinishReset()},800)}),Promise.resolve("")))}},async quoteTon(e,t){if("ton"===t){let t=this.fromToken.decimals,i=this.toToken.decimals;console.log("fromAmount",this.fromAmount,this.fromToken),console.log("toToken",this.toToken);let o=this.fromToken.address===wi["k"]?new ro.a(this.fromAmount||0).times("0.997"):new ro.a(this.fromAmount||0),n={inputToken:this.fromToken.address,outputToken:this.toToken.address,inputTokenAmount:Ht["d"].parseUnits(o.toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t}})?`))[0],t).toString(),slippageBps:new ro.a(this.tonSlippage).times(100).toFixed(0)};return this.quoteLoading=!0,Object(ki["ob"])(n).then(t=>{if(console.log("tonQuoteResponse",t),t.amountOut&&t.payload){var o,n;if(this.tonQuoteResponse=t,console.log("amountIn",t.routeInfo),e)console.log("toDecimals",i,null===(o=this.toToken)||void 0===o?void 0:o.decimals),this.toAmount=Ht["d"].formatUnits(t.amountOut||"0",i||(null===(n=this.toToken)||void 0===n?void 0:n.decimals));console.log("amountOut",this.toAmount),this.quoteSwapTokenPrice()}else this.$f.handleError("can not get quote");return this.getSwapTx(!1),this.quoteLoading=!1,t}).catch(e=>(console.log(e),this.$f.handleError((null===e||void 0===e?void 0:e.error)||e),this.$nextTick(()=>{setTimeout(()=>{this.quoteLoading=!1,this.quoteSolanaPreParams={},this.countDownFinishReset()},800)}),Promise.resolve("")))}},async quoteSui(e,t){if("sui"===t){let t=this.fromToken.decimals,i=this.toToken.decimals;console.log("fromAmount",this.fromAmount,this.fromToken),console.log("toToken",this.toToken);let o=this.fromToken.address===wi["k"]?new ro.a(this.fromAmount||0).times("0.997"):new ro.a(this.fromAmount||0),n=this.fromToken.address===wi["k"]?"0x2::sui::SUI":this.fromToken.address,s={tokenIn:n,tokenOut:this.toToken.address,amountIn:Ht["d"].parseUnits(o.toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${t}})?`))[0],t).toString(),slippage:new ro.a(this.tonSlippage).div(100).toNumber()};return this.quoteLoading=!0,Object(ki["gb"])(s).then(t=>{var o;if(console.log("suiQuoteResponse",t),t.returnAmount&&t.returnAmountWithDecimal||t.amount_out){var n,s,a;if(this.suiQuoteResponse=t,console.log("amountIn",t.routeInfo),e)console.log("toDecimals",i,null===(n=this.toToken)||void 0===n?void 0:n.decimals),this.toAmount=(null===t||void 0===t?void 0:t.returnAmount)||Ht["d"].formatUnits((null===t||void 0===t?void 0:t.amount_out)||"0",(null===t||void 0===t||null===(s=t.to_token)||void 0===s?void 0:s.decimals)||i||(null===(a=this.toToken)||void 0===a?void 0:a.decimals));console.log("amountOut",this.toAmount),this.quoteSwapTokenPrice()}else this.$f.handleError("can not get quote");return this.tonSwapBaseTokenPrice=null===(o=this.baseToken)||void 0===o||null===(o=o.token)||void 0===o?void 0:o.current_price_usd,this.getSwapTx(!1),this.quoteLoading=!1,t}).catch(e=>(console.log(e),this.$f.handleError((null===e||void 0===e?void 0:e.error)||e),this.$nextTick(()=>{setTimeout(()=>{this.quoteLoading=!1,this.quoteSolanaPreParams={},this.countDownFinishReset()},800)}),Promise.resolve("")))}},quoteSwapTokenPrice(){let e=this.fromToken.chain,t=this.fromToken.address+"-"+e,i=this.toToken.address+"-"+e;return sessionStorage.swap_tokenPrice===t+"-"+i?(this.swapTokenPrice=[0,0],"solana"===e?this.priceImpactSolana=0:"ton"===e?(this.priceImpactTon=0,this.tonSwapTokenPrice=[0,0]):"sui"===e&&(this.priceImpactSui=0)):sessionStorage.swap_tokenPrice=t+"-"+i,Object(ki["mb"])([t,i]).then(async t=>{var i,o;let n=(null===t||void 0===t||null===(i=t[0])||void 0===i?void 0:i.current_price_usd)||0,s=(null===t||void 0===t||null===(o=t[1])||void 0===o?void 0:o.current_price_usd)||0;this.swapTokenPrice=[n,s];let a=this.fromAmount||0,l=this.toAmount||0,r=Math.abs(Number(a)*n/(Number(l)*s)-1);"solana"===e?this.priceImpactSolana=r:"ton"===e?(this.priceImpactTon=r,this.tonSwapTokenPrice=[n,s]):"sui"===e&&(this.priceImpactSui=r),console.log("priceImpactSolana",r)})},selectedRouter(e=this.swapPathList){let t=e[this.selectedRouterIndex],i=e[this.selectedRouterIndex].routerPath,o=this.isAmount,n=this.fromToken.decimals,s=this.toToken.decimals,a=!1;if(o){var l;let e=Ht["d"].parseUnits(new ro.a(this.fromAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))[0],n).toString(),t=(null===(l=i[0])||void 0===l?void 0:l.amount)||0;a=e===t}else{var r;let e=Ht["d"].parseUnits(new ro.a(this.toAmount||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${s}})?`))[0],s).toString(),t=(null===(r=i[i.length-1])||void 0===r?void 0:r.amount)||0;a=e===t}if(!a)return;if(1===t.from_cannot_sell_all){var c;let e=new ro.a(Ht["d"].parseUnits(String(this.fromToken.balance),null===(c=this.fromToken)||void 0===c?void 0:c.decimals).toString()),i=new ro.a(null===t||void 0===t?void 0:t.routerPath[0].amount);this.isCannotSellAll=e.gt(0)&&i.div(e).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=t.totalTax>0||t.total_sell_tax>0||t.total_buy_tax>0;let d=this.getPriceImpact(t);if(this.isTax||d.gt(.5)){this.isTaxHigh=t.total_sell_tax+t.total_buy_tax+1>49.99;let i=t.totalTax||t.total_sell_tax+t.total_buy_tax||0,o=Number(d);if(this.autoSlippage){let t=i+o+(i>5||o>5?2.5:2);console.log("swapPathList",e),t=Math.max(Math.min(t,49.99),.5),this.autoSlippageValue=String(Number(t.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=Ro);if(console.log("autoSlippageValue",this.autoSlippageValue),(t.weight>5e4||t.totalTax>0||t.total_sell_tax>0||t.total_buy_tax>0)&&!this.hasMEVBot?this.autoSwapMode="fast":this.autoSwapMode="protect",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=t,this.swapRouterPath=i.map((e,i)=>{var o;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(o=t.pair_path)||void 0===o||null===(o=o[i])||void 0===o?void 0:o.amm)||""}}),this.listRouter=e.map(e=>{let t=0,i=0;if(o){var n;let i=e.routerPath[e.routerPath.length-1];t=Ht["d"].formatUnits(i.amount||"0",(null===i||void 0===i?void 0:i.decimals)||(null===(n=this.toToken)||void 0===n?void 0:n.decimals))}else{let t=e.routerPath[0];i=Ht["d"].formatUnits(t.amount||"0",(null===t||void 0===t?void 0:t.decimals)||this.fromToken.decimals)}let s=e.routerPath.map((t,i)=>{var o;return{symbol:t.symbol,nextAmm:(null===e||void 0===e||null===(o=e.pair_path)||void 0===o||null===(o=o[i])||void 0===o?void 0:o.amm)||""}});return{path:s,amount:o?t:i,priceImpact:e.priceImpact}}),o){var m;let e=i[i.length-1];this.toAmount=Ht["d"].formatUnits(e.amount||"0",(null===e||void 0===e?void 0:e.decimals)||(null===(m=this.toToken)||void 0===m?void 0:m.decimals))}else{var u;let e=i[0];this.fromAmount=Ht["d"].formatUnits(e.amount||"0",(null===e||void 0===e?void 0:e.decimals)||(null===(u=this.fromToken)||void 0===u?void 0:u.decimals))}let h=t.totalTax||t.total_sell_tax+t.total_buy_tax||0;this.baseTokenPrice=new ro.a(this.toAmount).div(this.fromAmount).times(100-h).div(100).toFixed(),a&&this.$nextTick(()=>{setTimeout(()=>{this.quoteLoading=!1,this.countDownFinishReset()},800)})},handleSelectToken2(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=Ro,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=Ro,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}})},handleSelectLimitToken1(e){this.autoSlippageValue=Ro,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1={...e},this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}}).catch(e=>{console.log("err",e)}),this.getToken1Info(),"solana"===this.chain&&this.quoteLimitSolana()},handleSelectLimitToken2(e){this.autoSlippageValue=Ro,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2={...e},this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance(),"solana"===this.chain&&this.quoteLimitSolana()},getAllowance(){if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){var e;let t=this.$store.getters.netId;if("solana"===t)return void(this.allowance=wi["i"]);let i=this.isFourMeme?null===(e=this.swapQuoteInfo)||void 0===e||null===(e=e.quoteResult)||void 0===e?void 0:e.tokenManager:this.$f.getSwapContract(this.$store.getters.netId),o=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][this.isSunPump];i=o||i,"xlayer"===t&&this.isDyorswapfun&&(i="0xfd947a61e2c54413031ddb1f754dbe0e696efa09"),"xlayer"===t&&this.isXflapswap&&(i="0xb30d8c4216e1f21f27444d2ffaee3ad577808678"),this.loadingAllowance=!0,Object(ki["f"])(this.fromToken.address,i).then(e=>{this.allowance=e.toString(),console.log("this.allowance",this.allowance)}).catch(()=>{this.allowance="0"}).finally(()=>{this.loadingAllowance=!1})}},async approve(){var e;this.loadingApprove=!0,"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast");let t=this.isFourMeme?null===(e=this.swapQuoteInfo)||void 0===e||null===(e=e.quoteResult)||void 0===e?void 0:e.tokenManager:this.$f.getSwapContract(this.$store.getters.netId),i=["","TTfvyrAz86hbZk5iDpKD78pqLGgi8C7AAw","TZFs5ch1R1C4mmjwrrmZqeqbUgGpxY1yWB"][this.isSunPump];t=i||t,"xlayer"===this.$store.getters.netId&&this.isDyorswapfun&&(t="0xfd947a61e2c54413031ddb1f754dbe0e696efa09"),"xlayer"===this.$store.getters.netId&&this.isXflapswap&&(t="0xb30d8c4216e1f21f27444d2ffaee3ad577808678"),Object(ki["j"])(this.fromToken.address,{approveAmount:0===this.activeTab?"":wi["i"],spender:t}).then(e=>e.wait()).then(e=>{console.log(e),this.getAllowance(),this.getGasBalance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingApprove=!1,this.$f.setSwapSendType("")})},getSwapGas(){Co&&(clearTimeout(Co),Co=null),Co=setTimeout(()=>{var e,t,i,o,n,s;console.log(this.checkAmount(),this.isApprove,this.$store.state.currentAccount),this.checkAmount()&&this.isApprove&&this.$store.state.currentAccount&&!this.loadingSwap&&((null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.isSunPump)>0?Object(ki["Kb"])(this.swapQuoteInfo,this.slippage).then(async e=>{var t;this.swapSubmitInfo={...e,isSunPump:null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.isSunPump},this.swapInfo=e.swapInfo,this.swapInfo.gasValue=e.gasValue,console.log("gasValue",e.gasValue),this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}):null!==(t=this.swapQuoteInfo)&&void 0!==t&&t.isFourMeme?Object(ki["q"])(this.swapQuoteInfo,this.slippage).then(async e=>{this.swapSubmitInfo={...e,isFourMeme:!0},this.swapInfo=e.swapInfo,this.swapInfo.gasValue=e.gasValue,console.log("gasValue",e.gasValue),this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}):null!==(i=this.swapQuoteInfo)&&void 0!==i&&i.isERC314?Object(ki["a"])(this.swapQuoteInfo).then(async e=>{this.swapSubmitInfo={...e,isERC314:!0},this.swapInfo=e.swapInfo,this.swapInfo.gasValue=e.gasValue,console.log("gasValue",e.gasValue),this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}):null!==(o=this.swapQuoteInfo)&&void 0!==o&&o.isDyorswapfun?Object(ki["p"])(this.swapQuoteInfo,this.slippage).then(async e=>{this.swapSubmitInfo={...e,isDyorswapfun:!0},this.swapInfo=e.swapInfo,this.swapInfo.gasValue=e.gasValue,console.log("gasValue",e.gasValue),this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}):null!==(n=this.swapQuoteInfo)&&void 0!==n&&n.isXflapswap?Object(ki["Pb"])(this.swapQuoteInfo,this.slippage).then(async e=>{this.swapSubmitInfo={...e,isXflapswap:!0},this.swapInfo=e.swapInfo,this.swapInfo.gasValue=e.gasValue,console.log("gasValue",e.gasValue),this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}):(null===(s=this.swapQuoteInfo)||void 0===s||null===(s=s.routerPath)||void 0===s?void 0:s.length)>0&&(Object(ki["Lb"])(this.swapQuoteInfo,this.slippage).then(async e=>{var t,i;this.swapSubmitInfo=e,this.swapInfo={...e.swapInfo,fromToken:{...this.fromToken,...(null===e||void 0===e||null===(t=e.swapInfo)||void 0===t?void 0:t.fromToken)||{}},toToken:{...this.toToken,...(null===e||void 0===e||null===(i=e.swapInfo)||void 0===i?void 0:i.toToken)||{}}},this.swapInfo.gasValue=e.gasValue,console.log("gasValue",e.gasValue),this.swapInfo.swapRouterPath=this.swapRouterPath}).catch(e=>{this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice()))},1e3)},getSwapTx(e=!0){var t,i,o,n,s,a;if(Co&&(clearTimeout(Co),Co=null),this.checkAmount())if("sui"===this.chain){var l;console.log("suiQuoteResponse",this.suiQuoteResponse);let t=null===(l=this.suiQuoteResponse)||void 0===l||null===(l=l.routes)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.hops)||void 0===l||null===(l=l[0])||void 0===l||null===(l=l.pool)||void 0===l?void 0:l.type;console.log("dex",t);let i=[this.fromToken,this.toToken].map((e,i)=>({symbol:e.symbol,nextAmm:0===i&&t||""}));this.swapInfo={swapRouterPath:i,fromAmount:this.fromAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},e&&(this.dialogVisibleSwap=!0),this.swapRouterPath=i}else if("ton"===this.chain){console.log("tonQuoteResponse",this.tonQuoteResponse);let t=[this.fromToken,this.toToken].map((e,t)=>{var i;return{symbol:e.symbol,nextAmm:0===t&&(null===(i=this.tonQuoteResponse)||void 0===i?void 0:i.dex)||""}});this.swapInfo={swapRouterPath:t,fromAmount:this.fromAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},e&&(this.dialogVisibleSwap=!0),this.swapRouterPath=t}else if("solana"===this.chain){let t=[this.fromToken,this.toToken].map(e=>({symbol:e.symbol,nextAmm:""}));this.swapInfo={swapRouterPath:t,fromAmount:this.fromAmount,toAmount:this.toAmount,fromToken:this.fromToken,toToken:this.toToken},e&&(this.dialogVisibleSwap=!0)}else(null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.isSunPump)>0?(this.loadingSwap=!0,Object(ki["Kb"])(this.swapQuoteInfo,this.slippage).then(async t=>{var i;if(this.swapSubmitInfo={...t,isSunPump:null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.isSunPump},this.swapInfo=t.swapInfo,this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.loadingSwap=!1,e){var o,n;let e=(null===(o=window)||void 0===o||null===(o=o._tw_)||void 0===o||null===(n=o.appGetFreePay)||void 0===n?void 0:n.call(o))||!1;e=e&&"false"!==e,e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loadingSwap=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice()):null!==(i=this.swapQuoteInfo)&&void 0!==i&&i.isFourMeme?(this.loadingSwap=!0,Object(ki["q"])(this.swapQuoteInfo,this.slippage).then(async t=>{if(this.swapSubmitInfo={...t,isFourMeme:!0},this.swapInfo=t.swapInfo,this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.loadingSwap=!1,e){var i,o;let e=(null===(i=window)||void 0===i||null===(i=i._tw_)||void 0===i||null===(o=i.appGetFreePay)||void 0===o?void 0:o.call(i))||!1;e=e&&"false"!==e,e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loadingSwap=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice()):null!==(o=this.swapQuoteInfo)&&void 0!==o&&o.isERC314?(this.loadingSwap=!0,Object(ki["a"])(this.swapQuoteInfo).then(async t=>{if(this.swapSubmitInfo={...t,isERC314:!0},this.swapInfo=t.swapInfo,this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.loadingSwap=!1,e){var i,o;let e=(null===(i=window)||void 0===i||null===(i=i._tw_)||void 0===i||null===(o=i.appGetFreePay)||void 0===o?void 0:o.call(i))||!1;e=e&&"false"!==e,e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loadingSwap=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice()):null!==(n=this.swapQuoteInfo)&&void 0!==n&&n.isDyorswapfun?(this.loadingSwap=!0,Object(ki["p"])(this.swapQuoteInfo,this.slippage).then(async t=>{if(this.swapSubmitInfo={...t,isDyorswapfun:!0},this.swapInfo=t.swapInfo,this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.loadingSwap=!1,e){var i,o;let e=(null===(i=window)||void 0===i||null===(i=i._tw_)||void 0===i||null===(o=i.appGetFreePay)||void 0===o?void 0:o.call(i))||!1;e=e&&"false"!==e,e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loadingSwap=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice()):null!==(s=this.swapQuoteInfo)&&void 0!==s&&s.isXflapswap?(this.loadingSwap=!0,Object(ki["Pb"])(this.swapQuoteInfo,this.slippage).then(async t=>{if(this.swapSubmitInfo={...t,isXflapswap:!0},this.swapInfo=t.swapInfo,this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.loadingSwap=!1,e){var i,o;let e=(null===(i=window)||void 0===i||null===(i=i._tw_)||void 0===i||null===(o=i.appGetFreePay)||void 0===o?void 0:o.call(i))||!1;e=e&&"false"!==e,e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loadingSwap=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice()):(null===(a=this.swapQuoteInfo)||void 0===a||null===(a=a.routerPath)||void 0===a?void 0:a.length)>0&&(this.loadingSwap=!0,Object(ki["Lb"])(this.swapQuoteInfo,this.slippage,this.activeTab).then(async t=>{var i,o;if(this.swapSubmitInfo=t,this.swapInfo={...t.swapInfo,fromToken:{...this.fromToken,...(null===t||void 0===t||null===(i=t.swapInfo)||void 0===i?void 0:i.fromToken)||{}},toToken:{...this.toToken,...(null===t||void 0===t||null===(o=t.swapInfo)||void 0===o?void 0:o.toToken)||{}}},this.swapInfo.gasValue=t.gasValue,this.swapInfo.swapRouterPath=this.swapRouterPath,this.swapInfo.subTxs=t.subTxs,this.loadingSwap=!1,e){var n,s;let e=(null===(n=window)||void 0===n||null===(n=n._tw_)||void 0===n||null===(s=n.appGetFreePay)||void 0===s?void 0:s.call(n))||!1;e=e&&"false"!==e,e?this.submitSwap():this.dialogVisibleSwap=!0}}).catch(e=>{this.loadingSwap=!1,this.$f.handleError(e)}),this.getNativeTokenPrice(),this.getGasPrice());else this.$dialog.alert({title:this.$t("tips"),message:this.checkAmountMessage(),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},async submitSwap(e=this.swapSubmitInfo){try{if("solana"===this.chain)return void this.submitSolanaSwap();if("ton"===this.chain)return void this.submitTonSwap();if("sui"===this.chain)return void this.submitSuiSwap();this.loadingConfirmSwap=!0,this.loadingSwap=!0,console.log("swapSubmitInfo",e);let t=await e.swapCallStatic();console.log("swapCallStaticResult",t.toString());let i=e.swapInfo,o=!(i.fromToken.isWrapper&&i.toToken.isETH||i.toToken.isWrapper&&i.fromToken.isETH);console.log("isSwap",o);let n={from_address:i.fromToken.address,from_symbol:i.fromToken.symbol,from_amount:Number(Ht["d"].formatUnits(i.fromTokenAmount||0,i.fromToken.decimals)),to_address:i.toToken.address,to_symbol:i.toToken.symbol,to_amount:Number(Ht["d"].formatUnits(i.toTokenAmount||0,i.toToken.decimals)),chain:this.netId,transaction:"",wallet_address:this.$store.state.currentAccount},s={};"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||(console.log("set swapMode",this.swapMode||"fast"),this.$f.setSwapSendType(this.swapMode||"fast")),e.swap().then(t=>{var a,l,r,c,d,m;(console.warn("swap confirm time end",this.$f.formatDate(Date.now())),console.log("---confirm transaction---",t),this.swapInfo.transaction=t.hash,Object(ki["Cb"])({chain:this.netId,destination:"wallet rpc",type:10,tx_hash:t.hash,status:1,wallet:this.$store.state.currentAccount,out_token:n.to_address,out_amount:Number(Ht["d"].formatUnits(i.toTokenAmount||0,i.toToken.decimals)),in_token:n.from_address,in_amount:Number(Ht["d"].formatUnits(i.fromTokenAmount||0,i.fromToken.decimals))}),o)&&(n.transaction=t.hash,s={time:parseInt(Date.now()/1e3),id:n.transaction,chain:this.netId,transaction:t.hash,from_address:n.from_address,from_price_eth:0,from_price_usd:(null===(r=this.swapQuoteInfo)||void 0===r?void 0:r.from_price)||0,from_symbol:i.fromToken.symbol,from_amount:Number(Ht["d"].formatUnits(i.fromTokenAmount||0,i.fromToken.decimals)),to_address:n.to_address,to_price_eth:0,to_price_usd:(null===(c=this.swapQuoteInfo)||void 0===c?void 0:c.to_price)||0,to_symbol:i.toToken.symbol,to_amount:Number(Ht["d"].formatUnits(i.toTokenAmount||0,i.toToken.decimals)),is_merged:0,isERC314:(null===e||void 0===e?void 0:e.isERC314)||!1,isFourMeme:(null===e||void 0===e?void 0:e.isFourMeme)||!1,isSunPump:(null===e||void 0===e?void 0:e.isSunPump)||0,isDyorswapfun:(null===e||void 0===e?void 0:e.isDyorswapfun)||!1,isXflapswap:(null===e||void 0===e?void 0:e.isXflapswap)||!1,wallet_address:this.$store.state.currentAccount,from_address_logo_url:null===(d=this.fromToken)||void 0===d?void 0:d.logo_url,to_address_logo_url:null===(m=this.toToken)||void 0===m?void 0:m.logo_url},this.initTxs.unshift(s));this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.fromAmount="",this.toAmount="",null===(a=this.$refs)||void 0===a||null===(a=a.percentStep)||void 0===a||null===(l=a.handleClick)||void 0===l||l.call(a,0),this.dialogVisibleSwap=!1;try{Object(ki["h"])(e.subTxs)}catch(u){console.log(u)}return t.wait()}).then(t=>{var i,n,a,l;(console.warn("swap transaction end",this.$f.formatDate(Date.now())),console.log("----transaction---",t),1===t.status)?(Object(ki["Mb"])({chain:this.netId,tx_hash:t.transactionHash,to:(null===t||void 0===t||null===(i=t.to)||void 0===i||null===(n=i.toLowerCase)||void 0===n?void 0:n.call(i))||"",status:100}),this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.getTokenDetails(),this.getUserTokenList(),this.getAllowance(),o&&(this.initTxs.forEach(e=>{var i,o,n;e.transaction===t.transactionHash&&(e.is_merged=1,e.time=parseInt(Date.now()/1e3),(null!==e&&void 0!==e&&e.isERC314||null!==e&&void 0!==e&&e.isFourMeme||(null===e||void 0===e?void 0:e.isSunPump)>0||null!==e&&void 0!==e&&e.isDyorswapfun||null!==e&&void 0!==e&&e.isXflapswap)&&(this.ERC314SwapTxs=[e,...null===(i=this.ERC314SwapTxs)||void 0===i||null===(o=i.slice)||void 0===o||null===(o=o.call(i))||void 0===o||null===(n=o.filter)||void 0===n?void 0:n.call(o,e=>e.transaction!==t.transactionHash)]))}),null!==e&&void 0!==e&&e.isERC314||null!==e&&void 0!==e&&e.isFourMeme||null!==e&&void 0!==e&&e.isSunPump||null!==e&&void 0!==e&&e.isDyorswapfun||null!==e&&void 0!==e&&e.isXflapswap||this.getUserAllTxs(s)),this.getGasBalance()):(Object(ki["Mb"])({chain:this.netId,tx_hash:t.transactionHash,status:-100,to:(null===t||void 0===t||null===(a=t.to)||void 0===a||null===(l=a.toLowerCase)||void 0===l?void 0:l.call(a))||""}),this.$notify({type:"danger",message:this.$t("tradeFail")}),o&&(this.initTxs=this.initTxs.filter(e=>e.transaction!==t.transactionHash)));return this.$f.setSwapSendType(""),t}).catch(e=>{console.log("err",e),this.$refs.countDown.reset(),this.loadingSwap=!1,this.loadingConfirmSwap=!1,o&&this.getUserAllTxs(),this.$f.handleError(e,"swap"),this.$f.setSwapSendType("")})}catch(t){this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(t,"swap"),this.$f.setSwapSendType("")}},async submitSolanaSwap(){try{var e;this.loadingConfirmSwap=!0,this.loadingSwap=!0;let t=(null===(e=this.baseToken)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd)||0,i=!this.solanaSwapBaseTokenPrice||new ro.a(t).minus(this.solanaSwapBaseTokenPrice).times(100).div(this.solanaSwapBaseTokenPrice).abs().gt(this.solanaSlippage);console.log("price",t,this.solanaSwapBaseTokenPrice,i),i&&await this.quoteSolana(this.isAmount,"solana");let o=this.swapInfo,n={time:parseInt(Date.now()/1e3),from_address:o.fromToken.address,from_symbol:o.fromToken.symbol,from_amount:Number(Ht["d"].formatUnits(o.fromTokenAmount||0,o.fromToken.decimals)),to_address:o.toToken.address,to_symbol:o.toToken.symbol,to_amount:Number(Ht["d"].formatUnits(o.toTokenAmount||0,o.toToken.decimals)),chain:this.netId,transaction:"",wallet_address:this.$store.state.currentAccount},s={};setTimeout(()=>{this.dialogVisibleSwap||(this.loadingSwap=!1,this.loadingConfirmSwap=!1)},6e3);let a=!0;Object(Vo["k"])(this.solanaQuoteResponse).then(e=>{var t,i,l,r;(console.warn("swap confirm time end",this.$f.formatDate(Date.now())),console.log("---confirm transaction---",e),this.swapInfo.transaction=e.hash,Object(ki["Cb"])({chain:"solana",destination:"true"===localStorage.solanaProtection?"v1/blxrsol/sendSolTx":"/ave_nodes/rpc/solana/sendFastSwapTx",type:10,tx_hash:e.hash,status:1,wallet:this.$store.state.currentAccount,out_token:n.to_address,out_amount:o.toAmount,in_token:n.from_address,in_amount:o.fromAmount}),a)&&(n.transaction=e.hash,s={time:parseInt(Date.now()/1e3),id:n.transaction,chain:this.netId,transaction:e.hash,from_address:n.from_address,from_price_eth:0,from_price_usd:"",from_symbol:o.fromToken.symbol,from_amount:o.fromAmount,to_address:n.to_address,to_price_eth:0,to_price_usd:"",to_symbol:o.toToken.symbol,to_amount:o.toAmount,is_merged:0,wallet_address:this.$store.state.currentAccount||"",from_address_logo_url:o.fromToken.logo_url,to_address_logo_url:o.toToken.logo_url},this.solanaTxs.unshift(s),this.solanaTxs=null===(l=this.solanaTxs)||void 0===l||null===(r=l.slice)||void 0===r?void 0:r.call(l,0,500));return this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.fromAmount="",this.toAmount="",null===(t=this.$refs)||void 0===t||null===(t=t.percentStep)||void 0===t||null===(i=t.handleClick)||void 0===i||i.call(t,0),this.dialogVisibleSwap=!1,e.wait()}).then(e=>{if(console.warn("swap transaction end",this.$f.formatDate(Date.now())),console.log("----transaction---",e),e){var t;Object(ki["Mb"])({chain:"solana",tx_hash:null===e||void 0===e||null===(t=e.transaction)||void 0===t?void 0:t.signatures[0],status:100});let[i,n]=Object(Vo["j"])(e,o.fromToken.address,o.toToken.address);this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.getTokenDetails(),this.getUserTokenList(),a&&(this.solanaTxs=this.solanaTxs.slice().map(t=>{var o;let s={...t};return t.transaction===(null===e||void 0===e||null===(o=e.transaction)||void 0===o?void 0:o.signatures[0])&&(s.is_merged=1,s.time=null===e||void 0===e?void 0:e.blockTime,i&&Number(i)>0&&(s.from_amount=i),n&&Number(n)>0&&(s.to_amount=n)),s}))}else this.$notify({type:"danger",message:this.$t("tradeFail")}),a&&(this.solanaTxs=this.solanaTxs.filter(t=>t.transaction!==e.transactionHash));return this.$f.setSwapSendType(""),e}).catch(e=>{if(console.warn("solana error",e),"Timeout"===(e||(null===e||void 0===e?void 0:e.message)))this.solanaTxs=this.solanaTxs.map(e=>e.transaction===n.transaction?{...e,status:"timeout"}:{...e});else if("Swap fail"===(e||(null===e||void 0===e?void 0:e.message)))this.solanaTxs=this.solanaTxs.map(e=>e.transaction===n.transaction?{...e,status:"fail"}:{...e});else{var t,i;this.solanaTxs=(null===(t=this.solanaTxs)||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.call(t,e=>e.transaction!==n.transaction))||[]}this.solanaSwapBaseTokenPrice=0,this.$refs.countDown.reset(),this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$f.setSwapSendType("")})}catch(t){this.solanaSwapBaseTokenPrice=0,this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(t,"solana"),this.$f.setSwapSendType("")}},async submitTonSwap(){try{var e,t,i,o;this.loadingConfirmSwap=!0,this.loadingSwap=!0;let n=(null===(e=this.baseToken)||void 0===e||null===(e=e.token)||void 0===e?void 0:e.current_price_usd)||0,s=!this.tonSwapBaseTokenPrice||new ro.a(n).minus(this.tonSwapBaseTokenPrice).times(100).div(this.tonSwapBaseTokenPrice).abs().gt(this.tonSlippage);console.log("price",n,this.solanaSwapBaseTokenPrice,s),s&&await this.quoteTon(this.isAmount,"ton");let a=this.swapInfo,l={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:null===a||void 0===a?void 0:a.fromAmount,from_decimals:null===a||void 0===a?void 0:a.fromToken.decimals,to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:null===a||void 0===a?void 0:a.toAmount,to_decimals:null===a||void 0===a?void 0:a.toToken.decimals,chain:"ton",transaction:"",wallet_address:this.$store.state.currentAccount};console.log("txInfo",l);let r={};setTimeout(()=>{this.dialogVisibleSwap||(this.loadingSwap=!1,this.loadingConfirmSwap=!1)},6e3);let c=!0;console.log("tonQuoteResponse",this.tonQuoteResponse,l);let d=[{address:null===(t=this.tonQuoteResponse)||void 0===t?void 0:t.to,amount:null===(i=this.tonQuoteResponse)||void 0===i?void 0:i.totalTransferAmount,payload:null===(o=this.tonQuoteResponse)||void 0===o?void 0:o.payload}],m=await Object(Ao["e"])(l);m&&d.push(m),Object(Ao["h"])(d).then(e=>{var t,i,o,n;(console.warn("swap confirm time end",this.$f.formatDate(Date.now())),console.log("---confirm transaction---",e),this.swapInfo.transaction=e.hash,Object(ki["Cb"])({chain:"ton",destination:"wallet rpc",type:10,tx_hash:e.hash,status:1,wallet:this.$store.state.currentAccount,out_token:l.to_address,out_amount:a.toAmount,in_token:l.from_address,in_amount:a.fromAmount}),c)&&(l.transaction=e.hash,r={time:parseInt(Date.now()/1e3),id:l.transaction,chain:this.netId,transaction:e.hash,from_address:l.from_address,from_price_eth:0,from_price_usd:"",from_symbol:a.fromToken.symbol,from_amount:a.fromAmount,to_address:l.to_address,to_price_eth:0,to_price_usd:"",to_symbol:a.toToken.symbol,to_amount:a.toAmount,is_merged:0,wallet_address:this.$store.state.currentAccount||"",from_address_logo_url:a.fromToken.logo_url,to_address_logo_url:a.toToken.logo_url},this.tonTxs.unshift(r),this.tonTxs=null===(o=this.tonTxs)||void 0===o||null===(n=o.slice)||void 0===n?void 0:n.call(o,0,500));return this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.fromAmount="",this.toAmount="",null===(t=this.$refs)||void 0===t||null===(t=t.percentStep)||void 0===t||null===(i=t.handleClick)||void 0===i||i.call(t,0),this.dialogVisibleSwap=!1,e.wait()}).then(async e=>{if(console.warn("swap transaction end",this.$f.formatDate(Date.now())),console.log("----transaction---",e),e){Object(ki["Mb"])({chain:"ton",tx_hash:null===e||void 0===e?void 0:e.hash,status:100}),this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.getTokenDetails(),this.getUserTokenList();let t=await Object(Ao["f"])(e);c&&(this.tonTxs=this.tonTxs.slice().map(i=>{let o={...i};return i.transaction===(null===e||void 0===e?void 0:e.hash)&&(o.is_merged=1,o.time=null===e||void 0===e?void 0:e.timestamp,o.event_id=null===e||void 0===e?void 0:e.event_id,o={...o,...t}),o}))}else Object(ki["Mb"])({chain:"ton",tx_hash:null===e||void 0===e?void 0:e.hash,status:-100}),this.$notify({type:"danger",message:this.$t("tradeFail")}),c&&(this.tonTxs=this.tonTxs.filter(t=>t.transaction!==e.hash));return this.$f.setSwapSendType(""),e}).catch(e=>{if(console.warn("ton error",e),"Timeout"===(e||(null===e||void 0===e?void 0:e.message)))this.tonTxs=this.tonTxs.map(e=>e.transaction===l.transaction?{...e,status:"timeout"}:{...e});else if("Swap fail"===(e||(null===e||void 0===e?void 0:e.message)))this.tonTxs=this.tonTxs.map(e=>e.transaction===l.transaction?{...e,status:"fail"}:{...e});else{var t,i;this.tonTxs=(null===(t=this.tonTxs)||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.call(t,e=>e.transaction!==l.transaction))||[]}this.tonSwapBaseTokenPrice=0,this.$refs.countDown.reset(),this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$f.setSwapSendType("")})}catch(n){this.tonSwapBaseTokenPrice=0,this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(n,"solana"),this.$f.setSwapSendType("")}},async submitSuiSwap(){try{this.loadingConfirmSwap=!0,this.loadingSwap=!0;let e=this.swapInfo,t={from_address:e.fromToken.address,from_symbol:e.fromToken.symbol,from_amount:null===e||void 0===e?void 0:e.fromAmount,from_decimals:null===e||void 0===e?void 0:e.fromToken.decimals,to_address:e.toToken.address,to_symbol:e.toToken.symbol,to_amount:null===e||void 0===e?void 0:e.toAmount,to_decimals:null===e||void 0===e?void 0:e.toToken.decimals,chain:"sui",transaction:"",wallet_address:this.$store.state.currentAccount};console.log("txInfo",t);let i={};setTimeout(()=>{this.dialogVisibleSwap||(this.loadingSwap=!1,this.loadingConfirmSwap=!1)},6e3);let o=!0;console.log("slippage",this.tonSlippage);let n="";Object(ki["k"])({quoteResponse:this.suiQuoteResponse,slippage:new ro.a(this.tonSlippage).div(100).toNumber()}).then(e=>(console.log("res",e),n=(null===e||void 0===e?void 0:e.remark)||"",_o((null===e||void 0===e?void 0:e.tx)||e))).then(s=>{if(console.log("sui_signAndExecuteTransactionBlock",s),null!==s&&void 0!==s&&s.digest){var a,l,r,c;if(this.swapInfo.transaction=s.digest,o)t.transaction=s.digest,Object(ki["Cb"])({chain:"sui",destination:"wallet rpc",type:10,tx_hash:s.digest,status:1,wallet:this.$store.state.currentAccount,out_token:t.to_address,out_amount:e.toAmount,in_token:t.from_address,in_amount:e.fromAmount,remark:n}),i={time:parseInt(Date.now()/1e3),id:t.transaction,chain:"sui",transaction:s.digest,from_address:t.from_address,from_price_eth:0,from_price_usd:this.swapTokenPrice[0]||0,from_symbol:e.fromToken.symbol,from_amount:e.fromAmount,to_address:t.to_address,to_price_eth:0,to_price_usd:this.swapTokenPrice[1]||0,to_symbol:e.toToken.symbol,to_amount:e.toAmount,is_merged:0,wallet_address:this.$store.state.currentAccount||"",from_address_logo_url:e.fromToken.logo_url,to_address_logo_url:e.toToken.logo_url},this.suiTxs.unshift(i),this.suiTxs=null===(r=this.suiTxs)||void 0===r||null===(c=r.slice)||void 0===c?void 0:c.call(r,0,500);return this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.fromAmount="",this.toAmount="",null===(a=this.$refs)||void 0===a||null===(a=a.percentStep)||void 0===a||null===(l=a.handleClick)||void 0===l||l.call(a,0),this.dialogVisibleSwap=!1,s.wait()}return Promise.reject("Swap fail")}).then(e=>{if(console.log("res",e),e.digest){Object(ki["Mb"])({chain:"sui",tx_hash:null===e||void 0===e?void 0:e.digest,status:100}),this.$notify({type:"success",message:this.$t("tradeSuccess")}),this.getTokenDetails(),this.getUserTokenList();let i=Object(ki["Ib"])({txInfo:t,balanceChanges:(null===e||void 0===e?void 0:e.balanceChanges)||[]});return o?this.suiTxs=this.suiTxs.slice().map(t=>{let o={...t};return t.transaction===(null===e||void 0===e?void 0:e.digest)&&(o.is_merged=1,o.time=(null===e||void 0===e?void 0:e.timestampMs)||Date.now(),o.event_id=null===e||void 0===e?void 0:e.event_id,o={...o,...i}),o}):(Object(ki["Mb"])({chain:"sui",tx_hash:null===e||void 0===e?void 0:e.digest,status:-100}),this.$notify({type:"danger",message:this.$t("tradeFail")}),o&&(this.suiTxs=this.suiTxs.filter(t=>t.transaction!==e.hash))),this.$f.setSwapSendType(""),e}}).catch(e=>{var i,o;/'Timeout'/i.test(e||(null===e||void 0===e?void 0:e.message)||"")?this.suiTxs=this.suiTxs.map(e=>e.transaction===t.transaction?{...e,status:"timeout"}:{...e}):this.suiTxs=(null===(i=this.suiTxs)||void 0===i||null===(o=i.filter)||void 0===o?void 0:o.call(i,e=>e.transaction!==t.transaction))||[];this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$refs.countDown.reset(),this.$f.setSwapSendType("")})}catch(e){this.loadingSwap=!1,this.loadingConfirmSwap=!1,this.$f.handleError(e,"solana"),this.$f.setSwapSendType("")}},checkAmount(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;let e=this.fromToken.balance||0,t=(this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address,i=(this.isFourMeme||this.isFlap)&&this.token2.address!==wi["k"],o=this.isSunPump>0&&this.token2.address!==wi["k"];if("ton"===this.chain){var n,s,a;let e=(null===(n=this.tonQuoteResponse)||void 0===n?void 0:n.totalTransferAmount)||0,t=(null===(s=this.userBalanceTokens)||void 0===s||null===(a=s.find)||void 0===a||null===(a=a.call(s,e=>e.address===wi["k"]))||void 0===a?void 0:a.initBalance)||0;if(e&&new ro.a(e).gt(t))return!1}return!(0===Number(e)||Number(e)<Number(this.fromAmount)||""===this.$store.state.wallet||"0"===String(this.fromAmount)||this.token1.address===this.token2.address||(this.isERC314||this.isDyorswapfun||this.isXflapswap)&&this.token2.address!==wi["k"]||t||i||o)},checkAmountMessage(){var e,t,i,o;let n=this.fromToken.balance||0,s=(this.isPump||this.isMoonshot)&&"So11111111111111111111111111111111111111112"!==this.token2.address,a=(this.isFourMeme||this.isFlap)&&this.token2.address!==wi["k"],l=this.isSunPump>0&&this.token2.address!==wi["k"];if(!this.$store.state.currentAccount)return this.$t("pConnectWallet");if(!(!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(i=window)&&void 0!==i&&i.tronWeb||null!==(o=window)&&void 0!==o&&null!==(o=o.mytonwallet)&&void 0!==o&&o.tonconnect||So()))return this.$t("observeAddressNotSwap");if((this.isERC314||this.isDyorswapfun||this.isXflapswap)&&this.token2.address!==wi["k"]||s||a||l)return this.$t("ERC314Tips");if(0===Number(n)||Number(n)<Number(this.fromAmount)||!this.$store.state.currentAccount)return this.$t("insufficientBalance");if("0"===String(this.fromAmount))return this.$t("AmountCannotBeZero");if("ton"===this.chain){var r,c,d;let e=(null===(r=this.tonQuoteResponse)||void 0===r?void 0:r.totalTransferAmount)||0,t=(null===(c=this.userBalanceTokens)||void 0===c||null===(d=c.find)||void 0===d||null===(d=d.call(c,e=>e.address===wi["k"]))||void 0===d?void 0:d.initBalance)||0;if(e&&new ro.a(e).gt(t))return this.$t("tonInsufficientBalance")}},getNativeTokenPrice(){var e,t,i,o;if(this.$store.getters.netId!==(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain))return;let n=this.$store.getters.netId||(null===(i=this.$f.getAddressAndChainFromId(null===(o=this.$route.params)||void 0===o?void 0:o.id))||void 0===i?void 0:i.chain)||"";Object(ki["Q"])(n).then(e=>{var t;this.nativePrice=e;let i=(null===(t=this.gasSetting)||void 0===t?void 0:t[n])||{};this.gasSetting={...this.gasSetting,[n]:{...i,nativePrice:e}},$o["a"].set("gasSetting",this.gasSetting)})},getKlineHistory(e){var t,i;return Object(ki["L"])(e,"1",(null===(t=this.$f.getAddressAndChainFromId(null===(i=this.$route.params)||void 0===i?void 0:i.id))||void 0===t?void 0:t.chain)||"").then(e=>{var t;let i=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];if(this.dataX=i.map(e=>e.time),this.dataY=i.map(e=>e.close),"solana"===this.chain){let e=i[i.length-2],t=i[i.length-1],o=new ro.a((null===e||void 0===e?void 0:e.high)||0).minus((null===e||void 0===e?void 0:e.low)||0).div((null===e||void 0===e?void 0:e.low)||1),n=new ro.a((null===t||void 0===t?void 0:t.high)||0).minus((null===t||void 0===t?void 0:t.low)||0).div((null===t||void 0===t?void 0:t.low)||1),s=ro.a.max(2,ro.a.min(9,o.plus(n).times(100).div(2)));this.solanaPriceChg={solanaAutoSlippage:s,k0_price_chg:o,k1_price_chg:n},s.gte(2)&&(this.solanaSlippage=localStorage.solanaSlippage||s.toFixed(0)),o.gt(.1)&&n.gt(.1)&&(this.isHotToken=!0),this.getKlineTime=Date.now()}return Promise.resolve(e)})},updateKline(e){var t;let i=null===(t=this.token1)||void 0===t?void 0:t.address;if(i){let t=this.dataX[this.dataX.length-1],o=this.dataY[this.dataY.length-1];e.from_address===i?o=e.from_price_usd:e.to_address===i&&(o=e.to_price_usd);let n=parseInt(t/60),s=parseInt(e.time/60);n===s?this.dataY[this.dataY.length-1]=o:n<s&&(this.dataY=[...this.dataY,o].slice(-10),this.dataX=[...this.dataX,Number(e.time)].slice(-10))}},getUserAllTxs(e=null){let t=this.$store.state.currentAccount;t&&(this.txsLoading=!0,Object(ki["pb"])().then(t=>{var i,o,n,s;let a=Array.isArray(t)?t:[],l=e&&!(null!==a&&void 0!==a&&null!==(i=a.some)&&void 0!==i&&i.call(a,t=>t.transaction===e.transaction))&&Date.now()-1e3*e.time<6e5;l&&setTimeout(()=>{this.getUserAllTxs(e)},1e4),a.length>0&&(this.initTxs=(null===a||void 0===a?void 0:a.map(e=>e.id?{...e}:{...e,id:e.transaction}))||[]),!l||null!==(o=(n=this.initTxs).some)&&void 0!==o&&o.call(n,t=>t.transaction===e.transaction)||this.initTxs.unshift(e);let r=[],c={};null===a||void 0===a||null===(s=a.forEach)||void 0===s||s.call(a,e=>{c[e.from_address]||(r.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),c[e.from_address]=!0),c[e.to_address]||(r.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),c[e.to_address]=!0)}),this.txsTokens=r,sessionStorage.txsTokens=JSON.stringify(r||[])}).finally(()=>{this.txsLoading=!1}))},alertTips(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then(()=>{})},alertSupportChainTips(e,t=!1){var i;t?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(i=window)&&void 0!==i&&null!==(i=i._tw_)&&void 0!==i&&i.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then(()=>{var e,t;null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appSwitchChain&&(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||t.appSwitchChain())}):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain(){if("Swap"===this.$route.name){var e,t,i,o,n,s,a,l;let r=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",c=Object.keys(wi["x"]),d=$o["a"].get("chainConfig",wi["l"])||{},m=null===c||void 0===c||null===(i=c.map)||void 0===i||null===(i=i.call(c,e=>{var t;return null===d||void 0===d||null===(t=d[e])||void 0===t?void 0:t.name}))||void 0===i||null===(o=i.join)||void 0===o?void 0:o.call(i,", "),u=null===d||void 0===d||null===(n=d[r])||void 0===n?void 0:n.name;if("solana"===r||"ton"===r||"sui"===r)return!0;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:m}),!0),!1;if(r&&(null===c||void 0===c||null===(s=c.includes)||void 0===s||!s.call(c,r)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:u,chains:m}),!0),!1;if((null===(a=this.$f.getAddressAndChainFromId(null===(l=this.$route.params)||void 0===l?void 0:l.id))||void 0===a?void 0:a.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},getGasPrice(){var e,t,i,o,n;let s=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"";"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(i=window)&&void 0!==i&&null!==(i=i.trustwallet)&&void 0!==i&&i.solana&&(null===(o=window.ethereum)||void 0===o||null===(o=o.address)||void 0===o||null===(n=o.startsWith)||void 0===n||!n.call(o,"0x"))&&window.ethereum.address)&&(s="solana"),"solana"!==s&&"ton"!==s&&"tron"!==s&&Object(ki["H"])(s).then(e=>{var t;let i=e.toString();this.gasPrice=i;let o=(null===(t=this.gasSetting)||void 0===t?void 0:t[s])||{};this.gasSetting={...this.gasSetting,[s]:{...o,gasPrice:i}},$o["a"].set("gasSetting",this.gasSetting),console.log("gasPrice",i)}).catch(e=>{console.log(e),this.gasPrice="0"})},getPriceImpact(e){if(!Number(this.fromAmount)&&!Number(this.toAmount))return new ro.a(0);if(this.isERC314||null!==e&&void 0!==e&&e.isERC314)return new ro.a(0);let t=e.routerPath,i=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,o=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(i&&o){let t=e.from_price,n=e.to_price,s=Ht["d"].formatUnits(i.amount,i.decimals),a=Ht["d"].formatUnits(o.amount,o.decimals);return new ro.a(s).times(t).div(new ro.a(a).times(n)).minus(1).abs().times(100)}return new ro.a(0)},goAudit(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish(){2===this.selected&&this.token1.address!==this.token2.address&&(this.loadingConfirmSwap||this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset(){this.$refs.countDown.reset(),this.dialogVisibleSwap&&this.isApprove&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},appSwitchChain(e){var t,i;null!==(t=window)&&void 0!==t&&null!==(t=t._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(i=window)||void 0===i||null===(i=i._tw_)||void 0===i||i.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity(){var e;if(null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.openLp){var t,i,o,n;let e=$o["a"].get("chainConfig",wi["l"])||{},r=this.$store.getters.netId||(null===(t=this.$f.getAddressAndChainFromId(null===(i=this.$route.params)||void 0===i?void 0:i.id))||void 0===t?void 0:t.chain)||"",c=null===e||void 0===e?void 0:e[r],d=null===c||void 0===c?void 0:c.wmainWrapper,m=null===(o=e[r])||void 0===o?void 0:o.swaps,u=null===(n=this.baseToken)||void 0===n?void 0:n.pairs,h=u.find(e=>m.some(t=>t.name===e.amm&&t.router_address));if(h){var s;let e=h.token0_address===d?wi["k"]:h.token0_address,t=h.token1_address===d?wi["k"]:h.token1_address,i=h.amm;null===(s=window)||void 0===s||null===(s=s._tw_)||void 0===s||s.openLp(e,t,i)}else{var a,l;let e=this.tokenInfo.address||(null===(a=this.baseToken)||void 0===a||null===(a=a.token)||void 0===a?void 0:a.token)||"";e=e===d?wi["k"]:e,null===(l=window)||void 0===l||null===(l=l._tw_)||void 0===l||l.openLp(e,"","")}}},checkLimitAmount(){if("solana"===this.chain&&this.limitSolanaError)return!1;let e=0===this.activeTab?this.limitToken2:this.limitToken1;if(e.address===wi["k"]&&3===this.selected)return!1;let t=e.balance||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(i)||""===this.$store.state.wallet||"0"===String(i)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage(){var e,t,i;if("solana"===this.chain&&this.limitSolanaError)return this.$t("noSToken");let o=0===this.activeTab?this.limitToken2:this.limitToken1;if(o.address===wi["k"]&&3===this.selected)return this.$t("noSNativeToken");let n=o.balance||0,s=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?!this.$store.state.currentAccount||window.ethereum||null!==(e=window)&&void 0!==e&&e.solana||null!==(t=window.trustwallet)&&void 0!==t&&t.solana||null!==(i=window)&&void 0!==i&&i.tronWeb||So()?Number(0===n||Number(n)<Number(s)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(s)?this.$t("AmountCannotBeZero"):"":this.$t("observeAddressNotSwap"):this.$t("pConnectWallet")},getLimitAllowance(){let e=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===e.chain&&e.address){let t=e.chain||this.$store.getters.netId;if("solana"===t||"ton"===t)return;let i=wi["u"][t];this.loadingLimitAllowance=!0,Object(ki["f"])(e.address,i).then(e=>{this.limitAllowance=e.toString(),console.log("limitAllowance",this.limitAllowance)}).finally(()=>{this.loadingLimitAllowance=!1})}},getLimitOrder(e,t){if(this.$store.getters.netId){let i=this.limitToken1.chain||this.$store.getters.netId||"bsc";if("solana"===i)return void this.getSolanaLimitOrder(e,t);this.loadingGetLimitOrder=!0,Object(ki["N"])({chain:i}).then(e=>{this.limitOrders=e}).finally(()=>{setTimeout(()=>{this.loadingGetLimitOrder=!1},800)})}},getSolanaLimitOrder(e,t=1){if("solana"===this.$store.getters.netId)return this.loadingGetLimitOrder=!0,Promise.all([Object(ki["X"])({wallet:this.$store.state.currentAccount}),Object(ki["Y"])({wallet:this.$store.state.currentAccount}),Object(ki["Z"])({wallet:this.$store.state.currentAccount})]).then(async i=>{var o,n,s,a,l,r,c,d,m,u,h,p;console.log("getSolanaLimitOrder",i);let b=null===i||void 0===i||null===(o=i[0])||void 0===o||null===(n=o.map)||void 0===n?void 0:n.call(o,e=>{var t,i;return[(null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.inputMint)+"-solana",(null===e||void 0===e||null===(i=e.account)||void 0===i?void 0:i.outputMint)+"-solana"]}),v=null===i||void 0===i||null===(s=i[1])||void 0===s||null===(a=s.map)||void 0===a?void 0:a.call(s,e=>[(null===e||void 0===e?void 0:e.inputMint)+"-solana",(null===e||void 0===e?void 0:e.outputMint)+"-solana"]),f=null===i||void 0===i||null===(l=i[2])||void 0===l||null===(r=l.map)||void 0===r?void 0:r.call(l,e=>{var t,i;return[(null===e||void 0===e||null===(t=e.account)||void 0===t?void 0:t.inputMint)+"-solana",(null===e||void 0===e||null===(i=e.account)||void 0===i?void 0:i.outputMint)+"-solana"]}),g=Array.from(new Set([...null===b||void 0===b?void 0:b.flat(),...null===v||void 0===v?void 0:v.flat(),...null===f||void 0===f?void 0:f.flat()])),k=await Object(ki["nb"])(g).catch(async e=>(console.log(e),{})),w=(null===i||void 0===i||null===(c=i[2])||void 0===c||null===(d=c.map)||void 0===d?void 0:d.call(c,e=>{var t,i,o,n,s,a,l,r,c,d;let m=e.account,u=null===k||void 0===k||null===(t=k[m.inputMint+"-solana"])||void 0===t?void 0:t.decimal,h=null===k||void 0===k||null===(i=k[m.outputMint+"-solana"])||void 0===i?void 0:i.decimal;return{...e,...m,from_token:m.inputMint,from_token_symbol:null===(o=k[m.inputMint+"-solana"])||void 0===o?void 0:o.symbol,from_token_decimals:null===(n=k[m.inputMint+"-solana"])||void 0===n?void 0:n.decimal,from_token_price:null===(s=k[m.inputMint+"-solana"])||void 0===s?void 0:s.current_price_usd,to_token:m.outputMint,to_token_symbol:null===(a=k[m.outputMint+"-solana"])||void 0===a?void 0:a.symbol,to_token_decimals:null===(l=k[m.outputMint+"-solana"])||void 0===l?void 0:l.decimal,to_token_price:null===(r=k[m.outputMint+"-solana"])||void 0===r?void 0:r.current_price_usd,from_amount:new ro.a(m.oriInAmount||0).div(10**u).toFixed()||0,to_amount:new ro.a(m.oriOutAmount||0).div(10**h).toFixed()||0,id:e.publicKey,orderKey:e.publicKey,chain:"solana",created_at:0,state:"Pending",from_amount_used:new ro.a(m.oriInAmount||0).minus(m.inAmount||0).div(10**u).toFixed(),to_amount_used:new ro.a(m.oriOutAmount||0).minus(m.outAmount||0).div(10**h).toFixed(),percent:new ro.a(m.oriInAmount||0).minus(m.inAmount||0).div(m.oriInAmount||1).times(100).toFixed(),from_token_logo_url:null===(c=k[m.inputMint+"-solana"])||void 0===c?void 0:c.logo_url,to_token_logo_url:null===(d=k[m.outputMint+"-solana"])||void 0===d?void 0:d.logo_url,version:"v1"}}))||[],O=null===i||void 0===i||null===(m=i[0])||void 0===m||null===(u=m.map)||void 0===u?void 0:u.call(m,e=>{var t,i,o,n,s,a,l,r;return{...e,from_token:e.inputMint,from_token_symbol:null===(t=k[e.inputMint+"-solana"])||void 0===t?void 0:t.symbol,from_token_decimals:null===(i=k[e.inputMint+"-solana"])||void 0===i?void 0:i.decimal,from_token_price:null===(o=k[e.inputMint+"-solana"])||void 0===o?void 0:o.current_price_usd,to_token:e.outputMint,to_token_symbol:null===(n=k[e.outputMint+"-solana"])||void 0===n?void 0:n.symbol,to_token_decimals:null===(s=k[e.outputMint+"-solana"])||void 0===s?void 0:s.decimal,to_token_price:null===(a=k[e.outputMint+"-solana"])||void 0===a?void 0:a.current_price_usd,from_amount:Number(e.makingAmount)||0,to_amount:Number(e.takingAmount)||0,chain:"solana",from_amount_used:new ro.a(e.makingAmount||0).minus(e.remainingMakingAmount).toFixed(),to_amount_used:new ro.a(e.takingAmount||0).minus(e.remainingTakingAmount).toFixed(),percent:new ro.a(e.makingAmount||0).minus(e.remainingMakingAmount).div(e.makingAmount).times(100).toFixed(),from_token_logo_url:null===(l=k[e.inputMint+"-solana"])||void 0===l?void 0:l.logo_url,to_token_logo_url:null===(r=k[e.outputMint+"-solana"])||void 0===r?void 0:r.logo_url,id:e.orderKey,state:"Pending"}}),j=null===i||void 0===i||null===(h=i[1])||void 0===h||null===(p=h.map)||void 0===p?void 0:p.call(h,e=>{var t,i,o,n,s,a,l,r;return{...e,from_token:e.inputMint,from_token_symbol:null===(t=k[e.inputMint+"-solana"])||void 0===t?void 0:t.symbol,from_token_decimals:null===(i=k[e.inputMint+"-solana"])||void 0===i?void 0:i.decimal,from_token_price:null===(o=k[e.inputMint+"-solana"])||void 0===o?void 0:o.current_price_usd,to_token:e.outputMint,to_token_symbol:null===(n=k[e.outputMint+"-solana"])||void 0===n?void 0:n.symbol,to_token_decimals:null===(s=k[e.outputMint+"-solana"])||void 0===s?void 0:s.decimal,to_token_price:null===(a=k[e.outputMint+"-solana"])||void 0===a?void 0:a.current_price_usd,from_amount:Number(e.makingAmount)||0,to_amount:Number(e.takingAmount)||0,chain:"solana",from_amount_used:new ro.a(e.makingAmount||0).minus(e.remainingMakingAmount).toFixed(),to_amount_used:new ro.a(e.takingAmount||0).minus(e.remainingTakingAmount).toFixed(),percent:new ro.a(e.makingAmount||0).minus(e.remainingMakingAmount).div(e.makingAmount).times(100).toFixed(),from_token_logo_url:null===(l=k[e.inputMint+"-solana"])||void 0===l?void 0:l.logo_url,to_token_logo_url:null===(r=k[e.outputMint+"-solana"])||void 0===r?void 0:r.logo_url,id:e.orderKey,state:e.status}}),y=[...O,...w,...j],S=null===y||void 0===y?void 0:y.some(t=>t.orderKey===e),T=null===y||void 0===y?void 0:y.some(t=>t.orderKey===e&&"Cancelled"===t.status);return console.log("limitOrderList",y),e&&this.getSolanaLimitOrderTime<=30&&(0!==t&&!S||0===t&&!T)?(Uo&&(clearTimeout(Uo),Uo=null),new Promise(i=>{Uo=setTimeout(()=>{this.getSolanaLimitOrderTime+=5,this.getSolanaLimitOrder(e,t).then(e=>{i(e)})},5e3)})):(this.loadingGetLimitOrder=!1,this.limitOrders=null===y||void 0===y||null===(_=y.filter)||void 0===_?void 0:_.call(y,i=>!(i.orderKey===e&&"Pending"===i.state&&0===t)),this.getSolanaLimitOrderTime=0,y);var _}).catch(()=>{this.getSolanaLimitOrderTime=0,this.loadingGetLimitOrder=!1})},refreshLimit(e,t){"solana"===e.chain?this.getSolanaLimitOrder(e.publicKey,0).then(i=>{console.log("refreshLimit",i),t[e.publicKey]=!1,e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info()}):(this.getLimitOrder(),e.from_token===wi["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info()))},async approveLimit(){if(!this.supportChainLimit())return;this.loadingLimitApprove=!0;let e=this.limitToken1.chain||this.$store.getters.netId||"bsc",t=wi["u"][e],i=0===this.activeTab?this.limitToken2:this.limitToken1;"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast"),Object(ki["i"])(i.address,t).then(e=>e.wait()).then(e=>{console.log(e),this.getLimitAllowance(),this.getGasBalance()}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingLimitApprove=!1,this.$f.setSwapSendType("")})},supportChainLimit(){if("Swap"===this.$route.name){var e,t,i,o,n,s,a,l;let c=this.$store.getters.netId||(null===(e=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id))||void 0===e?void 0:e.chain)||"",d=Object.keys(wi["u"]).concat("solana"),m=$o["a"].get("chainConfig",wi["l"])||{},u=d.map(e=>m[e].name).join(", ");if(null!==(i=this.$store.state.currentAccount)&&void 0!==i&&null!==(o=i.startsWith)&&void 0!==o&&o.call(i,"T")||c&&(null===d||void 0===d||null===(n=d.includes)||void 0===n||!n.call(d,c)))return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:u}),position:"top"}),!1;var r;if(console.warn(null===(s=this.$route.params)||void 0===s?void 0:s.id,this.$store.getters.netId),(null===(a=this.$f.getAddressAndChainFromId(null===(l=this.$route.params)||void 0===l?void 0:l.id))||void 0===a?void 0:a.chain)!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(r=window)&&void 0!==r&&null!==(r=r._tw_)&&void 0!==r&&r.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then(()=>{var e,t;null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appSwitchChain&&(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||t.appSwitchChain())}),!1}return!0},onLimitSubmit(){try{if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;0!==this.selected&&1!==this.selected&&3!==this.selected||(this.isLimitApprove||3===this.selected?this.openConfirmLimit():this.approveLimit())}catch(e){console.log(e)}},openConfirmLimit(){let e=0===this.activeTab?this.limitToken2:this.limitToken1,t=0===this.activeTab?this.limitToken1:this.limitToken2,i=0===this.activeTab?this.limitAmount2:this.limitAmount1,o=0===this.activeTab?this.limitAmount1:this.limitAmount2,n=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals;if(e.address===wi["k"]){let e=window.navigator.userAgent;if(e.includes("OSType/2")){let t=e.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),i=Io.lte(t,"2.4.0")&&"1.0.6"!==t;if(i)return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitOrderTips1"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}}let s=new ro.a(this.limitSlippage||0);3===this.selected&&(s=new ro.a(this.noGasSlippage||0)),s=new ro.a(1).minus(s.div(100));let a=new ro.a(wi["v"][e.chain||this.$store.getters.netId]||0).times(5);a=a.gte(3)?a.gte(50)?new ro.a(50):a:new ro.a(3);let l=new ro.a(i).times(e.price).gte(a.times(.999));if(!l){let e=this.$t("minimumTransactionAmount",{n:a.toFixed()});return 3===this.selected&&(e=this.$t("minimumTransactionNoGasAmount",{n:a.toFixed()})),void this.$dialog.alert({title:this.$t("tips"),message:e,confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}let r=this.limitToken1.chain||this.$store.getters.netId;this.limitInfo={chain:r,orderType:3===this.selected?2:this.selected,fromToken:e,toToken:t,fromAmount:i,toAmount:o,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:"solana"===r?this.limitSolanaPriceU:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new ro.a(o||0).times(s).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${n}})?`))[0],slippage:3===this.selected?this.noGasSlippage:this.limitSlippage},"solana"===r?(this.loadingLimit=!0,Object(ki["mb"])([this.limitInfo.targetToken+"-"+r]).then(e=>{var t,i;let o=(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.current_price_usd)||(null===(i=this.limitInfo)||void 0===i||null===(i=i.targetTokenInfo)||void 0===i?void 0:i.current_price_usd);var n,s,a,l,r,c,d;if(0===this.activeTab&&(console.log("price",o,null===(n=this.limitInfo)||void 0===n?void 0:n.targetLimitPrice),new ro.a(o).lt(null===(s=this.limitInfo)||void 0===s?void 0:s.targetLimitPrice)))return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitPriceTips",{p1:this.$f.formatNumber2(null===(a=this.limitInfo)||void 0===a?void 0:a.targetLimitPrice),p2:this.$f.formatNumber2(o)}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});if(1===this.activeTab&&(console.log("price",o,null===(l=this.limitInfo)||void 0===l?void 0:l.targetLimitPrice,new ro.a(o).gt(null===(r=this.limitInfo)||void 0===r?void 0:r.targetLimitPrice)),new ro.a(o).gt(null===(c=this.limitInfo)||void 0===c?void 0:c.targetLimitPrice)))return void this.$dialog.alert({title:this.$t("tips"),message:this.$t("limitPriceTips1",{p1:this.$f.formatNumber2(null===(d=this.limitInfo)||void 0===d?void 0:d.targetLimitPrice),p2:this.$f.formatNumber2(o)}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});this.dialogVisibleLimit=!0,this.loadingLimit=!1}).catch(e=>{console.log(e),this.$f.handleError(e)}).finally(()=>{this.loadingLimit=!1})):this.dialogVisibleLimit=!0},submitLimitOrder(){if(!this.supportChainLimit())return;let e=new ro.a(this.limitSlippage||0);3===this.selected&&(e=new ro.a(this.noGasSlippage||0)),e=new ro.a(1).minus(e.div(100));let t=this.$store.state.currentAccount;console.log("maker",t);let i=0===this.activeTab?this.limitToken2:this.limitToken1,o=0===this.activeTab?this.limitToken1:this.limitToken2,n=0===this.activeTab?this.limitAmount2:this.limitAmount1,s=0===this.activeTab?this.limitAmount1:this.limitAmount2,a=i.address,l=Ht["d"].parseUnits(new ro.a(n||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${i.decimals}})?`))[0],i.decimals).toString(),r=o.address,c=Ht["d"].parseUnits(new ro.a(s||0).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o.decimals}})?`))[0],o.decimals).toString(),d=Ht["d"].parseUnits(new ro.a(s||0).times(e).toFixed().match(new RegExp(`[0-9]*(\\.[0-9]{0,${o.decimals}})?`))[0],o.decimals).toString(),m=this.limitToken1.address,u=this.limitPrice;this.loadingConfirmLimit=!0;let h=3===this.selected?2:this.selected,p=this.triggerPrice,b=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";if(3===this.selected){let e={chain:this.$store.getters.netId,from_token:a,from_amount:l,to_token:r,to_amount:c,maker:t,to_min_amount:d,target_token:m,target_limit_price:"0",trigger_price:"0",current_price:"0",order_type:2,open_time:0};Object(ki["g"])(e).then(e=>{console.log("appExchangeNoGas result",e),e?setTimeout(()=>{this.loadingConfirmLimit=!1,this.dialogVisibleLimit=!1,this.$toast.success(this.$t("transactionsSubmitted")),this.limitAmount1="",this.limitAmount2="",this.getNoGasList(!0)},1e3):(this.loadingConfirmLimit=!1,this.$toast({message:this.$t("fail"),type:"fail"}))}).catch(e=>{console.log(e),this.loadingConfirmLimit=!1,this.$f.handleError(e)})}else{if("solana"===this.chain){let e=this.solanaLimitExpiredTime?Number(parseInt(Date.now()/1e3)+parseInt(this.solanaLimitExpiredTime)):null,t="";return void Object(ki["o"])({fromToken:a,fromAmount:l,toToken:r,toAmount:c,expiredAt:e}).then(e=>{let i=e.result;return t=i.order,console.log("result",i),e.send()}).then(n=>{var s,d,m,u;console.log(n);let h={from_token:a,from_token_symbol:null===i||void 0===i?void 0:i.symbol,from_token_decimals:null===i||void 0===i?void 0:i.decimals,to_token:r,to_token_symbol:null===o||void 0===o?void 0:o.symbol,to_token_decimals:null===o||void 0===o?void 0:o.decimals,from_amount:(null===(s=new ro.a(l||0))||void 0===s||null===(d=s.div)||void 0===d?void 0:d.call(s,10**i.decimals))||0,to_amount:null===(m=new ro.a(c||0))||void 0===m||null===(u=m.div)||void 0===u?void 0:u.call(m,10**o.decimals),id:t,orderKey:t,chain:"solana",created_at:0,state:"Sending",from_amount_used:"0",percent:"0",expiredAt:e,from_token_logo_url:a.logo_url,to_token_logo_url:r.logo_url};return Object(ki["Cb"])({chain:"solana",destination:"wallet rpc",type:20,order_id:"jupiter_"+t,status:1,wallet:this.$store.state.currentAccount,out_token:r,out_amount:h.to_amount,in_token:a,in_amount:h.from_amount}),this.limitOrders=[h,...this.limitOrders],this.loadingConfirmLimit=!1,this.dialogVisibleLimit=!1,n.wait()}).then(()=>{this.getLimitOrder(t),this.limitAmount1="",this.limitAmount2=""}).catch(e=>{this.limitOrders=this.limitOrders.filter(e=>e.orderKey!==t),this.$f.handleError(e,"solana")}).finally(()=>{this.loadingConfirmLimit=!1,this.dialogVisibleLimit=!1})}Object(ki["Hb"])(t,a,l,r,d,c,m,u,h,p,b).then(e=>{console.log(e),this.$notify({type:"success",message:this.$t("submitOrdersSuccess")}),this.getLimitOrder(),this.limitAmount1="",this.limitAmount2="",this.getGasBalance(),a===wi["k"]&&(a===this.limitToken1.address?this.getToken1Info():a===this.limitToken2.address&&this.getToken2Info())}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loadingConfirmLimit=!1,this.dialogVisibleLimit=!1})}},getAvgPrice(){if(!this.fromAmount||!this.toAmount)return"--";let e=this.fromAmount,t=this.toAmount;if(this.isTax){var i,o,n,s;let a=(null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.totalTax)||((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_sell_tax)||0)+((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_buy_tax)||0);a=Math.min(49,a),null!==(s=this.swapQuoteInfo)&&void 0!==s&&s.isAmountOut?e=new ro.a(e).times(100+a).div(100):t=new ro.a(t).times(100-a).div(100)}let a=["solana","ton","sui"].includes(this.chain),l=a?this.swapTokenPrice[0]:this.swapQuoteInfo.from_price,r=a?this.swapTokenPrice[1]:this.swapQuoteInfo.to_price;return l&&r?0===this.activeTab?this.$f.formatNumber2(e/t/(r/l)*r):1===this.activeTab?this.$f.formatNumber2(t/e/(l/r)*l):void 0:"--"},onSubmitSlippage(e){this.slippageInfo=e,this.autoSlippage!==e.autoSlippage&&e.autoSlippage?(this.slippage=Ro,localStorage.slippage=JSON.stringify(e.slippage),this.onCountDownFinish()):(this.slippage=e.slippage,localStorage.slippage=JSON.stringify(e.slippage)),this.autoSlippage=e.autoSlippage,localStorage.autoSlippage=JSON.stringify(e.autoSlippage)},onSubmitLimitSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},onSubmitNoGasSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.noGasSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},minusTriggerPrice(){this.triggerPrice&&new ro.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new ro.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice(){this.limitPrice&&new ro.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new ro.a(this.triggerPrice).times(1.01).toFixed()))},getNoGasList(e=!1){let t={account:this.$store.state.currentAccount,chain:this.$store.getters.netId};if(null!==t&&void 0!==t&&t.account&&null!==t&&void 0!==t&&t.chain){let i={maker:null===t||void 0===t?void 0:t.account,chain:null===t||void 0===t?void 0:t.chain};this.loadingGetNoGasList=!0,this.isHasUnTx=!0,Object(ki["R"])(i).then(t=>{var i,o;this.noGasTxList=t||[],this.isHasUnTx=null===(i=this.noGasTxList)||void 0===i||null===(o=i.some)||void 0===o?void 0:o.call(i,e=>0===e.status||-1===e.status),!this.isHasUnTx&&e&&(this.getUserTokenList(),this.getGasBalance(),this.getTokenDetails())}).finally(()=>{setTimeout(()=>{this.loadingGetNoGasList=!1},800),Po&&(clearTimeout(Po),Po=null),Po=setTimeout(()=>{var t,i;null!==(t=this.noGasTxList)&&void 0!==t&&null!==(i=t.some)&&void 0!==i&&i.call(t,e=>0===e.status||-1===e.status)&&this.getNoGasList(e)},1e4)})}},getGasBalance(){var e,t,i;let o=this.$store.getters.netId;"evm"!==localStorage.okxwallet_chain&&(window.solana||null!==(e=window)&&void 0!==e&&null!==(e=e.trustwallet)&&void 0!==e&&e.solana&&(null===(t=window.ethereum)||void 0===t||null===(t=t.address)||void 0===t||null===(i=t.startsWith)||void 0===i||!i.call(t,"0x"))&&window.ethereum.address)&&(o="solana")},hasNoGas(){var e;if(null!==(e=window)&&void 0!==e&&null!==(e=e._tw_)&&void 0!==e&&e.appExchangeNoGas){let e=!1;return e&&2===this.selected?(this.selected=3,this.$dialog.alert({title:this.$t("tips"),message:this.$t("freeGasTips"),confirmButtonText:this.$t("confirm"),confirmButtonColor:"#3F80F7"})):e||3!==this.selected||(this.selected=2),void(this.isNoGas=e)}3===this.selected&&(this.selected=2),this.isNoGas=!1},updateGasPrice(e){this.gasSetting=e},onSubmitSolanaSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.solanaSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.solanaSlippage=localStorage.solanaSlippage,this.solanaProtection=null===e||void 0===e?void 0:e.protection,localStorage.solanaProtection=JSON.stringify(this.solanaProtection||!1),this.isAmount?this.watchFromAmount():this.watchToAmount())},unwrapSol(e){this.loadingUnwrap=!0,Object(Vo["o"])(e).then(e=>e.wait()).then(e=>{console.log(e),this.$toast.success(this.$t("unwrapSuccess")),this.getUserTokenList(),this.getTokenDetails()}).catch(e=>{console.log(e),this.$f.handleError(e)}).finally(()=>{this.loadingUnwrap=!1})},watchLimitSolanaPrice(){Number(this.limitSolanaPriceU)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(Mo&&(clearTimeout(Mo),Mo=null),this.limitQuoteLoading=!0,Mo=setTimeout(()=>{this.limitAmount1?this.quoteLimitTokenPrice().then(e=>{var t;console.log("res",e),this.limitAmount2=new ro.a(this.limitAmount1).times(this.limitSolanaPriceU).div((null===(t=this.limitToken2)||void 0===t?void 0:t.price)||1).toFixed(this.limitToken2.decimals)}).finally(()=>{this.limitQuoteLoading=!1}):this.limitAmount2?this.quoteLimitTokenPrice().then(e=>{var t;console.log("res",e),this.limitAmount1=new ro.a(this.limitAmount2).times((null===(t=this.limitToken2)||void 0===t?void 0:t.price)||0).div(this.limitSolanaPriceU).toFixed(this.limitToken1.decimals)}).finally(()=>{this.limitQuoteLoading=!1}):this.limitQuoteLoading=!1},1e3)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")})},minusLimitSolanaPrice(){this.limitSolanaPriceU&&new ro.a(this.limitSolanaPriceU).gt("0")&&(this.limitSolanaPriceU=this.$f.formatNumber(new ro.a(this.limitSolanaPriceU).times(.99).toFixed()),this.watchLimitSolanaPrice())},addLimitSolanaPrice(){this.limitSolanaPriceU&&new ro.a(this.limitSolanaPriceU).gt("0")&&(this.limitSolanaPriceU=this.$f.formatNumber(new ro.a(this.limitSolanaPriceU).times(1.01).toFixed()),this.watchLimitSolanaPrice())},quoteLimitSolana(){var e,t,i,o,n;if(null===(e=this.limitToken1)||void 0===e||!e.address||null===(t=this.limitToken2)||void 0===t||!t.address||"solana"!==this.chain||0!==this.selected)return;let s={from_token:null===(i=this.limitToken1)||void 0===i?void 0:i.address,to_token:null===(o=this.limitToken2)||void 0===o?void 0:o.address,amountIn:Ht["d"].parseUnits("1",null===(n=this.limitToken1)||void 0===n?void 0:n.decimals).toString()};this.limitSolanaError="",Object(ki["zb"])(s).then(e=>{var t;let i=Ht["d"].formatUnits((null===e||void 0===e?void 0:e.outAmount)||0,null===(t=this.limitToken2)||void 0===t?void 0:t.decimals);this.limitSolanaPrice=i,this.quoteLimitTokenPrice().then(e=>{console.log("res",e)}),this.limitSolanaError=""}).catch(e=>{console.log("err",e),this.limitSolanaPrice=0,this.limitSolanaError="1"})},getSolanaPumpInfo(){return new Promise(e=>{var t;let[i,o]=this.$f.getAddressAndChainFromId(null===(t=this.$route.params)||void 0===t?void 0:t.id,1);this.token1.address&&(i=this.token1.address),this.token1.chain&&(o=this.token1.chain),i&&"solana"===o?Object(ki["bb"])(i).then(t=>{if(console.log("getSolanaPumpInfo",t),!1===(null===t||void 0===t?void 0:t.completed)){var i;if(this.isPump=!0,"So11111111111111111111111111111111111111112"!==this.token2.address&&(null===(i=this.tokens)||void 0===i?void 0:i.length)>0){var o;console.log(this.tokens);let e={...null===(o=this.tokens)||void 0===o||null===(o=o.slice())||void 0===o?void 0:o.find(e=>"So11111111111111111111111111111111111111112"===e.address)};this.token2={...e},setTimeout(()=>{this.handleSelectToken2(e)},1e3)}e(!0)}else this.isPump=!1,e(!1)}):(this.isPump=!1,e(!1))})},onSubmitTonSlippage(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.tonSlippage=(null===e||void 0===e?void 0:e.slippage)||"2",this.tonSlippage=localStorage.tonSlippage,this.watchFromAmount())},goTronRent(){location.href="https://tronsave.io/"}}};i("d01f");const zo=Tt()(Qo,[["render",vt],["__scopeId","data-v-8a6ab47c"]]);t["default"]=zo},3731:function(e,t,i){"use strict";i("f898")},"441e":function(e,t,i){},"449c":function(e,t,i){"use strict";var o=i("7a23");const n=e=>(Object(o["pushScopeId"])("data-v-0301828e"),e=e(),Object(o["popScopeId"])(),e),s=n(()=>Object(o["createElementVNode"])("use",{"xlink:href":"#icon-slippage"},null,-1)),a=[s],l={class:"popup-title"},r={class:"slippage-label"},c=n(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),d={style:{width:"100%"}},m={class:"radio-group"},u={key:0,style:{flex:"1"}},h=["id","value","disabled"],p=["for"],b={class:"slippage-input"},v=n(()=>Object(o["createElementVNode"])("span",null,"%",-1)),f={key:0,class:"flex justify-between items-center mt-15 color-333"},g={class:"flex flex-col justify-center text-14px flex-1"},k={class:"text-12px mt-3px color-#FF9E19"},w={class:"form-submit"};function O(e,t,i,n,s,O){const j=Object(o["resolveComponent"])("van-checkbox"),y=Object(o["resolveComponent"])("van-field"),S=Object(o["resolveComponent"])("van-switch"),T=Object(o["resolveComponent"])("van-button"),_=Object(o["resolveComponent"])("van-form"),N=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[0===i.icon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",{key:0,class:"icon-svg icon-slippage","aria-hidden":"true",onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>s.slippageVisible=!0,["stop"]))},a)):1===i.icon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:1,class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[1]||(t[1]=Object(o["withModifiers"])(e=>s.slippageVisible=!0,["stop"]))})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(N,{show:s.slippageVisible,"onUpdate:show":t[8]||(t[8]=e=>s.slippageVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("h3",l,Object(o["toDisplayString"])(e.$t("setSlippage")),1),Object(o["createVNode"])(_,{class:"popup-content",onSubmit:O.confirmSubmit},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[2]||(t[2]=Object(o["withModifiers"])((...e)=>O.openSlippageTips&&O.openSlippageTips(...e),["stop"])),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#558BED"}}),c,i.isAutoSlippage?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:0,modelValue:s.autoSlippage,"onUpdate:modelValue":t[3]||(t[3]=e=>s.autoSlippage=e)},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("autoSlippage")),1)]),_:1},8,["modelValue"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(y,{name:"slippage",modelValue:s.slippageValue,"onUpdate:modelValue":t[6]||(t[6]=e=>s.slippageValue=e),disabled:s.autoSlippage,label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:this.$t("enterSlippage")},{validator:O.validator,message:this.$t("slippageMaxTip")}],border:!1},{input:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",m,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(i.slippageList,(e,i)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:i},[0!==i?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",u)):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio",id:"radio-"+e,"onUpdate:modelValue":t[4]||(t[4]=e=>s.slippageValue=e),value:e,class:"radio-input",disabled:s.autoSlippage},null,8,h),[[o["vModelRadio"],s.slippageValue]]),Object(o["createElementVNode"])("label",{for:"radio-"+e,class:"radio-item"},Object(o["toDisplayString"])(e)+"%",9,p)],64))),128))]),Object(o["createElementVNode"])("div",b,[Object(o["createVNode"])(y,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:s.slippageValue,"onUpdate:modelValue":t[5]||(t[5]=e=>s.slippageValue=e),disabled:s.autoSlippage,onBlur:O.handleBlur,clearable:""},null,8,["modelValue","disabled","onBlur"]),v])])]),_:1},8,["modelValue","disabled","rules"]),i.isProtection?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("protection")),1),Object(o["createElementVNode"])("span",k,Object(o["toDisplayString"])(e.$t("protectionTip")),1)]),Object(o["createVNode"])(S,{modelValue:s.protection,"onUpdate:modelValue":t[7]||(t[7]=e=>s.protection=e),size:"0.4rem","inactive-color":"#BFBFBF","active-color":"#558BED"},null,8,["modelValue"])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",w,[Object(o["createVNode"])(T,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm1")),1)]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])],64)}var j={name:"slippageButton",props:{slippage:{type:String,default:"2"},slippageList:{type:Array,default:()=>["0.5","1","2"]},min:{type:Number,default:0},icon:{type:Number,default:0},isAutoSlippage:{type:Boolean,default:!1},initAutoSlippage:{type:Boolean,default:!0},isProtection:{type:Boolean,default:!1},initProtection:{type:Boolean,default:!1}},emits:["update:slippage","onSubmit"],data(){return{slippageVisible:!1,slippageValue:this.slippage||"1",autoSlippage:this.initAutoSlippage,protection:this.initProtection||!1}},watch:{slippageVisible(e){var t,i;e&&(this.slippageValue=this.slippage||"1",this.isAutoSlippage?this.autoSlippage=this.initAutoSlippage:this.autoSlippage=!1),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(i=t.isRefreshEnable)||void 0===i||i.call(t,"bridge",!e)}},methods:{confirmSubmit(){this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min),this.$emit("update:slippage",this.slippageValue),this.$emit("onSubmit",{slippage:this.slippageValue,autoSlippage:this.autoSlippage,protection:this.protection}),this.slippageVisible=!1},openSlippageTips(){this.$dialog.alert({title:this.$t("slippage"),message:this.$t("slippageTips"),confirmButtonText:this.$t("iKnown"),confirmButtonColor:"#558BED",messageAlign:"left"}).then(()=>{})},handleBlur(){this.slippageVisible&&Number(this.slippageValue)<0&&(this.slippageValue=0),this.slippageVisible&&Number(this.slippageValue)<this.min&&(this.slippageValue=this.min)},validator(e){return Number(e)<=49.99}}},y=(i("6d9f"),i("6b0d")),S=i.n(y);const T=S()(j,[["render",O],["__scopeId","data-v-0301828e"]]);t["a"]=T},"48c8":function(e,t,i){"use strict";i("8d28")},"558f":function(e,t,i){"use strict";i("0865")},"57c9":function(e,t,i){"use strict";var o=i("7a23"),n=i("afd7"),s=i.n(n);const a={class:"tx-li-item_1"},l={style:{display:"flex","align-items":"center","justify-content":"left","min-width":"42%"}},r={style:{display:"flex","align-items":"center",flex:"1","justify-content":"center","overflow-x":"hidden","min-width":"0.4rem"}},c={key:0,src:s.a,style:{width:"100%"},alt:"",srcset:""},d={key:1,class:"iconfont icon-jiantou2"},m={style:{display:"flex","align-items":"center","min-width":"42%","justify-content":"right","flex-wrap":"wrap"}},u={style:{"text-align":"right","word-break":"break-word","margin-left":"0.1rem"}},h={class:"tx-li-item_3"},p={key:0},b={key:1,style:{color:"#999999"}},v={key:2};function f(e,t,n,s,f,g){var k,w,O,j,y,S,T,_,N,$,V,x;const E=Object(o["resolveComponent"])("van-image");return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"tx-li-item",onClick:t[0]||(t[0]=Object(o["withModifiers"])((...e)=>g.goLink&&g.goLink(...e),["stop"]))},[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",l,[Object(o["createVNode"])(E,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:null!==(k=n.item)&&void 0!==k&&k.from_address_logo_url?e.$f.formatIcon({logo_url:n.item.from_address_logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.from_amount))+" "+Object(o["toDisplayString"])(n.item.from_symbol||""),1)]),Object(o["createElementVNode"])("div",r,[0===(null===(w=n.item)||void 0===w?void 0:w.is_merged)&&1e3*(null===(O=n.item)||void 0===O?void 0:O.time)>=Date.now()-6e4&&"timeout"!==(null===(j=n.item)||void 0===j?void 0:j.status)&&"fail"!==(null===(y=n.item)||void 0===y?void 0:y.status)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",c)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",d))]),Object(o["createElementVNode"])("div",m,[Object(o["createVNode"])(E,{round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem","min-width":"0.32rem"},"lazy-load":"","show-loading":"",src:null!==(S=n.item)&&void 0!==S&&S.to_address_logo_url?e.$f.formatIcon({logo_url:n.item.to_address_logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount)),1),Object(o["createElementVNode"])("span",u,Object(o["toDisplayString"])(n.item.to_symbol||""),1)])]),Object(o["createElementVNode"])("ul",h,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.item.time?e.$f.formatDate(n.item.time):"--"),1),1===n.item.is_merged&&""!==n.item.from_price_usd?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",p,Object(o["toDisplayString"])(e.$f.formatNumberCurrencyUnit((Number(n.item.from_amount)||0)*(Number(n.item.from_price_usd)||0))),1)):!("timeout"===(null===(T=n.item)||void 0===T?void 0:T.status)||"fail"===(null===(_=n.item)||void 0===_?void 0:_.status)||1e3*(null===(N=n.item)||void 0===N?void 0:N.time)<Date.now()-6e4)||0!==n.item.is_merged||"solana"!==(null===($=n.item)||void 0===$?void 0:$.chain)&&"ton"!==(null===(V=n.item)||void 0===V?void 0:V.chain)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",v,"--")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",b,Object(o["toDisplayString"])("fail"===(null===(x=n.item)||void 0===x?void 0:x.status)?e.$t("failed"):e.$t("timeout")),1))])])])}var g={name:"TxItem",props:{item:Object},data(){return{}},methods:{goLink(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.item.chain,this.item.transaction,"tx"))}}},k=(i("26d9"),i("6b0d")),w=i.n(k);const O=w()(g,[["render",f],["__scopeId","data-v-11f60edf"]]);t["a"]=O},"6d9f":function(e,t,i){"use strict";i("0e93")},"885c":function(e,t,i){},"8d28":function(e,t,i){},"8e2e":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("a002"),n=i.n(o),s=i("7a23");function a(e,t){let i=Object(s["ref"])(t);function o(){n.a.getItem(e).then(o=>{console.log("read",e,null!==o&&void 0!==o?o:t),null===o?(i.value=t,n.a.setItem(e,t)):i.value=o}).catch(()=>{i.value=t})}function a(t){let o=t||i.value;return o?Array.isArray(o)?n.a.setItem(e,JSON.parse(JSON.stringify(i.value))):void("object"===typeof i.value?n.a.setItem(e,{...o}):n.a.setItem(e,o)):n.a.removeItem(e)}return o(),Object(s["watch"])(i,()=>{a()}),i}},"940b":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var o=i("4360");function n(){window.addEventListener("message",(function(e){e.data.message&&"accountsChanged"===e.data.message.action&&(console.log("got accountsChanged event",e.data),o["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58)),e.data.message&&"setNode"==e.data.message.action&&console.log("got setNode event",e.data),e.data.message&&"connect"==e.data.message.action&&console.log("got connect event",e.data),e.data.message&&"disconnect"==e.data.message.action&&(console.log("got connect event",e.data),o["a"].commit("setWallet",""),o["a"].commit("setProvider",""))}))}function s(){return new Promise((e,t)=>{window.tronLink?e(!0):(window.addEventListener("tronLink#initialized",()=>{window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))},{once:!0}),setTimeout(()=>{window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))},3e3))})}function a(){return n(),new Promise((e,t)=>{var i,n;window.tronLink?(console.log("---tron_requestAccounts start----",null===(i=window)||void 0===i?void 0:i.tronWeb),null===(n=window)||void 0===n||null===(n=n.tronLink)||void 0===n||n.request({method:"tron_requestAccounts"}).then(i=>{var n;console.log("tron_requestAccounts",i),200===i.code&&null!==(n=window)&&void 0!==n&&null!==(n=n.tronWeb)&&void 0!==n&&null!==(n=n.defaultAddress)&&void 0!==n&&n.base58?(o["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),o["a"].commit("setProvider",window.tronWeb),o["a"].commit("setChainId","tron"),o["a"].commit("setWallet","TronLink"),e(window.tronWeb.defaultAddress.base58)):4001===i.code&&t(i)}).catch(e=>{console.log("connect tronLink error",e),4001===e.code?t("please connect tronLink"):console.error(e)})):s().then(()=>{var i;null===(i=window)||void 0===i||null===(i=i.tronLink)||void 0===i||i.request({method:"tron_requestAccounts"}).then(i=>{var n;console.log("tron_requestAccounts",i),200===i.code&&null!==(n=window)&&void 0!==n&&null!==(n=n.tronWeb)&&void 0!==n&&null!==(n=n.defaultAddress)&&void 0!==n&&n.base58?(o["a"].commit("setProvider",window.tronWeb),o["a"].commit("setChainId","tron"),o["a"].commit("setWallet","TronLink"),o["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),e(window.tronWeb.defaultAddress.base58)):4001===i.code&&t(i)}).catch(e=>{console.log("connect tronLink error",e),4001===e.code?t("请连接"):console.error(e)})})})}},9587:function(e,t,i){"use strict";var o=i("7a23");const n=e=>(Object(o["pushScopeId"])("data-v-772f82de"),e=e(),Object(o["popScopeId"])(),e),s={class:"flex items-center"},a={class:"label mr-20"},l={key:0,class:"token-container"},r={class:"icon-token-container mr-5"},c=["src"],d={class:"mr-5"},m=n(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),u={class:"flex items-center mt-10"},h={class:"label mr-20"},p={key:0,class:"token-container"},b={class:"icon-token-container mr-5"},v=["src"],f={class:"mr-5"},g={class:"flex items-center mt-10"},k={class:"label mr-20"},w={key:0,class:"token-container"},O={class:"flex items-center justify-between mt-10"},j={class:"label mr-20 flex items-center"},y={key:0},S=n(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),T={class:"flex items-center"},_={class:"label mr-20"},N={key:0,class:"token-container"},$={class:"icon-token-container mr-5"},V=["src"],x={class:"mr-5"},E=n(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),A={class:"flex items-center mt-10"},I={class:"label mr-20"},B={key:0,class:"token-container"},C={class:"icon-token-container mr-5"},P=["src"],D={class:"mr-5"},L={class:"flex justify-between mt-10"},F={class:"label mr-20"},M={class:"token-container flex items-end flex-col",style:{"align-items":"end"}},U={class:"text-size-12"},R={class:"color-999 text-size-12"},G={class:"flex items-center justify-between mt-10"},Q={class:"mr-20 label"},z={key:0,class:"color-333 text-size-12"},q={class:"label"},W={key:1,class:"color-333 text-size-12"},H={class:"label"},K={key:0,class:"flex items-center justify-between mt-10"},X={class:"mr-20 label"},J={class:"color-333 text-size-12"};function Y(e,t,n,Y,Z,ee){var te,ie,oe,ne,se,ae,le,re,ce;const de=Object(o["resolveComponent"])("van-image"),me=Object(o["resolveComponent"])("van-loading"),ue=Object(o["resolveComponent"])("van-button");return"solana"!==n.item.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:0,class:"tx-li-item van-hairline--bottom clickable",onClick:t[1]||(t[1]=Object(o["withModifiers"])(e=>ee.goLink(n.item),["stop"]))},[Object(o["createElementVNode"])("div",s,[Object(o["createElementVNode"])("span",a,Object(o["toDisplayString"])(e.$t("from")),1),n.item.from_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",l,[Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(te=n.item)&&void 0!==te&&te.from_token_logo_url?e.$f.formatIcon({logo_url:n.item.from_token_logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,c)]),Object(o["createElementVNode"])("span",d,Object(o["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(n.item.from_amount,n.item.from_token_decimals))),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.item.from_token_symbol||""),1)])):Object(o["createCommentVNode"])("",!0),m,0===n.item.is_merged?(Object(o["openBlock"])(),Object(o["createBlock"])(me,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("span",h,Object(o["toDisplayString"])(e.$t("to")),1),n.item.to_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[Object(o["createElementVNode"])("div",b,[Object(o["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(ie=n.item)&&void 0!==ie&&ie.to_token_logo_url?e.$f.formatIcon({logo_url:n.item.to_token_logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,v)]),Object(o["createElementVNode"])("span",f,Object(o["toDisplayString"])(e.$f.formatNumber2(ee.formatUnits(n.item.to_amount,n.item.to_token_decimals))),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(oe=n.item)||void 0===oe?void 0:oe.to_token_symbol)||""),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("span",k,Object(o["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(o["toDisplayString"])(n.item.target_token===n.item.from_token?(null===(ne=n.item)||void 0===ne?void 0:ne.from_token_symbol)||"":(null===(se=n.item)||void 0===se?void 0:se.to_token_symbol)||"")+")",1),n.item.target_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",w,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(n.item.target_limit_price?e.$f.formatNumber2(n.item.target_limit_price):"--"),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatDate(n.item.created_at)),1),(0===n.item.status||-1===n.item.status)&&Date.now()<1e3*n.item.created_at+Z.LimitExpiredTime?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",y,"("+Object(o["toDisplayString"])(e.$t("expiresInTime",{t:e.$dayjs(1e3*n.item.created_at+Z.LimitExpiredTime).fromNow()}))+")",1)):Object(o["createCommentVNode"])("",!0)]),1===n.item.status||2===n.item.status?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(o["normalizeStyle"])({color:ee.formatStatusColor(n.item)})},Object(o["toDisplayString"])(ee.formatStatus(n.item)),5)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[S,0!==n.item.status||(0===n.item.status||-1===n.item.status)&&1e3*n.item.created_at+Z.LimitExpiredTime<Date.now()&&"solana"!==n.item.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(o["normalizeStyle"])({color:ee.formatStatusColor(n.item)})},Object(o["toDisplayString"])(ee.formatStatus(n.item)),5)):Object(o["createCommentVNode"])("",!0),"solana"===n.item.chain&&0===n.item.status||n.item.from_token===Z.NATIVE_TOKEN||(0===n.item.status||-1===n.item.status)&&1e3*n.item.created_at+Z.LimitExpiredTime>Date.now()?(Object(o["openBlock"])(),Object(o["createBlock"])(ue,{key:1,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:Z.loading,"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>ee.confirmCancel(n.item),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("revoke")),1)]),_:1},8,["loading","loading-text"])):Object(o["createCommentVNode"])("",!0)],64))])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:1,class:"tx-li-item van-hairline--bottom clickable",onClick:t[3]||(t[3]=Object(o["withModifiers"])(e=>ee.goLink(n.item),["stop"]))},[Object(o["createElementVNode"])("div",T,[Object(o["createElementVNode"])("span",_,Object(o["toDisplayString"])(e.$t("from")),1),n.item.from_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,[Object(o["createElementVNode"])("div",$,[Object(o["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(ae=n.item)&&void 0!==ae&&ae.from_token_logo_url?e.$f.formatIcon({logo_url:n.item.from_token_logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,V)]),Object(o["createElementVNode"])("span",x,Object(o["toDisplayString"])(e.$f.formatNumber2((null===(le=n.item)||void 0===le?void 0:le.from_amount)||0)),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.item.from_token_symbol||""),1)])):Object(o["createCommentVNode"])("",!0),E,"Sending"===n.item.state?(Object(o["openBlock"])(),Object(o["createBlock"])(me,{key:1,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"})):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[Object(o["createElementVNode"])("span",{class:"label",style:Object(o["normalizeStyle"])({color:ee.formatSolanaStatusColor(n.item)})},Object(o["toDisplayString"])(ee.formatSolanaStatus(n.item)),5),"solana"===n.item.chain&&"Pending"===n.item.state?(Object(o["openBlock"])(),Object(o["createBlock"])(ue,{key:0,class:"btn-s",plain:"",hairline:"",type:"primary",size:"small",loading:Z.loadingSolana[n.item.orderKey],"loading-text":e.$t("revoke"),"loading-size":"0.28rem",onClick:t[2]||(t[2]=Object(o["withModifiers"])(e=>ee.confirmCancel(n.item),["stop"]))},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("revoke")),1)]),_:1},8,["loading","loading-text"])):Object(o["createCommentVNode"])("",!0)],64))]),Object(o["createElementVNode"])("div",A,[Object(o["createElementVNode"])("span",I,Object(o["toDisplayString"])(e.$t("to")),1),n.item.to_token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",B,[Object(o["createElementVNode"])("div",C,[Object(o["createVNode"])(de,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:null!==(re=n.item)&&void 0!==re&&re.to_token_logo_url?e.$f.formatIcon({logo_url:n.item.to_token_logo_url}):"/icon-default.png","error-icon":i("aeccf")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("img",{class:"icon-svg icon-network",src:`${e.$store.state.s3BaseUrl}chain/${n.item.chain}.png`,alt:"",srcset:""},null,8,P)]),Object(o["createElementVNode"])("span",D,Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount||0)),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(ce=n.item)||void 0===ce?void 0:ce.to_token_symbol)||""),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",L,[Object(o["createElementVNode"])("span",F,Object(o["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(o["toDisplayString"])(ee.solanaPriceSymbol(n.item))+")",1),Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("span",U,"$"+Object(o["toDisplayString"])(ee.solanaPriceU(n.item)),1),Object(o["createElementVNode"])("span",R,"("+Object(o["toDisplayString"])(ee.solanaPrice(n.item))+")",1)])]),Object(o["createElementVNode"])("div",G,[Object(o["createElementVNode"])("span",Q,Object(o["toDisplayString"])(e.$t("amount1")),1),ee.solanaTarget(n.item)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.from_amount_used||0))+"/"+Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.from_amount||0))+" "+Object(o["toDisplayString"])(n.item.from_token_symbol),1),Object(o["createElementVNode"])("span",q,"("+Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.percent||0))+"%)",1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",W,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount_used||0))+"/"+Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.to_amount||0))+" "+Object(o["toDisplayString"])(n.item.to_token_symbol),1),Object(o["createElementVNode"])("span",H,"("+Object(o["toDisplayString"])(e.$f.formatNumber2(n.item.percent||0))+"%)",1)]))]),void 0!==n.item.expiredAt?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",K,[Object(o["createElementVNode"])("span",X,Object(o["toDisplayString"])(e.$t("expiredTime")),1),Object(o["createElementVNode"])("span",J,Object(o["toDisplayString"])(n.item.expiredAt?e.$f.formatDate(n.item.expiredAt):e.$t("never")),1)])):Object(o["createCommentVNode"])("",!0)]))}i("14d9");var Z=i("365c"),ee=i("c9d9"),te=i("fa7d"),ie=i("901e"),oe=i.n(ie),ne={name:"TxItem",props:{item:Object},emits:["refresh"],data(){return{loading:!1,LimitExpiredTime:ee["g"],NATIVE_TOKEN:ee["k"],loadingSolana:{}}},methods:{formatUnits:te["d"].formatUnits,goLink(e){if("solana"===e.chain){if("Sending"===(null===e||void 0===e?void 0:e.state))return;try{sessionStorage.solanaLimitOrder=JSON.stringify({[e.orderKey]:{...e}})}catch(t){console.log(t)}this.$router.push({name:"LimitOrder",params:{id:e.orderKey},query:{chain:"solana",inputMint:e.from_token,outputMint:e.to_token,wallet:(null===e||void 0===e?void 0:e.userPubkey)||(null===e||void 0===e?void 0:e.maker)}})}else this.$router.push({name:"LimitOrder",params:{id:e.id}})},confirmCancel(e){let t="solana"===(null===e||void 0===e?void 0:e.chain)?this.$t("cancelOrderConfirmingSolana"):this.$t("confirmCancelMessage");this.$dialog.confirm({title:this.$t("cancelOrderConfirming"),message:t,confirmButtonText:this.$t("confirm1"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then(()=>{this.cancelLimitOrder(e)})},cancelLimitOrder(e){if("solana"===e.chain)return void this.cancelSolanaLimitOrder(e);let t={fromToken:e.from_token,fromAmount:e.from_amount,toToken:e.to_token,minReturn:e.to_min_amount,salt:e.salt,id:e.id,order_id:e.order_id};console.log(t),this.loading=!0,Object(Z["l"])(t).then(t=>{console.log(t),this.$notify({type:"success",message:this.$t("cancelledOrderSuccessfully")}),this.$emit("refresh",e)}).catch(e=>{this.$f.handleError(e)}).finally(()=>{this.loading=!1})},cancelSolanaLimitOrder(e){this.loadingSolana[e.orderKey]=!0;let t="v1"===(null===e||void 0===e?void 0:e.version)?Z["n"]:Z["m"];t(e.orderKey).then(e=>(console.log(e),e.wait())).then(t=>{console.log(t),setTimeout(()=>{this.$emit("refresh",e,this.loadingSolana)},3e3)}).catch(t=>{this.$f.handleError(t,"solana"),this.loadingSolana[e.orderKey]=!1}).finally(()=>{})},formatStatus(e){var t;if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now()&&"solana"!==e.chain)return this.$t("expired1");let i=e.status,o={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),4:this.$t("fail1")+`(${this.$t("notEnoughBalance")})`,10:this.$t("fail1")+`(${this.$t("nonceError")})`,11:this.$t("fail1")+`(${this.$t("chainError")})`,12:this.$t("fail1")+`(${this.$t("signatureError")})`,13:this.$t("fail1")+`(${this.$t("approveGasPriceLow")})`,"-1":""};return null!==(t=o[i])&&void 0!==t?t:i},formatStatusColor(e){if((0===e.status||-1===e.status)&&1e3*e.created_at+ee["g"]<Date.now())return"#999999";let t=e.status;return 1===t||10===t||11===t||12===t||4===t?"#999999":2===t?"#12B886":0===t?"#3F80F7":"#FF0000"},solanaTarget(e){let t=["So11111111111111111111111111111111111111112","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"],i=t.indexOf(e.from_token),o=t.indexOf(e.to_token);return i<=o},solanaPriceSymbol(e){return this.solanaTarget(e)?(null===e||void 0===e?void 0:e.from_token_symbol)||"":(null===e||void 0===e?void 0:e.to_token_symbol)||""},solanaPriceU(e){return this.solanaTarget(e)?this.$f.formatNumber2(new oe.a(e.to_amount).times((null===e||void 0===e?void 0:e.to_token_price)||0).div(e.from_amount).toFixed()):this.$f.formatNumber2(new oe.a(e.from_amount).times((null===e||void 0===e?void 0:e.from_token_price)||0).div(e.to_amount).toFixed())},solanaPrice(e){return this.solanaTarget(e)?this.$f.formatNumber2(e.to_amount/e.from_amount)+" "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.from_token_symbol)||""):this.$f.formatNumber2(e.from_amount/e.to_amount)+" "+((null===e||void 0===e?void 0:e.from_token_symbol)||"")+" per "+((null===e||void 0===e?void 0:e.to_token_symbol)||"")},formatSolanaStatus(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return this.$t("expired1");let i=e.state,o={Pending:"",Completed:this.$t("completed"),Cancelled:this.$t("cancelled")};return null!==(t=o[i])&&void 0!==t?t:i},formatSolanaStatusColor(e){var t;if("Pending"===(null===e||void 0===e?void 0:e.state)&&null!==(null===e||void 0===e?void 0:e.expiredAt)&&Date.now()>1e3*Number((null===e||void 0===e?void 0:e.expiredAt)||0))return"#999999";let i=e.state,o={Pending:"",Completed:"#12B886",Cancelled:"#999999"};return null!==(t=o[i])&&void 0!==t?t:"#3F80F7"}}},se=(i("c7e3"),i("6b0d")),ae=i.n(se);const le=ae()(ne,[["render",Y],["__scopeId","data-v-772f82de"]]);t["a"]=le},"965b":function(e,t,i){e.exports=i.p+"static/img/audit-logo.01052351.png"},a206:function(e,t,i){},a2ef:function(e,t,i){"use strict";var o=i("7a23"),n=i("e524"),s=i.n(n);const a={class:"swap-title"},l={class:"swap-info"},r={class:"swap-info_item header"},c={class:"header-li"},d={class:"header-li_left"},m=["src"],u={class:"header-li_right"},h={class:"switch-box"},p={class:"header-li"},b={class:"header-li_left"},v=["src"],f={class:"header-li_right"},g={key:0,class:"b-s-c"},k={class:"color-3f80f7"},w=Object(o["createTextVNode"])(") "),O={class:"text-size-12 color-999",style:{"max-height":"2rem","overflow-y":"auto"}},j={key:0,style:{color:"var(--van-danger-color)"}},y={key:1},S={key:1,class:"bg-change"},T={class:"swap-info_item"},_={class:"swap-info_item-label"},N={class:"swap-info_item-value"},$={class:"p-item"},V={class:"p-item"},x={key:2,class:"swap-info_item"},E={class:"swap-info_item-label"},A={class:"swap-info_item-value"},I={key:3,class:"swap-info_item"},B={class:"swap-info_item-label"},C={class:"swap-info_item-value"},P={key:0,class:"swap-info_item"},D={class:"swap-info_item-label"},L={class:"swap-info_item-value"},F={key:1,class:"swap-info_item"},M={class:"swap-info_item-label"},U={class:"swap-info_item-value"},R={class:"swap-info_item"},G={class:"swap-info_item-label"},Q={key:0,class:"swap-info_item-value path-list"},z={key:0},q={class:"path-amm"},W={key:1,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},H={key:1},K={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:s.a,alt:"",srcset:""},X={key:1},J={key:5,class:"swap-info_item"},Y={class:"swap-info_item-label"},Z={class:"swap-info_item-value"},ee=["href"],te={class:"iconfont icon-copy",style:{"margin-left":"0.1rem"}},ie={class:"footer"};function oe(e,t,n,s,oe,ne){const se=Object(o["resolveComponent"])("van-icon"),ae=Object(o["resolveComponent"])("van-button"),le=Object(o["resolveComponent"])("van-image"),re=Object(o["resolveComponent"])("van-popup"),ce=Object(o["resolveDirective"])("copy");return Object(o["openBlock"])(),Object(o["createBlock"])(re,{show:ne.dialogVisible,"onUpdate:show":t[1]||(t[1]=e=>ne.dialogVisible=e),style:Object(o["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(o["withCtx"])(()=>{var s,re,de,me,ue,he,pe,be,ve,fe,ge,ke,we;return[Object(o["createElementVNode"])("header",a,Object(o["toDisplayString"])(e.$t("tradeConfirm")),1),Object(o["createElementVNode"])("ul",l,[Object(o["createElementVNode"])("li",r,[Object(o["createElementVNode"])("div",c,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ne.formatLogo(n.swapInfo.fromToken),alt:"",height:"20"},null,8,m),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.swapInfo.fromToken.symbol),1)]),Object(o["createElementVNode"])("div",u,Object(o["toDisplayString"])(e.$f.formatNumber2((null===(s=n.swapInfo)||void 0===s?void 0:s.fromAmount)||ne.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals))||"0"),1)]),Object(o["createElementVNode"])("div",h,[Object(o["createVNode"])(se,{class:"switch-icon",name:"down"})]),Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ne.formatLogo(n.swapInfo.toToken),alt:"",height:"20"},null,8,v),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(n.swapInfo.toToken.symbol),1)]),Object(o["createElementVNode"])("div",f,Object(o["toDisplayString"])(e.$f.formatNumber2((null===(re=n.swapInfo)||void 0===re?void 0:re.toAmount)||ne.formatUnits(n.swapInfo.toTokenAmount||0,n.swapInfo.toToken.decimals))||"0"),1)])]),e.$store.state.isBatchSwap&&oe.isCanBatchSwap?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",g,[Object(o["createElementVNode"])("button",{class:"clickable",onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>oe.isShowBatchAddress=!oe.isShowBatchAddress,["stop"]))},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("batchSwapDetails"))+"(",1),Object(o["createElementVNode"])("span",k,Object(o["toDisplayString"])((null===(de=ne.selectSubWallets)||void 0===de?void 0:de.length)||0),1),w,Object(o["withDirectives"])(Object(o["createVNode"])(se,{name:"arrow-down"},null,512),[[o["vShow"],!oe.isShowBatchAddress]]),Object(o["withDirectives"])(Object(o["createVNode"])(se,{name:"arrow-up"},null,512),[[o["vShow"],oe.isShowBatchAddress]])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("ul",O,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(ne.selectSubWallets||[],(t,i)=>{var s;return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:i,class:"flex justify-between items-center mt-5"},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(null===t||void 0===t?void 0:t.name)+"("+Object(o["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(0,6))+"..."+Object(o["toDisplayString"])(null===t||void 0===t?void 0:t.address.slice(-4))+")",1),null!==(s=ne.swapTxs)&&void 0!==s&&s[i]?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",y,"-"+Object(o["toDisplayString"])(e.$f.formatNumber2(ne.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals))||"0")+" "+Object(o["toDisplayString"])(n.swapInfo.fromToken.symbol),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",j,Object(o["toDisplayString"])(e.$t("insufficientBalance")),1))])}),128))],512),[[o["vShow"],oe.isShowBatchAddress]])])):Object(o["createCommentVNode"])("",!0),oe.priceUpdated?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",S,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.$t("priceUpdated")),1),Object(o["createVNode"])(ae,{class:"btn",type:"primary",color:"#3F80F7",size:"small",round:"",onClick:ne.accept},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("accept")),1)]),_:1},8,["onClick"])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("li",T,[Object(o["createElementVNode"])("div",_,Object(o["toDisplayString"])(e.$t("price")),1),Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",$,"1 "+Object(o["toDisplayString"])(n.swapInfo.fromToken.symbol)+" = "+Object(o["toDisplayString"])(ne.getPrice((null===(me=n.swapInfo)||void 0===me?void 0:me.fromAmount)||ne.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals),(null===(ue=n.swapInfo)||void 0===ue?void 0:ue.toAmount)||ne.formatUnits(n.swapInfo.toTokenAmount||0,n.swapInfo.toToken.decimals)))+" "+Object(o["toDisplayString"])(n.swapInfo.toToken.symbol),1),Object(o["createElementVNode"])("div",V,"1 "+Object(o["toDisplayString"])(n.swapInfo.toToken.symbol)+" = "+Object(o["toDisplayString"])(ne.getPrice((null===(he=n.swapInfo)||void 0===he?void 0:he.toAmount)||ne.formatUnits(n.swapInfo.toTokenAmount||0,n.swapInfo.toToken.decimals),(null===(pe=n.swapInfo)||void 0===pe?void 0:pe.fromAmount)||ne.formatUnits(n.swapInfo.fromTokenAmount||0,n.swapInfo.fromToken.decimals)))+" "+Object(o["toDisplayString"])(n.swapInfo.fromToken.symbol),1)])]),n.swapInfo.fromToken.isWrapper&&n.swapInfo.toToken.isETH||n.swapInfo.toToken.isWrapper&&n.swapInfo.fromToken.isETH?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",x,[Object(o["createElementVNode"])("div",E,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("div",A,Object(o["toDisplayString"])(n.slippage)+"%",1)])),n.swapInfo.gasValue&&n.swapInfo.gasValue>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",I,[Object(o["createElementVNode"])("div",B,Object(o["toDisplayString"])(e.$t("estimatedGas")),1),Object(o["createElementVNode"])("div",C,"≈ "+Object(o["toDisplayString"])(ne.getEstimatedFee(n.swapInfo.gasValue)),1)])):Object(o["createCommentVNode"])("",!0),n.swapInfo.fromToken.isWrapper&&n.swapInfo.toToken.isETH||n.swapInfo.toToken.isWrapper&&n.swapInfo.fromToken.isETH?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:4},[n.swapInfo.isAmountOut?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",F,[Object(o["createElementVNode"])("div",M,Object(o["toDisplayString"])(e.$t("maximumReceived")),1),Object(o["createElementVNode"])("div",U,Object(o["toDisplayString"])(ne.maxSold)+" "+Object(o["toDisplayString"])(null===(ve=n.swapInfo)||void 0===ve||null===(ve=ve.fromToken)||void 0===ve?void 0:ve.symbol),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",P,[Object(o["createElementVNode"])("div",D,Object(o["toDisplayString"])(e.$t("minimumReceived")),1),Object(o["createElementVNode"])("div",L,Object(o["toDisplayString"])(ne.minReceived)+" "+Object(o["toDisplayString"])(null===(be=n.swapInfo)||void 0===be||null===(be=be.toToken)||void 0===be?void 0:be.symbol),1)]))],64)),Object(o["createElementVNode"])("li",R,[Object(o["createElementVNode"])("div",G,Object(o["toDisplayString"])(e.$t("tokenRoute")),1),n.swapInfo.fromToken.isWrapper&&n.swapInfo.toToken.isETH||n.swapInfo.toToken.isWrapper&&n.swapInfo.fromToken.isETH?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",H,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(ne.swapRouterPath,(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:t},[0!==t?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",K)):Object(o["createCommentVNode"])("",!0),e.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",X,Object(o["toDisplayString"])(e.symbol),1)):Object(o["createCommentVNode"])("",!0)],64))),128))])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Q,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(ne.swapRouterPath,(t,n)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:n},[t.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",z,Object(o["toDisplayString"])(t.symbol),1)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",q,[t.nextAmm&&"unknown"!==t.nextAmm?(Object(o["openBlock"])(),Object(o["createBlock"])(le,{key:0,class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:`${e.$store.state.s3BaseUrl}swap/${t.nextAmm}.jpeg`,"error-icon":i("aeccf")},null,8,["src","error-icon"])):Object(o["createCommentVNode"])("",!0),n!==ne.swapRouterPath.length-1?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",W)):Object(o["createCommentVNode"])("",!0)])],64))),128))]))]),null!==(fe=n.swapInfo)&&void 0!==fe&&fe.transaction?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",J,[Object(o["createElementVNode"])("div",Y,Object(o["toDisplayString"])(e.$t("txHash")),1),Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("a",{href:e.$f.formatExplorerUrl(n.chain,n.swapInfo.transaction,"tx"),target:"_blank"},Object(o["toDisplayString"])((null===(ge=n.swapInfo)||void 0===ge||null===(ge=ge.transaction)||void 0===ge?void 0:ge.slice(0,6))+"..."+(null===(ke=n.swapInfo)||void 0===ke||null===(ke=ke.transaction)||void 0===ke?void 0:ke.slice(-6))),9,ee),Object(o["withDirectives"])(Object(o["createElementVNode"])("i",te,null,512),[[ce,null===(we=n.swapInfo)||void 0===we?void 0:we.transaction]])])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",ie,[Object(o["createVNode"])(ae,{class:"submit-button",type:"primary",loading:ne.isLoading,"loading-text":e.$t("confirming"),block:"",onClick:Object(o["withModifiers"])(ne.submitSwap,["stop"]),disabled:oe.priceUpdated},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["loading","loading-text","onClick","disabled"])])]}),_:1},8,["show","style"])}var ne=i("901e"),se=i.n(ne),ae=i("c9d9"),le=i("fa7d"),re={name:"ConfirmSwap",props:{visible:Boolean,swapInfo:Object,slippage:String,loading:Boolean,chain:String,nativePrice:Number,gasPrice:String},emits:["update:visible","submit"],data(){var e;return{priceUpdated:!1,isShowBatchAddress:!0,isCanBatchSwap:!(null===(e=window)||void 0===e||null===(e=e._tw_)||void 0===e||!e.appSelectSubWallet)||!1}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},isLoading(){return this.loading},minReceived(){var e,t,i;let o=(null===(e=this.swapInfo)||void 0===e||null===(e=e.toToken)||void 0===e?void 0:e.decimals)||0,n=null===(t=this.swapInfo)||void 0===t?void 0:t.toAmount;return n?this.$f.formatNumber(new se.a(n||0).times(100-Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(le["d"].formatUnits(new se.a((null===(i=this.swapInfo)||void 0===i?void 0:i.toTokenAmount)||0).times(100-Number(this.slippage)).div(100).toFixed(0),o))},maxSold(){var e,t,i;let o=(null===(e=this.swapInfo)||void 0===e||null===(e=e.fromToken)||void 0===e?void 0:e.decimals)||0,n=null===(t=this.swapInfo)||void 0===t?void 0:t.fromAmount;return n?this.$f.formatNumber(new se.a(n||0).times(100+Number(this.slippage)).div(100).toFixed()):this.$f.formatNumber(le["d"].formatUnits(new se.a((null===(i=this.swapInfo)||void 0===i?void 0:i.fromTokenAmount)||0).times(100+Number(this.slippage)).div(100).toFixed(0),o))},swapRouterPath(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.swapRouterPath)||[]},subTxs(){var e;return(null===(e=this.swapInfo)||void 0===e?void 0:e.subTxs)||{}},selectSubWallets(){return this.$store.getters.selectSubWallets||[]},swapTxs(){var e;return(null===(e=this.$store.state)||void 0===e||null===(e=e.subTxs)||void 0===e?void 0:e.swapTxs)||[]}},watch:{visible(e){var t,i;e&&(this.priceUpdated=!1),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(i=t.isRefreshEnable)||void 0===i||i.call(t,"bridge",!e)}},methods:{formatUnits:le["d"].formatUnits,formatPrice(e){return this.$f.formatNumber(e&&""!==e?le["d"].formatEther(this.nativePrice):0)},getPrice(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new se.a(t).div(e).toFixed())||"0"},getEstimatedFee(e){return e?this.$f.formatNumberCurrencyUnit(new se.a(e.toString()).times(this.nativePrice).times(this.gasPrice).div(String(10**18)).toFixed()||"0",2):"0"},submitSwap(){this.$emit("submit")},formatLogo(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):e.isETH?this.$f.formatIcon(ae["k"]+"-"+this.chain):"/icon-default.png":e.logoURI},goLink(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.swapInfo.transaction,"tx"))},accept(){this.priceUpdated=!1}}},ce=(i("558f"),i("6b0d")),de=i.n(ce);const me=de()(re,[["render",oe],["__scopeId","data-v-87af1496"]]);t["a"]=me},aeccf:function(e,t,i){e.exports=i.p+"static/img/icon-default.75f6e9a0.png"},afd7:function(e,t,i){e.exports=i.p+"static/img/loading.fdd45987.svg"},bb6a:function(e,t,i){},c3bf:function(e,t,i){"use strict";i("ee6c")},c7e3:function(e,t,i){"use strict";i("885c")},ce94:function(e,t,i){"use strict";var o=i("7a23");const n={key:0,class:"swap-title"},s={key:1,class:"swap-title"},a={key:2,class:"swap-title"},l={key:3,class:"swap-info"},r={key:0,class:"swap-info_item"},c={class:"swap-info_item-label"},d={class:"swap-info_item-value"},m={class:"swap-info_item"},u={class:"swap-info_item-label"},h={class:"swap-info_item-value"},p=["src"],b={class:"ml-5"},v={key:0,class:"swap-info_item"},f={class:"swap-info_item-label"},g={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},k={style:{color:"#3F80F7"}},w={key:1,class:"swap-info_item"},O={class:"swap-info_item-label"},j={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},y={style:{color:"#3F80F7"}},S={class:"swap-info_item"},T={class:"swap-info_item-label"},_={class:"swap-info_item-value"},N=["src"],$={class:"ml-5"},V={class:"swap-info_item"},x={class:"swap-info_item-label"},E={class:"swap-info_item-value"},A=["src"],I={class:"ml-5"},B={key:0,class:"swap-info_item"},C={class:"swap-info_item-label"},P={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},D={style:{color:"#3F80F7"}},L={key:1,class:"swap-info_item"},F={class:"swap-info_item-label"},M={class:"swap-info_item-value",style:{"font-size":"0.24rem"}},U={style:{color:"#3F80F7"}},R={class:"swap-info_item"},G={class:"swap-info_item-label"},Q={class:"swap-info_item-value"},z=["src"],q={class:"ml-5"},W={key:3,class:"swap-info_item"},H={class:"swap-info_item-label"},K={class:"swap-info_item-value",style:{"text-align":"right"}},X={class:"swap-info_item tips warning"},J={class:"swap-info_item tips warning"},Y={key:0,class:"swap-info_item tips warning"},Z={key:1,class:"swap-info_item tips warning"},ee={key:4,class:"swap-info"},te={class:"swap-info_item header"},ie={class:"header-li"},oe={class:"header-li_left"},ne=["src"],se={class:"header-li_right"},ae={class:"switch-box"},le={class:"header-li"},re={class:"header-li_left"},ce=["src"],de={class:"header-li_right"},me={class:"swap-info_item"},ue={class:"swap-info_item-label"},he={class:"swap-info_item-value"},pe={class:"swap-info_item"},be={class:"swap-info_item-label"},ve={class:"swap-info_item-value"},fe={class:"swap-info_item"},ge={class:"swap-info_item-label"},ke={class:"swap-info_item-value"},we={class:"footer"};function Oe(e,t,i,Oe,je,ye){const Se=Object(o["resolveComponent"])("van-icon"),Te=Object(o["resolveComponent"])("van-button"),_e=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createBlock"])(_e,{show:ye.dialogVisible,"onUpdate:show":t[1]||(t[1]=e=>ye.dialogVisible=e),style:Object(o["normalizeStyle"])({width:"90%",padding:"0.4rem"}),closeable:"",round:"",teleport:"#app"},{default:Object(o["withCtx"])(()=>{var Oe,_e,Ne,$e,Ve,xe,Ee,Ae,Ie,Be,Ce,Pe,De,Le,Fe,Me,Ue,Re,Ge,Qe;return[0===i.limitInfo.orderType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("header",n,Object(o["toDisplayString"])(0===i.limitInfo.activeTab?e.$t("limitBuy"):e.$t("limitSell")),1)):Object(o["createCommentVNode"])("",!0),1===i.limitInfo.orderType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("header",s,Object(o["toDisplayString"])(0===i.limitInfo.activeTab?e.$t("stopLimitBuy"):e.$t("stopLimitSell")),1)):Object(o["createCommentVNode"])("",!0),2===i.limitInfo.orderType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("header",a,Object(o["toDisplayString"])(e.$t("tradeConfirm")),1)):Object(o["createCommentVNode"])("",!0),0===i.limitInfo.orderType||1===i.limitInfo.orderType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",l,[1===i.limitInfo.orderType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",r,[Object(o["createElementVNode"])("div",c,Object(o["toDisplayString"])(e.$t("limitEffective")),1),Object(o["createElementVNode"])("div",d,Object(o["toDisplayString"])(e.$t("triggerPriceEffective",{symbol:1===i.limitInfo.activeTab?(null===(Oe=i.limitInfo)||void 0===Oe||null===(Oe=Oe.fromToken)||void 0===Oe?void 0:Oe.symbol)||"":(null===(_e=i.limitInfo)||void 0===_e||null===(_e=_e.toToken)||void 0===_e?void 0:_e.symbol)||"",price:e.$f.formatNumber2((null===(Ne=i.limitInfo)||void 0===Ne?void 0:Ne.triggerPrice)||0)})),1)])):Object(o["createCommentVNode"])("",!0),0===i.limitInfo.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("li",m,[Object(o["createElementVNode"])("div",u,Object(o["toDisplayString"])(e.$t("limitBuy")),1),Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ye.formatLogo(i.limitInfo.toToken),alt:"",height:"20"},null,8,p),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.toAmount||0)),1),Object(o["createElementVNode"])("span",b,Object(o["toDisplayString"])((null===($e=i.limitInfo)||void 0===$e||null===($e=$e.toToken)||void 0===$e?void 0:$e.symbol)||""),1)])]),"solana"!==i.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",v,[Object(o["createElementVNode"])("div",f,Object(o["toDisplayString"])(e.$t("limitPrice"))+"("+Object(o["toDisplayString"])(1===i.limitInfo.activeTab?(null===(Ve=i.limitInfo)||void 0===Ve||null===(Ve=Ve.fromToken)||void 0===Ve?void 0:Ve.symbol)||"":(null===(xe=i.limitInfo)||void 0===xe||null===(xe=xe.toToken)||void 0===xe?void 0:xe.symbol)||"")+")",1),Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.targetLimitPrice||0)),1),Object(o["createElementVNode"])("span",k,"("+Object(o["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",w,[Object(o["createElementVNode"])("div",O,Object(o["toDisplayString"])(e.$t("limitPrice"))+"("+Object(o["toDisplayString"])(1===i.limitInfo.activeTab?(null===(Ee=i.limitInfo)||void 0===Ee||null===(Ee=Ee.fromToken)||void 0===Ee?void 0:Ee.symbol)||"":(null===(Ae=i.limitInfo)||void 0===Ae||null===(Ae=Ae.toToken)||void 0===Ae?void 0:Ae.symbol)||"")+")",1),Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.targetLimitPrice||0)),1),Object(o["createElementVNode"])("span",y,"("+Object(o["toDisplayString"])(e.$t("auto-submitWhenPriceBuy"))+")",1)])])),Object(o["createElementVNode"])("li",S,[Object(o["createElementVNode"])("div",T,Object(o["toDisplayString"])(e.$t("expectedPayment")),1),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ye.formatLogo(i.limitInfo.fromToken),alt:"",height:"20"},null,8,N),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.fromAmount||0)),1),Object(o["createElementVNode"])("span",$,Object(o["toDisplayString"])((null===(Ie=i.limitInfo)||void 0===Ie||null===(Ie=Ie.fromToken)||void 0===Ie?void 0:Ie.symbol)||""),1)])])],64)):Object(o["createCommentVNode"])("",!0),1===i.limitInfo.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:2},[Object(o["createElementVNode"])("li",V,[Object(o["createElementVNode"])("div",x,Object(o["toDisplayString"])(e.$t("limitSell")),1),Object(o["createElementVNode"])("div",E,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ye.formatLogo(i.limitInfo.fromToken),alt:"",height:"20"},null,8,A),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.fromAmount||0)),1),Object(o["createElementVNode"])("span",I,Object(o["toDisplayString"])((null===(Be=i.limitInfo)||void 0===Be||null===(Be=Be.fromToken)||void 0===Be?void 0:Be.symbol)||""),1)])]),"solana"!==i.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",B,[Object(o["createElementVNode"])("div",C,Object(o["toDisplayString"])(e.$t("limitPrice"))+"("+Object(o["toDisplayString"])(1===i.limitInfo.activeTab?(null===(Ce=i.limitInfo)||void 0===Ce||null===(Ce=Ce.fromToken)||void 0===Ce?void 0:Ce.symbol)||"":(null===(Pe=i.limitInfo)||void 0===Pe||null===(Pe=Pe.toToken)||void 0===Pe?void 0:Pe.symbol)||"")+")",1),Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.targetLimitPrice||0)),1),Object(o["createElementVNode"])("span",D,"("+Object(o["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",L,[Object(o["createElementVNode"])("div",F,Object(o["toDisplayString"])(e.$t("limitPrice"))+"("+Object(o["toDisplayString"])(1===i.limitInfo.activeTab?(null===(De=i.limitInfo)||void 0===De||null===(De=De.fromToken)||void 0===De?void 0:De.symbol)||"":(null===(Le=i.limitInfo)||void 0===Le||null===(Le=Le.toToken)||void 0===Le?void 0:Le.symbol)||"")+")",1),Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.targetLimitPrice||0)),1),Object(o["createElementVNode"])("span",U,"("+Object(o["toDisplayString"])(e.$t("auto-submitWhenPriceSell"))+")",1)])])),Object(o["createElementVNode"])("li",R,[Object(o["createElementVNode"])("div",G,Object(o["toDisplayString"])(e.$t("expectedReceivable")),1),Object(o["createElementVNode"])("div",Q,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ye.formatLogo(i.limitInfo.toToken),alt:"",height:"20"},null,8,z),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.toAmount||0)),1),Object(o["createElementVNode"])("span",q,Object(o["toDisplayString"])((null===(Fe=i.limitInfo)||void 0===Fe||null===(Fe=Fe.toToken)||void 0===Fe?void 0:Fe.symbol)||""),1)])])],64)):Object(o["createCommentVNode"])("",!0),"solana"!==i.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",W,[Object(o["createElementVNode"])("div",H,Object(o["toDisplayString"])(e.$t("estimateGas")),1),Object(o["createElementVNode"])("div",K,Object(o["toDisplayString"])(e.$t("estimateGasTips",{n:e.$f.formatNumber2("solana"===i.chain?"0.1":null!==(Me=i.limitGasU)&&void 0!==Me?Me:1,1)})),1)])):Object(o["createCommentVNode"])("",!0),"solana"!==i.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:4},[Object(o["createElementVNode"])("li",X,"* "+Object(o["toDisplayString"])(e.$t("limitFeeTip")),1),Object(o["createElementVNode"])("li",J,"* "+Object(o["toDisplayString"])(e.$t("limitTokenTips")),1),(null===(Ue=i.limitInfo)||void 0===Ue||null===(Ue=Ue.fromToken)||void 0===Ue?void 0:Ue.address)===je.NATIVE_TOKEN?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",Y,Object(o["toDisplayString"])(e.$t("limitTips1")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",Z,Object(o["toDisplayString"])(e.$t("limitTips2")),1))],64)):Object(o["createCommentVNode"])("",!0)])):2===i.limitInfo.orderType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",ee,[Object(o["createElementVNode"])("li",te,[Object(o["createElementVNode"])("div",ie,[Object(o["createElementVNode"])("div",oe,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ye.formatLogo(i.limitInfo.fromToken),alt:"",height:"20"},null,8,ne),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.limitInfo.fromToken.symbol),1)]),Object(o["createElementVNode"])("div",se,Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.fromAmount||0)||"0"),1)]),Object(o["createElementVNode"])("div",ae,[Object(o["createVNode"])(Se,{class:"switch-icon",name:"down"})]),Object(o["createElementVNode"])("div",le,[Object(o["createElementVNode"])("div",re,[Object(o["createElementVNode"])("img",{class:"icon-token",src:ye.formatLogo(i.limitInfo.toToken),alt:"",height:"20"},null,8,ce),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.limitInfo.toToken.symbol),1)]),Object(o["createElementVNode"])("div",de,Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitInfo.toAmount||0)||"0"),1)])]),Object(o["createElementVNode"])("li",me,[Object(o["createElementVNode"])("div",ue,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("div",he,Object(o["toDisplayString"])(null===(Re=i.limitInfo)||void 0===Re?void 0:Re.slippage)+"%",1)]),Object(o["createElementVNode"])("li",pe,[Object(o["createElementVNode"])("div",be,Object(o["toDisplayString"])(e.$t("estimatedGas")),1),Object(o["createElementVNode"])("div",ve,[Object(o["createElementVNode"])("span",null,"≈ $"+Object(o["toDisplayString"])(e.$f.formatNumber2(i.limitGasU||"0")),1),Object(o["createElementVNode"])("button",{type:"button",class:"clickable flex items-center tag-question",onClick:t[0]||(t[0]=Object(o["withModifiers"])(t=>{var o;return e.$dialog.alert({title:e.$t("tips"),message:e.$t("noGasTips",{s:(null===(o=i.limitInfo)||void 0===o||null===(o=o.fromToken)||void 0===o?void 0:o.symbol)||""}),confirmButtonText:e.$t("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"center"})},["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("noGas")),1),Object(o["createVNode"])(Se,{name:"question-o"})])])]),Object(o["createElementVNode"])("li",fe,[Object(o["createElementVNode"])("div",ge,Object(o["toDisplayString"])(e.$t("minimumReceived")),1),Object(o["createElementVNode"])("div",ke,Object(o["toDisplayString"])(e.$f.formatNumber2((null===(Ge=i.limitInfo)||void 0===Ge?void 0:Ge.minReturn)||0))+" "+Object(o["toDisplayString"])(null===(Qe=i.limitInfo)||void 0===Qe||null===(Qe=Qe.toToken)||void 0===Qe?void 0:Qe.symbol),1)])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",we,[Object(o["createVNode"])(Te,{class:"submit-button",type:"primary",loading:ye.isLoading,"loading-text":e.$t("confirming"),block:"",round:"",onClick:Object(o["withModifiers"])(ye.submitSwap,["stop"])},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["loading","loading-text","onClick"])])]}),_:1},8,["show","style"])}var je=i("901e"),ye=i.n(je),Se=i("c9d9"),Te=i("fa7d"),_e={name:"ConfirmLimit",props:{visible:Boolean,limitInfo:Object,loading:Boolean,chain:String,limitGasU:String},emits:["update:visible","submit"],data(){return{NATIVE_TOKEN:Se["k"],limitContractsFee:Se["v"]}},computed:{dialogVisible:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},isLoading(){return this.loading}},watch:{visible(e){var t,i;console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(i=t.isRefreshEnable)||void 0===i||i.call(t,"bridge",!e)}},methods:{formatUnits:Te["d"].formatUnits,getPrice(e,t){return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new ye.a(t).div(e).toFixed())||"0"},submitSwap(){this.$emit("submit")},formatLogo(e){var t;return!e.logoURI||null!==e&&void 0!==e&&null!==(t=e.logoURI)&&void 0!==t&&t.includes("empty-token")?e.logo_url?this.$f.formatIcon(e):"/icon-default.png":e.logoURI},goLink(){this.$f.openBrowser(this.$f.formatExplorerUrl(this.chain,this.limitInfo.transaction,"tx"))}}},Ne=(i("2832"),i("6b0d")),$e=i.n(Ne);const Ve=$e()(_e,[["render",Oe],["__scopeId","data-v-3f55fafa"]]);t["a"]=Ve},cffb:function(e,t,i){},d01f:function(e,t,i){"use strict";i("2b70")},e524:function(e,t,i){e.exports=i.p+"static/img/arrow-right.484eb652.svg"},e60c:function(e,t,i){},ee6c:function(e,t,i){},f898:function(e,t,i){},fadf:function(e,t,i){"use strict";var o=i("7a23");const n=e=>(Object(o["pushScopeId"])("data-v-76f032e2"),e=e(),Object(o["popScopeId"])(),e),s={class:"select-box"},a={class:"flex items-center"},l={key:0,class:"color-999"},r=Object(o["createTextVNode"])("("),c=Object(o["createTextVNode"])(")"),d=n(()=>Object(o["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)),m={style:{"margin-right":"0.1rem"}},u=n(()=>Object(o["createElementVNode"])("span",{class:"mr-5 ml-5"},"|",-1)),h={class:"mr-5"},p={style:{background:"#fff",padding:"0 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},b={class:"setting-title"},v={class:"slippage-setting"},f=Object(o["createTextVNode"])("%"),g={key:0,class:"class-b-s"},k={class:"setting-title flex items-center justify-between"},w={class:"mr-5"},O=Object(o["createTextVNode"])("NEW"),j=n(()=>Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)),y={class:"flex items-center justify-between text-size-14 mt-15"},S={style:{"max-width":"65%"}},T={key:0,class:"flex items-center justify-between clickable",style:{padding:"0",color:"#BFBFBF"}},_={class:"setting-title mb-0"},N={class:"inline-flex items-center"},$={class:"mr-5"},V={key:0,class:"icon-svg",style:{"font-size":"0.46rem"},"aria-hidden":"true"},x=n(()=>Object(o["createElementVNode"])("use",{"xlink:href":"#icon-HOT"},null,-1)),E=[x],A={class:"popup-title"},I={class:"form-submit mt-10"};function B(e,t,i,n,x,B){var C,P;const D=Object(o["resolveComponent"])("van-field"),L=Object(o["resolveComponent"])("van-tag"),F=Object(o["resolveComponent"])("van-switch"),M=Object(o["resolveComponent"])("van-icon"),U=Object(o["resolveComponent"])("van-divider"),R=Object(o["resolveComponent"])("van-radio"),G=Object(o["resolveComponent"])("van-cell"),Q=Object(o["resolveComponent"])("van-radio-group"),z=Object(o["resolveComponent"])("van-button"),q=Object(o["resolveComponent"])("van-action-sheet"),W=Object(o["resolveComponent"])("van-checkbox"),H=Object(o["resolveComponent"])("van-checkbox-group"),K=Object(o["resolveComponent"])("van-empty"),X=Object(o["resolveComponent"])("van-form"),J=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createElementVNode"])("div",a,[B.isSwapMode?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("span",{style:Object(o["normalizeStyle"])([{"text-align":"right"},{color:"protect"===i.swapMode?"#F81111":"",fontWeight:"protect"===i.swapMode?"500":"normal"}])},Object(o["toDisplayString"])(B.swapModeName),5),B.autoName?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",l,[r,Object(o["createElementVNode"])("span",{style:Object(o["normalizeStyle"])({color:"protect"===i.autoSwapMode?"#F81111":"",fontWeight:"protect"===i.autoSwapMode?"500":"normal"})},Object(o["toDisplayString"])(B.autoName),5),c])):Object(o["createCommentVNode"])("",!0),d],64)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",m,Object(o["toDisplayString"])("auto"===i.slippage?e.$t("autoSlippage"):e.$t("manualSlippage"))+"("+Object(o["toDisplayString"])("auto"===i.slippage?i.autoSlippage:i.slippage)+"%)",1),x.isCanBatchSwap&&(null===(C=B.selectSubWallets)||void 0===C?void 0:C.length)>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[u,Object(o["createElementVNode"])("span",h,Object(o["toDisplayString"])((null===(P=B.selectSubWallets)||void 0===P?void 0:P.length)||0)+" "+Object(o["toDisplayString"])(e.$t("subWallets")),1)],64)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(o["withModifiers"])(e=>x.show=!0,["stop"]))})]),Object(o["createVNode"])(q,{show:x.show,"onUpdate:show":t[9]||(t[9]=e=>x.show=e),title:e.$t("swapSet"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(o["withCtx"])(()=>{var i,n;return[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("div",b,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])({active:"0.5"===x.slippageValue}),onClick:t[1]||(t[1]=e=>x.slippageValue="0.5")},"0.5%",2),Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])({active:"1"===x.slippageValue}),onClick:t[2]||(t[2]=e=>x.slippageValue="1")},"1%",2),Object(o["createElementVNode"])("button",{type:"button",class:Object(o["normalizeClass"])({active:void 0===x.slippageValue}),onClick:t[3]||(t[3]=e=>x.slippageValue=void 0)},Object(o["toDisplayString"])(e.$t("smartSetting")),3),Object(o["createVNode"])(D,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",placeholder:e.$t("custom"),modelValue:x.slippageValue,"onUpdate:modelValue":t[4]||(t[4]=e=>x.slippageValue=e),onBlur:B.handleBlur,clearable:""},{"right-icon":Object(o["withCtx"])(()=>[f]),_:1},8,["placeholder","modelValue","onBlur"])]),x.isCanBatchSwap?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("span",w,Object(o["toDisplayString"])(e.$t("batchSwap")),1),Object(o["createVNode"])(L,{type:"danger",color:"#eb5139"},{default:Object(o["withCtx"])(()=>[O]),_:1}),j,Object(o["createVNode"])(F,{modelValue:x.isBatchSwap,"onUpdate:modelValue":t[5]||(t[5]=e=>x.isBatchSwap=e),size:"0.32rem","inactive-color":"#BFBFBF"},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("span",S,Object(o["toDisplayString"])(e.$t("selectAddressCanSwapSameTime")),1),x.isBatchSwap?0===(null===(i=B.selectSubWallets)||void 0===i?void 0:i.length)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:1,onClick:t[6]||(t[6]=Object(o["withModifiers"])(e=>x.selectSubWalletVisible=!0,["stop"])),class:"flex items-center justify-between clickable",style:{padding:"0",color:"#F6465D"}},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("plsSelectAddress")),1),Object(o["createVNode"])(M,{name:"arrow"})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:2,class:"flex items-center justify-between clickable text-right",style:{padding:"0",color:"#3F80F7"},onClick:t[7]||(t[7]=Object(o["withModifiers"])(e=>x.selectSubWalletVisible=!0,["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("selectedAddress",{n:null===(n=B.selectSubWallets)||void 0===n?void 0:n.length})),1),Object(o["createVNode"])(M,{name:"arrow"})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",T,[Object(o["createVNode"])(M,{name:"arrow"})]))])])):Object(o["createCommentVNode"])("",!0),B.isSwapMode?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[x.isCanBatchSwap?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(U,{key:0,style:{margin:"0.4rem 0"}})),Object(o["createElementVNode"])("div",_,Object(o["toDisplayString"])(e.$t("swapMode")),1),Object(o["createVNode"])(Q,{modelValue:x.swapModeValue,"onUpdate:modelValue":t[8]||(t[8]=e=>x.swapModeValue=e),style:{"--van-cell-label-margin-top":"0"}},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(B.typeSwapMode,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(G,{key:e.value,border:!1,clickable:"",onClick:t=>x.swapModeValue=e.value,style:{padding:"0.16rem 0"}},{title:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("i",{class:Object(o["normalizeClass"])("iconfont icon-"+e.icon)},null,2),Object(o["createElementVNode"])("span",$,Object(o["toDisplayString"])(e.name),1),"auto"===e.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("svg",V,E)):Object(o["createCommentVNode"])("",!0)])]),label:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]),"right-icon":Object(o["withCtx"])(()=>[Object(o["createVNode"])(R,{"icon-size":"0.3rem",name:e.value},null,8,["name"])]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])],64)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(z,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(o["normalizeStyle"])({marginTop:B.isSwapMode?"0.5rem":"1.5rem"}),onClick:Object(o["withModifiers"])(B.submitSwapSet,["stop"])},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm")),1)]),_:1},8,["style","onClick"])])]}),_:1},8,["show","title"]),Object(o["createVNode"])(J,{show:x.selectSubWalletVisible,"onUpdate:show":t[12]||(t[12]=e=>x.selectSubWalletVisible=e),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("h3",A,Object(o["toDisplayString"])(e.$t("selectSubWallet")),1),Object(o["createVNode"])(X,{class:"popup-content",onSubmit:B.confirmSubmitSelectSubWallet},{default:Object(o["withCtx"])(()=>{var i;return[B.subWallets&&(null===(i=B.subWallets)||void 0===i?void 0:i.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(H,{key:0,modelValue:x.subWalletChecked,"onUpdate:modelValue":t[11]||(t[11]=e=>x.subWalletChecked=e),style:{"max-height":"50vh","min-height":"30vh","--van-cell-horizontal-padding":"0.1rem","--van-cell-background-color":"transparent","overflow-y":"auto"}},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(B.subWallets,(e,i)=>{var n,s,a,l;return Object(o["openBlock"])(),Object(o["createBlock"])(G,{clickable:"",key:e,border:!1,title:`${e.name}(${null===e||void 0===e||null===(n=e.address)||void 0===n||null===(s=n.slice)||void 0===s?void 0:s.call(n,0,4)}...${null===e||void 0===e||null===(a=e.address)||void 0===a||null===(l=a.slice)||void 0===l?void 0:l.call(a,-4)})`,onClick:e=>B.toggle(i)},{"right-icon":Object(o["withCtx"])(()=>[Object(o["createVNode"])(W,{name:e.address,ref_for:!0,ref:"checkbox-"+i,onClick:t[10]||(t[10]=Object(o["withModifiers"])(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"])}),128))]),_:1},8,["modelValue"])):(Object(o["openBlock"])(),Object(o["createBlock"])(K,{key:1,style:{"--van-empty-padding":"0.1rem 0 0.5rem 0","--van-empty-description-color":"#888"},description:e.$t("noWallets")},null,8,["description"])),Object(o["createElementVNode"])("div",I,[Object(o["createVNode"])(z,{class:"btn",style:{"border-radius":"0.08rem"},block:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirm1")),1)]),_:1})])]}),_:1},8,["onSubmit"])]),_:1},8,["show"])])}var C=i("2c28");const P=i("ddc3");var D={name:"SwapSelectMode",props:{autoSwapMode:String,swapMode:String,slippage:{type:String,default:"2"},autoSlippage:String},emits:["update:swapMode","update:slippage"],setup(){let e=Object(C["useStorage"])("batchSwapClicked",!1,localStorage);return{batchSwapClicked:e}},data(){var e,t;return{show:!1,slippageValue:"auto"===this.slippage?void 0:this.slippage,swapModeValue:this.swapMode,isBatchSwap:(null===(e=this.$store.state)||void 0===e?void 0:e.isBatchSwap)||!1,addressList:[],selectSubWalletVisible:!1,subWalletChecked:[],isCanBatchSwap:!(null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||!t.appSelectSubWallet)||!1}},computed:{typeSwapMode(){return[{name:this.$t("fastMode"),value:"fast",label:this.$t("fastLabel"),icon:"jisu",symbol:this.$t("fast")},{name:this.$t("privacy"),value:"protect",label:this.$t("protectLabel"),icon:"yinsi",symbol:this.$t("protect")},{name:this.$t("smartMode"),value:"auto",label:this.$t("smartLabel"),icon:"zhineng"}]},swapModeName(){var e;return null===(e=this.typeSwapMode.find(e=>e.value===this.swapMode))||void 0===e?void 0:e.name},autoName(){if("auto"===this.swapMode){var e;let t=null===(e=this.typeSwapMode.find(e=>e.value===this.autoSwapMode))||void 0===e?void 0:e.symbol;return""+t}return""},isSwapMode(){var e,t,i,o,n,s,a,l,r,c;let d=window.navigator.userAgent;if(d.includes("OSType/2")){var m,u;let e=d.replace(/^.*Ave.ai\/(.*) OSType\/2;$/,"$1"),t=P.gte(e,"2.3.0");return(null===(m=(u=["eth","bsc"]).includes)||void 0===m?void 0:m.call(u,this.$store.getters.netId))&&t}let h=null===(e=(null===(i=window)||void 0===i?void 0:i.main)||(null===(o=window)||void 0===o?void 0:o._tw_)||{})||void 0===e||null===(t=e.appGetPlatform)||void 0===t?void 0:t.call(e),p=null===(n=(null===(a=window)||void 0===a?void 0:a.main)||(null===(l=window)||void 0===l?void 0:l._tw_)||{})||void 0===n||null===(s=n.getAppVersionCode)||void 0===s?void 0:s.call(n),b="android"===h&&p>112;return(null===(r=(c=["eth","bsc"]).includes)||void 0===r?void 0:r.call(c,this.$store.getters.netId))&&b},subWallets(){return this.$store.state.subWallets||[]},selectSubWallets(){return this.$store.getters.selectSubWallets||[]}},watch:{show(e){var t,i,o;e&&(this.slippageValue="auto"===this.slippage?void 0:this.slippage,this.isBatchSwap=(null===(o=this.$store.state)||void 0===o?void 0:o.isBatchSwap)||!1,console.log("subWallets",this.subWallets));console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(t=t._tw_)||void 0===t||null===(i=t.isRefreshEnable)||void 0===i||i.call(t,"bridge",!e)},selectSubWalletVisible(e){e&&(this.subWalletChecked=this.selectSubWallets.map(e=>e.address))}},methods:{handleBlur(){"auto"!==this.slippageValue&&(this.show&&Number(this.slippageValue)<0&&(this.slippageValue="0"),this.show&&Number(this.slippageValue)>49.99&&(this.slippageValue="49.99"))},submitSwapSet(){this.$emit("update:swapMode",this.swapModeValue),localStorage.swapMode=this.swapModeValue,void 0===this.slippageValue?(this.$emit("update:slippage","auto"),localStorage.swapSlippage="auto"):(this.$emit("update:slippage",this.slippageValue),localStorage.swapSlippage=this.slippageValue),this.$store.state.isBatchSwap=this.isBatchSwap,this.isBatchSwap||this.$store.commit("setSelectSubWallets",[]),this.show=!1},confirmSubmitSelectSubWallet(){var e,t;console.log("confirmSubmitSelectSubWallet----");let i=null===(e=this.subWallets)||void 0===e||null===(t=e.filter)||void 0===t?void 0:t.call(e,e=>this.subWalletChecked.includes(e.address));console.log(i),this.$store.commit("setSelectSubWallets",i),this.selectSubWalletVisible=!1},toggle(e){var t,i;null===(t=this.$refs["checkbox-"+e])||void 0===t||null===(t=t[0])||void 0===t||null===(i=t.toggle)||void 0===i||i.call(t)}}},L=(i("c3bf"),i("6b0d")),F=i.n(L);const M=F()(D,[["render",B],["__scopeId","data-v-76f032e2"]]);t["a"]=M},fcef:function(e,t,i){"use strict";i("0e64")}}]);